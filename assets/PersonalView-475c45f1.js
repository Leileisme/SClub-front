import{p as lt,B as z,o as O,L as a,as as Vt,at as nt,au as $t,av as Gt,aw as Ht,ax as Yt,h as ct,ay as jt,az as Be,aA as rt,aB as qt,aC as Wt,a2 as ge,aD as Pe,aE as Xt,s as mt,_ as de,v as e,J as q,$ as me,a6 as Te,M as _e,aF as Qt,aG as Zt,G as n,aH as Jt,aI as Ut,aJ as el,aK as tl,aL as ll,aM as al,aN as ol,a4 as It,aO as sl,aP as ul,aQ as yt,aR as nl,aS as rl,ad as bt,ai as il,aT as dl,aU as cl,aV as ml,w as fl,aW as vl,a as _l,aX as El,r as pl,t as xt,R as at,y as ft,x as pe,D as r,H as X,O as F,F as t,K as se,Z as ot,A as Ne,T as it,W as ie,U as Le,aY as Ye,aZ as gl,C as Tt,E as p,P as H,a8 as Ke,ap as qe,N as Rt,I as De,a7 as we,Q as k,ar as yl,a5 as bl,aq as We,a_ as xl,z as Nt,a9 as Fe,Y as ae,a0 as Cl,a1 as Sl,a3 as Ct,al as St}from"./index-64fe88be.js";import{m as Ml,u as hl,b as Al,c as Vl,a as Ul,V as je,U as Ae}from"./VDatePicker-3df09295.js";import{V as J}from"./VDivider-88d46b33.js";import{u as Il,t as He,a as Ve,V as oe,b as Ot,c as Tl}from"./VList-910fe5b4.js";import{u as kt,a as W,b as dt,V as Bt,v as Rl}from"./index-2463b549.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";import{b as Lt,c as wt,V as Nl,a as Ol}from"./VAppBarTitle-bf49e761.js";import{V as Re}from"./VContainer-fec5554a.js";import{V as $}from"./VRow-af87a27a.js";import{V as s}from"./VCol-4c7e89b7.js";import{V as Se}from"./VMenu-e2dc7438.js";import{V as Ft}from"./VChip-e05d7c28.js";import{V as kl,a as ut}from"./VTabs-c59cef9f.js";import{a as Mt,V as Bl}from"./VWindowItem-1225efa8.js";import{B as Xe}from"./BlankLine-021ecd90.js";import"./ssrBoot-77ec42f0.js";const Ll=(l,c,u)=>l==null||c==null?-1:l.toString().toLocaleLowerCase().indexOf(c.toString().toLocaleLowerCase()),wl=lt({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Fl(l,c,u){var E;const o=[],f=(u==null?void 0:u.default)??Ll,g=u!=null&&u.filterKeys?nt(u.filterKeys):!1,y=Object.keys((u==null?void 0:u.customKeyFilter)??{}).length;if(!(l!=null&&l.length))return o;e:for(let B=0;B<l.length;B++){const[w,U=w]=nt(l[B]),_={},V={};let x=-1;if(c&&!(u!=null&&u.noFilter)){if(typeof w=="object"){const v=g||Object.keys(U);for(const G of v){const ce=$t(U,G,U),ee=(E=u==null?void 0:u.customKeyFilter)==null?void 0:E[G];if(x=ee?ee(ce,c,w):f(ce,c,w),x!==-1&&x!==!1)ee?_[G]=x:V[G]=x;else if((u==null?void 0:u.filterMode)==="every")continue e}}else x=f(w,c,w),x!==-1&&x!==!1&&(V.title=x);const K=Object.keys(V).length,j=Object.keys(_).length;if(!K&&!j||(u==null?void 0:u.filterMode)==="union"&&j!==y&&!K||(u==null?void 0:u.filterMode)==="intersection"&&(j!==y||!K))continue}o.push({index:B,matches:{...V,..._}})}return o}function Pl(l,c,u,o){const f=z([]),g=z(new Map),y=O(()=>o!=null&&o.transform?a(c).map(B=>[B,o.transform(B)]):a(c));Vt(()=>{const B=typeof u=="function"?u():a(u),w=typeof B!="string"&&typeof B!="number"?"":String(B),U=Fl(y.value,w,{customKeyFilter:{...l.customKeyFilter,...a(o==null?void 0:o.customKeyFilter)},default:l.customFilter,filterKeys:l.filterKeys,filterMode:l.filterMode,noFilter:l.noFilter}),_=a(c),V=[],x=new Map;U.forEach(K=>{let{index:j,matches:v}=K;const G=_[j];V.push(G),x.set(G.value,v)}),f.value=V,g.value=x});function E(B){return g.value.get(B.value)}return{filteredItems:f,filteredMatches:g,getMatches:E}}function Kl(l,c,u){if(c==null)return l;if(Array.isArray(c))throw new Error("Multiple matches is not implemented");return typeof c=="number"&&~c?e(q,null,[e("span",{class:"v-combobox__unmask"},[l.substr(0,c)]),e("span",{class:"v-combobox__mask"},[l.substr(c,u)]),e("span",{class:"v-combobox__unmask"},[l.substr(c+u)])]):l}const Dl=lt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...wl({filterKeys:["title"]}),...Ml({hideNoData:!0,returnObject:!0}),...Gt(Ht({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Yt({transition:!1})},"VCombobox"),zl=ct()({name:"VCombobox",props:Dl(),emits:{"update:focused":l=>!0,"update:modelValue":l=>!0,"update:search":l=>!0,"update:menu":l=>!0},setup(l,c){var ke;let{emit:u,slots:o}=c;const{t:f}=jt(),g=z(),y=Be(!1),E=Be(!0),B=Be(!1),w=z(),U=z(),_=rt(l,"menu"),V=O({get:()=>_.value,set:i=>{var R;_.value&&!i&&((R=w.value)!=null&&R.ΨopenChildren)||(_.value=i)}}),x=Be(-1);let K=!1;const j=O(()=>{var i;return(i=g.value)==null?void 0:i.color}),v=O(()=>V.value?l.closeText:l.openText),{items:G,transformIn:ce,transformOut:ee}=Il(l),{textColorClasses:ye,textColorStyles:fe}=qt(j),h=rt(l,"modelValue",[],i=>ce(nt(i)),i=>{const R=ee(i);return l.multiple?R:R[0]??null}),Q=Wt(),te=Be(l.multiple?"":((ke=h.value[0])==null?void 0:ke.title)??""),L=O({get:()=>te.value,set:i=>{var R;if(te.value=i??"",l.multiple||(h.value=[He(l,i)]),i&&l.multiple&&((R=l.delimiters)!=null&&R.length)){const A=i.split(new RegExp(`(?:${l.delimiters.join("|")})+`));A.length>1&&(A.forEach(m=>{m=m.trim(),m&&ne(He(l,m))}),te.value="")}i||(x.value=-1),E.value=!i}}),le=O(()=>typeof l.counterValue=="function"?l.counterValue(h.value):typeof l.counterValue=="number"?l.counterValue:l.multiple?h.value.length:L.value.length);ge(te,i=>{K?Pe(()=>K=!1):y.value&&!V.value&&(V.value=!0),u("update:search",i)}),ge(h,i=>{var R;l.multiple||(te.value=((R=i[0])==null?void 0:R.title)??"")});const{filteredItems:I,getMatches:Z}=Pl(l,G,()=>E.value?"":L.value),P=O(()=>l.hideSelected?I.value.filter(i=>!h.value.some(R=>R.value===i.value)):I.value),ve=O(()=>h.value.map(i=>i.value)),ue=O(()=>{var R;return(l.autoSelectFirst===!0||l.autoSelectFirst==="exact"&&L.value===((R=P.value[0])==null?void 0:R.title))&&P.value.length>0&&!E.value&&!B.value}),S=O(()=>l.hideNoData&&!P.value.length||l.readonly||(Q==null?void 0:Q.isReadonly.value)),M=z(),{onListScroll:Y,onListKeydown:C}=hl(M,g);function T(i){K=!0,l.openOnClear&&(V.value=!0)}function D(){S.value||(V.value=!0)}function be(i){S.value||(y.value&&(i.preventDefault(),i.stopPropagation()),V.value=!V.value)}function xe(i){var m;if(el(i)||l.readonly||Q!=null&&Q.isReadonly.value)return;const R=g.value.selectionStart,A=h.value.length;if((x.value>-1||["Enter","ArrowDown","ArrowUp"].includes(i.key))&&i.preventDefault(),["Enter","ArrowDown"].includes(i.key)&&(V.value=!0),["Escape"].includes(i.key)&&(V.value=!1),["Enter","Escape","Tab"].includes(i.key)&&(ue.value&&["Enter","Tab"].includes(i.key)&&ne(I.value[0]),E.value=!0),i.key==="ArrowDown"&&ue.value&&((m=M.value)==null||m.focus("next")),!!l.multiple){if(["Backspace","Delete"].includes(i.key)){if(x.value<0){i.key==="Backspace"&&!L.value&&(x.value=A-1);return}const b=x.value,d=h.value[x.value];d&&!d.props.disabled&&ne(d,!1),x.value=b>=A-1?A-2:b}if(i.key==="ArrowLeft"){if(x.value<0&&R>0)return;const b=x.value>-1?x.value-1:A-1;h.value[b]?x.value=b:(x.value=-1,g.value.setSelectionRange(L.value.length,L.value.length))}if(i.key==="ArrowRight"){if(x.value<0)return;const b=x.value+1;h.value[b]?x.value=b:(x.value=-1,g.value.setSelectionRange(0,0))}i.key==="Enter"&&L.value&&(ne(He(l,L.value)),L.value="")}}function Me(){var i;y.value&&(E.value=!0,(i=g.value)==null||i.focus())}function ne(i){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(l.multiple){const A=h.value.findIndex(b=>l.valueComparator(b.value,i.value)),m=R??!~A;if(~A){const b=m?[...h.value,i]:[...h.value];b.splice(A,1),h.value=b}else m&&(h.value=[...h.value,i]);l.clearOnSelect&&(L.value="")}else{const A=R!==!1;h.value=A?[i]:[],te.value=A?i.title:"",Pe(()=>{V.value=!1,E.value=!0})}}function Ce(i){y.value=!0,setTimeout(()=>{B.value=!0})}function he(i){B.value=!1}function Oe(i){(i==null||i===""&&!l.multiple)&&(h.value=[])}return ge(y,(i,R)=>{i||i===R||(x.value=-1,V.value=!1,ue.value&&!B.value&&!h.value.some(A=>{let{value:m}=A;return m===P.value[0].value})?ne(P.value[0]):l.multiple&&L.value&&ne(He(l,L.value)))}),ge(V,()=>{if(!l.hideSelected&&V.value&&h.value.length){const i=P.value.findIndex(R=>h.value.some(A=>l.valueComparator(A.value,R.value)));Xt&&window.requestAnimationFrame(()=>{var R;i>=0&&((R=U.value)==null||R.scrollToIndex(i))})}}),ge(P,(i,R)=>{y.value&&(!i.length&&l.hideNoData&&(V.value=!1),!R.length&&i.length&&(V.value=!0))}),mt(()=>{const i=!!(l.chips||o.chip),R=!!(!l.hideNoData||P.value.length||o["prepend-item"]||o["append-item"]||o["no-data"]),A=h.value.length>0,m=de.filterProps(l);return e(de,me({ref:g},m,{modelValue:L.value,"onUpdate:modelValue":[b=>L.value=b,Oe],focused:y.value,"onUpdate:focused":b=>y.value=b,validationValue:h.externalValue,counterValue:le.value,dirty:A,class:["v-combobox",{"v-combobox--active-menu":V.value,"v-combobox--chips":!!l.chips,"v-combobox--selection-slot":!!o.selection,"v-combobox--selecting-index":x.value>-1,[`v-combobox--${l.multiple?"multiple":"single"}`]:!0},l.class],style:l.style,readonly:l.readonly,placeholder:A?void 0:l.placeholder,"onClick:clear":T,"onMousedown:control":D,onKeydown:xe}),{...o,default:()=>e(q,null,[e(Se,me({ref:w,modelValue:V.value,"onUpdate:modelValue":b=>V.value=b,activator:"parent",contentClass:"v-combobox__content",disabled:S.value,eager:l.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:l.transition,onAfterLeave:Me},l.menuProps),{default:()=>[R&&e(Ve,me({ref:M,selected:ve.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:b=>b.preventDefault(),onKeydown:C,onFocusin:Ce,onFocusout:he,onScrollPassive:Y,tabindex:"-1","aria-live":"polite",color:l.itemColor??l.color},l.listProps),{default:()=>{var b,d,N;return[(b=o["prepend-item"])==null?void 0:b.call(o),!P.value.length&&!l.hideNoData&&(((d=o["no-data"])==null?void 0:d.call(o))??e(oe,{title:f(l.noDataText)},null)),e(Al,{ref:U,renderless:!0,items:P.value},{default:Ee=>{var gt;let{item:re,index:Ue,itemRef:Ie}=Ee;const pt=me(re.props,{ref:Ie,key:Ue,active:ue.value&&Ue===0?!0:void 0,onClick:()=>ne(re,null)});return((gt=o.item)==null?void 0:gt.call(o,{item:re,index:Ue,props:pt}))??e(oe,pt,{prepend:$e=>{let{isSelected:Ge}=$e;return e(q,null,[l.multiple&&!l.hideSelected?e(Vl,{key:re.value,modelValue:Ge,ripple:!1,tabindex:"-1"},null):void 0,re.props.prependAvatar&&e(Te,{image:re.props.prependAvatar},null),re.props.prependIcon&&e(_e,{icon:re.props.prependIcon},null)])},title:()=>{var $e,Ge;return E.value?re.title:Kl(re.title,($e=Z(re))==null?void 0:$e.title,((Ge=L.value)==null?void 0:Ge.length)??0)}})}}),(N=o["append-item"])==null?void 0:N.call(o)]}})]}),h.value.map((b,d)=>{function N(Ie){Ie.stopPropagation(),Ie.preventDefault(),ne(b,!1)}const Ee={"onClick:close":N,onMousedown(Ie){Ie.preventDefault(),Ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},re=i?!!o.chip:!!o.selection,Ue=re?Qt(i?o.chip({item:b,index:d,props:Ee}):o.selection({item:b,index:d})):void 0;if(!(re&&!Ue))return e("div",{key:b.value,class:["v-combobox__selection",d===x.value&&["v-combobox__selection--selected",ye.value]],style:d===x.value?fe.value:{}},[i?o.chip?e(Zt,{key:"chip-defaults",defaults:{VChip:{closable:l.closableChips,size:"small",text:b.title}}},{default:()=>[Ue]}):e(Ft,me({key:"chip",closable:l.closableChips,size:"small",text:b.title,disabled:b.props.disabled},Ee),null):Ue??e("span",{class:"v-combobox__selection-text"},[b.title,l.multiple&&d<h.value.length-1&&e("span",{class:"v-combobox__selection-comma"},[n(",")])])])})]),"append-inner":function(){var Ee;for(var b=arguments.length,d=new Array(b),N=0;N<b;N++)d[N]=arguments[N];return e(q,null,[(Ee=o["append-inner"])==null?void 0:Ee.call(o,...d),(!l.hideNoData||l.items.length)&&l.menuIcon?e(_e,{class:"v-combobox__menu-icon",icon:l.menuIcon,onMousedown:be,onClick:Jt,"aria-label":f(v.value),title:f(v.value)},null):void 0])}})}),Ut({isFocused:y,isPristine:E,menu:V,search:L,selectionIndex:x,filteredItems:I,select:ne},g)}});const $l=lt({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:l=>!isNaN(parseFloat(l))},maxRows:{type:[Number,String],validator:l=>!isNaN(parseFloat(l))},suffix:String,modelModifiers:Object,...tl(),...ll()},"VTextarea"),Pt=ct()({name:"VTextarea",directives:{Intersect:al},inheritAttrs:!1,props:$l(),emits:{"click:control":l=>!0,"mousedown:control":l=>!0,"update:focused":l=>!0,"update:modelValue":l=>!0},setup(l,c){let{attrs:u,emit:o,slots:f}=c;const g=rt(l,"modelValue"),{isFocused:y,focus:E,blur:B}=ol(l),w=O(()=>typeof l.counterValue=="function"?l.counterValue(g.value):(g.value||"").toString().length),U=O(()=>{if(u.maxlength)return u.maxlength;if(!(!l.counter||typeof l.counter!="number"&&typeof l.counter!="string"))return l.counter});function _(I,Z){var P,ve;!l.autofocus||!I||(ve=(P=Z[0].target)==null?void 0:P.focus)==null||ve.call(P)}const V=z(),x=z(),K=Be(""),j=z(),v=O(()=>l.persistentPlaceholder||y.value||l.active);function G(){var I;j.value!==document.activeElement&&((I=j.value)==null||I.focus()),y.value||E()}function ce(I){G(),o("click:control",I)}function ee(I){o("mousedown:control",I)}function ye(I){I.stopPropagation(),G(),Pe(()=>{g.value="",ml(l["onClick:clear"],I)})}function fe(I){var P;const Z=I.target;if(g.value=Z.value,(P=l.modelModifiers)!=null&&P.trim){const ve=[Z.selectionStart,Z.selectionEnd];Pe(()=>{Z.selectionStart=ve[0],Z.selectionEnd=ve[1]})}}const h=z(),Q=z(+l.rows),te=O(()=>["plain","underlined"].includes(l.variant));Vt(()=>{l.autoGrow||(Q.value=+l.rows)});function L(){l.autoGrow&&Pe(()=>{if(!h.value||!x.value)return;const I=getComputedStyle(h.value),Z=getComputedStyle(x.value.$el),P=parseFloat(I.getPropertyValue("--v-field-padding-top"))+parseFloat(I.getPropertyValue("--v-input-padding-top"))+parseFloat(I.getPropertyValue("--v-field-padding-bottom")),ve=h.value.scrollHeight,ue=parseFloat(I.lineHeight),S=Math.max(parseFloat(l.rows)*ue+P,parseFloat(Z.getPropertyValue("--v-input-control-height"))),M=parseFloat(l.maxRows)*ue+P||1/0,Y=vl(ve??0,S,M);Q.value=Math.floor((Y-P)/ue),K.value=fl(Y)})}It(L),ge(g,L),ge(()=>l.rows,L),ge(()=>l.maxRows,L),ge(()=>l.density,L);let le;return ge(h,I=>{I?(le=new ResizeObserver(L),le.observe(h.value)):le==null||le.disconnect()}),sl(()=>{le==null||le.disconnect()}),mt(()=>{const I=!!(f.counter||l.counter||l.counterValue),Z=!!(I||f.details),[P,ve]=ul(u),{modelValue:ue,...S}=yt.filterProps(l),M=nl(l);return e(yt,me({ref:V,modelValue:g.value,"onUpdate:modelValue":Y=>g.value=Y,class:["v-textarea v-text-field",{"v-textarea--prefixed":l.prefix,"v-textarea--suffixed":l.suffix,"v-text-field--prefixed":l.prefix,"v-text-field--suffixed":l.suffix,"v-textarea--auto-grow":l.autoGrow,"v-textarea--no-resize":l.noResize||l.autoGrow,"v-input--plain-underlined":te.value},l.class],style:l.style},P,S,{centerAffix:Q.value===1&&!te.value,focused:y.value}),{...f,default:Y=>{let{id:C,isDisabled:T,isDirty:D,isReadonly:be,isValid:xe}=Y;return e(rl,me({ref:x,style:{"--v-textarea-control-height":K.value},onClick:ce,onMousedown:ee,"onClick:clear":ye,"onClick:prependInner":l["onClick:prependInner"],"onClick:appendInner":l["onClick:appendInner"]},M,{id:C.value,active:v.value||D.value,centerAffix:Q.value===1&&!te.value,dirty:D.value||l.dirty,disabled:T.value,focused:y.value,error:xe.value===!1}),{...f,default:Me=>{let{props:{class:ne,...Ce}}=Me;return e(q,null,[l.prefix&&e("span",{class:"v-text-field__prefix"},[l.prefix]),bt(e("textarea",me({ref:j,class:ne,value:g.value,onInput:fe,autofocus:l.autofocus,readonly:be.value,disabled:T.value,placeholder:l.placeholder,rows:l.rows,name:l.name,onFocus:G,onBlur:B},Ce,ve),null),[[il("intersect"),{handler:_},null,{once:!0}]]),l.autoGrow&&bt(e("textarea",{class:[ne,"v-textarea__sizer"],id:`${Ce.id}-sizer`,"onUpdate:modelValue":he=>g.value=he,ref:h,readonly:!0,"aria-hidden":"true"},null),[[dl,g.value]]),l.suffix&&e("span",{class:"v-text-field__suffix"},[l.suffix])])}})},details:Z?Y=>{var C;return e(q,null,[(C=f.details)==null?void 0:C.call(f,Y),I&&e(q,null,[e("span",null,null),e(cl,{active:l.persistentCounter||y.value,value:w.value,max:U.value},f.counter)])])}:void 0})}),Ut({},V,x,j)}}),Gl=lt({..._l(),...El({variant:"text"})},"VToolbarItems"),Kt=ct()({name:"VToolbarItems",props:Gl(),setup(l,c){let{slots:u}=c;return pl({VBtn:{color:xt(l,"color"),height:"inherit",variant:xt(l,"variant")}}),mt(()=>{var o;return e("div",{class:["v-toolbar-items",l.class],style:l.style},[(o=u.default)==null?void 0:o.call(u)])}),{}}});function Hl(l){return{all:l=l||new Map,on:function(c,u){var o=l.get(c);o?o.push(u):l.set(c,[u])},off:function(c,u){var o=l.get(c);o&&(u?o.splice(o.indexOf(u)>>>0,1):l.set(c,[]))},emit:function(c,u){var o=l.get(c);o&&o.slice().map(function(f){f(u)}),(o=l.get("*"))&&o.slice().map(function(f){f(c,u)})}}}const Yl=Hl(),Dt=()=>Yl,vt={__name:"SettingsMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const c=at(),u=ft(),o=pe(),{apiAuth:f}=ot(),g=l,y=O(()=>g.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}}),E=async()=>{var B,w;try{await f.delete("/users/logout"),o.logout(),c({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),u.push("/")}catch(U){console.log(U);const _=((w=(B=U==null?void 0:U.response)==null?void 0:B.data)==null?void 0:w.message)||"發生錯誤，請稍後再試";c({text:_,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(B,w)=>(r(),X(q,null,[e(J,{style:F(y.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(y.value.listItem)},{default:t(()=>[n("貼文收藏")]),_:1},8,["style"]),e(J,{style:F(y.value.divider)},null,8,["style"]),e(oe,{style:F(y.value.listItem)},{default:t(()=>[n("喜歡的活動")]),_:1},8,["style"]),e(J,{style:F(y.value.divider)},null,8,["style"]),e(oe,{style:F(y.value.listItem)},{default:t(()=>[n("限動典藏")]),_:1},8,["style"]),e(J,{style:F(y.value.divider)},null,8,["style"]),a(o).IS_ADMIN?(r(),X(q,{key:0},[e(oe,{style:F([y.value.listItem,{cursor:"pointer"}]),to:"/admin"},{default:t(()=>[n("管理員後台")]),_:1},8,["style"]),e(J,{style:F(y.value.divider)},null,8,["style"])],64)):se("",!0),e(oe,{style:F([y.value.listItem,{cursor:"pointer"}]),onClick:E},{default:t(()=>[n("登出")]),_:1},8,["style"]),e(J,{style:F(y.value.dividerLast)},null,8,["style"])],64))}};const jl={__name:"AddEvent",props:{isBtn:{type:Boolean,default:!0,required:!1},isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const{apiAuth:c}=ot(),u=at(),o=pe(),{xs:f,sm:g}=Ne();O(()=>f.value),O(()=>g.value);const y=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣","基隆市","新竹市","嘉義市"],E=["公開","學生"],B=["音樂","合唱","管樂","吉他","熱音","熱舞","手語","康輔","桌遊","運動","棒球","桌球","籃球","羽球","排球","天文","文學","話劇","美術","攝影","校友會","學生會","系學會","營隊","學習"],w=l,U=O(()=>!!w.isBtn),_=O(()=>w.isMobile?{fontSize:"1.2rem"}:{fontSize:"1rem"}),V=z(!1);z("");const x=()=>{V.value=!1,P(),ee.value.deleteFileRecord()},K=z(!1),j=O(()=>S.value.value?new Date(S.value.value).toLocaleDateString().substring(0,10):""),v=new Date,G=z([]),ce=z([]),ee=z(null),ye=()=>{i.value.value=!0,R()},fe=z(""),h=z(""),Q=A=>{Oe.fields.value.splice(A,1),ke.fields.value.splice(A,1)},te=(A,m)=>{Oe.fields.value.push(m),ke.fields.value.push(A),h.value=""},L=async()=>{var A,m;try{const{data:b}=await c.get("/users/getUser",{params:{search:h.value,role:3}});fe.value=b.result.data}catch(b){console.log(b);const d=((m=(A=b==null?void 0:b.response)==null?void 0:A.data)==null?void 0:m.message)||"發生錯誤，請稍後再試";u({text:d,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},le=it({title:ie().required("「活動名稱」必填").min(3,"「活動名稱」長度不符").max(20,"「「活動名稱」長度不符"),date:ie().required("「活動日期」必填"),startTime:Le().typeError("必須是數字").required("「活動時間」必填"),endTime:Le().typeError("必須是數字").required("「活動時間」必填").max(2359,"「活動時間」長度不符"),city:ie().required("「活動縣市」必填").min(3,"「活動縣市」長度不符").max(3,"「「活動縣市」長度不符"),add:ie().required("「活動地址」必填").max(40,"「活動地址」長度不符"),addRemark:ie().max(30,"「地點備註」長度不符"),isPublic:ie().required("「誰可參加」必填").min(2,"「誰可參加」長度不符").max(2,"「誰可參加」長度不符"),category:Ye().of(ie()).max(5,"最多5個標籤").required("「活動分類」必填"),preSale:Le().typeError("必須是數字").max(9999,"「預售人數」長度不符").required("「預售人數」必填"),onSiteSale:Le().typeError("必須是數字").max(9999,"「現場票」長度不符").required("「現場票」必填"),scoreValues:Le().typeError("必須是數字").max(100,"「取票資格」長度不符").required("「取票資格」必填"),description:ie().required("「活動內容」必填").min(50,"「活動內容」長度不符").max(1e3,"「活動內容」長度不符"),coOrganizer:Ye().of(ie()).test("is-unique","協辦單位重複",function(A){return!A||!A.length?!0:new Set(A).size===A.length}),coOrganizerItem:Ye().of(ie()).test("is-unique","協辦單位重複",function(A){return!A||!A.length?!0:new Set(A).size===A.length}),isEdit:gl().required("「草稿」必填")}),{handleSubmit:I,isSubmitting:Z,resetForm:P,errors:ve}=kt({validationSchema:le,initialValues:{isEdit:!1}}),ue=W("title"),S=W("date"),M=W("startTime"),Y=W("endTime"),C=W("city"),T=W("add"),D=W("addRemark"),be=W("isPublic"),xe=W("category"),Me=W("preSale"),ne=W("onSiteSale"),Ce=W("scoreValues"),he=W("description"),Oe=dt("coOrganizer"),ke=dt("coOrganizerItem"),i=W("isEdit"),R=I(async A=>{var m,b,d;if(!((m=G.value[0])!=null&&m.error))try{console.log("values",A),console.log("category.value.value",xe.value.value);const N=new FormData,Ee=S.value.value?new Date(S.value.value).toLocaleDateString().substring(0,10):S.value.value,re=M.value.value+" "+Y.value.value;N.append("TITLE",ue.value.value),N.append("DATE",Ee+" "+re),N.append("CITY",C.value.value),N.append("ADD",T.value.value),N.append("IS_PUBLIC",be.value.value),N.append("CATEGORY",xe.value.value),N.append("PRE_SALE",Me.value.value),N.append("ON_SITE_SALE",ne.value.value),N.append("SCORE_VALUES",Ce.value.value),N.append("DESCRIPTION",he.value.value),N.append("HOST",o._id),N.append("IS_EDIT",i.value.value),N.append("IMAGE",G.value[0].file),Oe.fields.value.length>0&&N.append("CO_ORGANIZER",Oe.fields.value),D.value.value&&N.append("ADD_REMARK",D.value.value),await c.post("/events",N),u({text:"新增成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),x()}catch(N){console.log(N);const Ee=((d=(b=N==null?void 0:N.response)==null?void 0:b.data)==null?void 0:d.message)||"發生錯誤，請稍後再試";u({text:Ee,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return(A,m)=>{const b=Tt("VueFileAgent");return r(),p(We,{modelValue:V.value,"onUpdate:modelValue":m[21]||(m[21]=d=>V.value=d),fullscreen:"",transition:"dialog-bottom-transition"},{activator:t(({props:d})=>[U.value?(r(),p(H,me({key:0,type:"button"},d,{style:{"background-color":"#1BBCA9",height:"auto","padding-top":"3px","padding-bottom":"3px"}}),{default:t(()=>[e(_e,{style:{"margin-left":"-3px"}},{default:t(()=>[n("mdi-plus")]),_:1}),n("新增活動")]),_:2},1040)):(r(),p(oe,me({key:1},d,{style:_.value}),{default:t(()=>[n("建立活動")]),_:2},1040,["style"]))]),default:t(()=>[e(Ke,{class:"m-auto"},{default:t(()=>[e(Lt,{dark:"",color:"#333"},{default:t(()=>[e(H,{icon:"",dark:"",onClick:x},{default:t(()=>[e(_e,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:1}),e(wt,null,{default:t(()=>[n("新增活動")]),_:1}),e(qe),e(Kt)]),_:1}),e(Re,null,{default:t(()=>[e(Bt,{disabled:a(Z),onSubmit:Rt(a(R),["prevent"])},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(b,{modelValue:G.value,"onUpdate:modelValue":m[0]||(m[0]=d=>G.value=d),rawModelValue:ce.value,"onUpdate:rawModelValue":m[1]||(m[1]=d=>ce.value=d),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",color:"#25ECE0",ref_key:"fileAgent",ref:ee},null,8,["modelValue","rawModelValue"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(ue).value.value,"onUpdate:modelValue":m[2]||(m[2]=d=>a(ue).value.value=d),label:"活動名稱","error-messages":a(ue).errorMessage.value,minlength:"3",maxlength:"20",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Se,{modelValue:K.value,"onUpdate:modelValue":m[7]||(m[7]=d=>K.value=d),"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","min-width":"290px",class:"d-flex align-center justify-center"},{activator:t(({attrs:d})=>[e(de,me({"model-value":j.value,"error-messages":a(S).errorMessage.value,color:"#25ECE0",variant:"outlined",label:"活動日期","prepend-icon":"mdi-calendar",readonly:""},d,{onClick:m[3]||(m[3]=N=>K.value=!K.value)}),null,16,["model-value","error-messages"])]),default:t(()=>[e(Ul,{type:"date",color:"#25ECE0",modelValue:a(S).value.value,"onUpdate:modelValue":m[5]||(m[5]=d=>a(S).value.value=d),min:a(v),"no-time":"","no-title":"",onInput:m[6]||(m[6]=d=>K.value=!1)},{actions:t(()=>[e(H,{style:{"background-color":"#25ECE0",color:"rgb(0, 0, 0)","font-weight":"900"},onClick:m[4]||(m[4]=d=>K.value=!1)},{default:t(()=>[n("確定")]),_:1})]),_:1},8,["modelValue","min"])]),_:1},8,["modelValue"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(M).value.value,"onUpdate:modelValue":m[8]||(m[8]=d=>a(M).value.value=d),"error-messages":a(M).errorMessage.value,minlength:"4",maxlength:"4",counter:"",variant:"outlined",color:"#25ECE0",label:"開始時間(EX:1900)"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(Y).value.value,"onUpdate:modelValue":m[9]||(m[9]=d=>a(Y).value.value=d),"error-messages":a(Y).errorMessage.value,minlength:"4",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined",label:"結束時間(EX:2230)"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"5",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(je,{modelValue:a(C).value.value,"onUpdate:modelValue":m[10]||(m[10]=d=>a(C).value.value=d),"error-messages":a(C).errorMessage.value,items:y,label:"地址(縣市)",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"7",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(T).value.value,"onUpdate:modelValue":m[11]||(m[11]=d=>a(T).value.value=d),label:"活動地址","error-messages":a(T).errorMessage.value,maxlength:"40",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(D).value.value,"onUpdate:modelValue":m[12]||(m[12]=d=>a(D).value.value=d),label:"活動地點備註","error-messages":a(D).errorMessage.value,maxlength:"30",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(je,{modelValue:a(be).value.value,"onUpdate:modelValue":m[13]||(m[13]=d=>a(be).value.value=d),"error-messages":a(be).errorMessage.value,items:E,label:"誰可參加",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(je,{modelValue:a(xe).value.value,"onUpdate:modelValue":m[14]||(m[14]=d=>a(xe).value.value=d),"error-messages":a(xe).errorMessage.value,items:B,editable:"false",multiple:"",chips:"",label:"活動分類",variant:"outlined",color:"#25ECE0",class:"custom-chips"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(Me).value.value,"onUpdate:modelValue":m[15]||(m[15]=d=>a(Me).value.value=d),label:"預售票(張)",maxlength:"4","error-messages":a(Me).errorMessage.value,counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(ne).value.value,"onUpdate:modelValue":m[16]||(m[16]=d=>a(ne).value.value=d),"error-messages":a(ne).errorMessage.value,label:"現場票(張)",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(Ce).value.value,"onUpdate:modelValue":m[17]||(m[17]=d=>a(Ce).value.value=d),"error-messages":a(Ce).errorMessage.value,label:"取票資格(取票人榮譽分數門檻，0-100分)",maxlength:"3",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(zl,{modelValue:h.value,"onUpdate:modelValue":m[18]||(m[18]=d=>h.value=d),label:"協辦單位",counter:"",variant:"outlined",onInput:m[19]||(m[19]=d=>L()),id:"searchId","prepend-inner-icon":"mdi-account-search","deletable-chips":"",color:"#25ECE0"},null,8,["modelValue"]),e(Se,{activator:"#searchId"},{default:t(()=>[e(Ve,null,{default:t(()=>[fe.value?(r(!0),X(q,{key:0},De(fe.value,d=>(r(),p(oe,{key:d.USER_NAME,onClick:N=>te(d.USER_NAME,d._id)},{default:t(()=>[e($,{style:{margin:"5px"}},{default:t(()=>[e(s,{cols:"5",class:"justify-center align-center",style:{padding:"8px",height:"45px"}},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:d.IMAGE},null,8,["src"])]),_:2},1024)]),_:2},1024),e(s,{cols:"7",class:"justify-center align-center"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[n(k(d.USER_NAME),1)]),_:2},1024),e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[n(k(d.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(J)]),_:2},1032,["onClick"]))),128)):(r(),p(oe,{key:1},{default:t(()=>[e(Ot,null,{default:t(()=>[n("無搜尋結果")]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"22px"}},{default:t(()=>[e(Ke,{variant:"outlined",class:"d-flex align-center",style:{height:"56px"}},{default:t(()=>[e(yl,null,{default:t(()=>[n("協辦單位")]),_:1}),e(bl,null,{default:t(()=>[(r(!0),X(q,null,De(a(ke).fields.value,(d,N)=>(r(),p(Ft,{key:N,closable:"","onClick:close":Ee=>Q(N)},{default:t(()=>[n(k(d),1)]),_:2},1032,["onClick:close"]))),128))]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Pt,{modelValue:a(he).value.value,"onUpdate:modelValue":m[20]||(m[20]=d=>a(he).value.value=d),label:"活動內容","error-messages":a(he).errorMessage.value,minlength:"50",maxlength:"1000",rows:"6",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(H,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:x},{default:t(()=>[n(" 取消 ")]),_:1})]),_:1}),e(s,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(H,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#444",height:"60px","font-weight":"900"},onClick:ye},{default:t(()=>[n(" 儲存草稿 ")]),_:1})]),_:1}),e(s,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(H,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[n(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},zt=ze(jl,[["__scopeId","data-v-03be62f0"]]);const ql={__name:"AddMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const c=pe(),u=l,o=O(()=>u.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(f,g)=>(r(),X(q,null,[e(J,{style:F(o.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(o.value.listItem)},{default:t(()=>[n("建立動態")]),_:1},8,["style"]),e(J,{style:F(o.value.divider)},null,8,["style"]),e(oe,{style:F(o.value.listItem)},{default:t(()=>[n("建立限動")]),_:1},8,["style"]),e(J,{style:F(o.value.divider)},null,8,["style"]),a(c).ROLE===a(Ae).CLUB?(r(),X(q,{key:0},[e(zt,{isBtn:!1,style:F(o.value.listItem),"is-mobile":l.isMobile},null,8,["style","is-mobile"]),e(J,{style:F(o.value.dividerLast)},null,8,["style"])],64)):se("",!0)],64))}},_t=ze(ql,[["__scopeId","data-v-3e9fbb87"]]),Et={__name:"SettingsMenuOther",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const c=l,u=O(()=>c.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(o,f)=>(r(),X(q,null,[e(J,{style:F(u.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("檢舉")]),_:1},8,["style"]),e(J,{style:F(u.value.divider)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("分享檔案")]),_:1},8,["style"]),e(J,{style:F(u.value.dividerLast)},null,8,["style"])],64))}},Qe={__name:"FollowNumber",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){return(c,u)=>(r(),p(s,{cols:"12"},{default:t(()=>[l.routeUser.ROLE===a(Ae).CLUB?(r(),p($,{key:0},{default:t(()=>[e(s,{cols:"4",style:{"background-color":""}}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("貼文")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("活動")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("粉絲")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FOLLOW.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1})]),_:1})]),_:1})):(r(),p($,{key:1},{default:t(()=>[e(s,{cols:"8",style:{"background-color":""}}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("粉絲")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FOLLOW.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}))}};const Wl={__name:"EditClub",setup(l){var ue;const{apiAuth:c}=ot(),u=at(),o=pe(),{xs:f}=Ne();O(()=>f.value);const g=Dt(),y=z(!1),E=()=>{y.value=!1,ye({values:{realName:o.REAL_NAME,emailUB:o.EMAIL_UB,clubTh:o.CLUB_TH,clubCategory:o.CLUB_CATEGORY,clubCoreMember:w.value,describe:o.DESCRIBE}}),V.value.deleteFileRecord()},B=(S,M)=>{L.fields.value[M].value.USER=S},w=z([]);for(const S in o.CLUB_CORE_MEMBER)w.value.push({USER:((ue=o.CLUB_CORE_MEMBER[S].USER)==null?void 0:ue.USER_NAME)||"",ROLE:o.CLUB_CORE_MEMBER[S].ROLE});const U=z([]),_=z([]),V=z(null),x={items:["學術","學藝","音樂","康樂","服務","體育","康輔","聯誼","其他"]},K=z(""),j=async S=>{var M,Y;try{const{data:C}=await c.get("/users/getUser",{params:{search:L.fields.value[S].value.USER,role:1}});K.value=C.result.data}catch(C){console.log(C);const T=((Y=(M=C==null?void 0:C.response)==null?void 0:M.data)==null?void 0:Y.message)||"發生錯誤，請稍後再試";u({text:T,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},v=it({realName:ie().required("「姓名/社團名」必填").max(6,"「姓名/社團名」長度不符"),emailUB:ie().max(40,"「備用信箱」長度不符").test("isEmail","「備用信箱」格式錯誤",S=>S?Rl.isEmail(S):!0),clubTh:Le().required("「社團屆數」必填").typeError("「社團屆數」必須是數字"),clubCoreMember:Ye(it({USER:ie().required("「用戶名稱」必填"),ROLE:ie().required("「幹部職稱」必填").max(5,"「幹部職稱」長度不符").min(2,"「幹部職稱」長度不符")})).test("role","必須要有社長和副社長",S=>S.filter(M=>M.ROLE==="社長").length===1&&S.filter(M=>M.ROLE==="副社長").length===1).test("user","幹部不可重複",S=>{const M=S.map(Y=>Y.USER);return new Set(M).size===M.length}),clubCategory:ie().required("「社團類別」必填").min(2,"「社團類別」不符").max(2,"「社團類別」不符"),describe:ie().max(50,"「社團類別」不符")}),{handleSubmit:G,isSubmitting:ce,errors:ee,resetForm:ye}=kt({validationSchema:v,initialValues:{realName:o.REAL_NAME,emailUB:o.EMAIL_UB,clubTh:o.CLUB_TH,clubCategory:o.CLUB_CATEGORY,clubCoreMember:w.value,describe:o.DESCRIBE}}),fe=W("realName"),h=W("nickName"),Q=W("emailUB"),te=W("clubTh"),L=dt("clubCoreMember"),le=W("clubCategory"),I=W("describe"),Z=()=>{L.push({USER:"",ROLE:""})},P=S=>{L.remove(S)},ve=G(async S=>{var M,Y,C;if(!((M=U.value[0])!=null&&M.error))try{const T=new FormData;T.append("USER_NAME",o.USER_NAME),T.append("REAL_NAME",S.realName),T.append("NICK_NAME",h.value.value||S.realName),T.append("EMAIL_UB",S.emailUB),T.append("CLUB_TH",S.clubTh),T.append("CLUB_CATEGORY",S.clubCategory);for(const D in S.clubCoreMember)T.append(`CLUB_CORE_MEMBER[${D}][USER]`,S.clubCoreMember[D].USER),T.append(`CLUB_CORE_MEMBER[${D}][ROLE]`,S.clubCoreMember[D].ROLE);T.append("DESCRIBE",S.describe),U.value.length>0&&T.append("IMAGE",U.value[0].file),await c.patch("/users/edit",T),u({text:"編輯成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),g.emit("updateUser")}catch(T){const D=((C=(Y=T==null?void 0:T.response)==null?void 0:Y.data)==null?void 0:C.message)||"發生錯誤，請稍後再試";u({text:D,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return g.on("updateUserOk",async()=>{E()}),(S,M)=>{const Y=Tt("VueFileAgent");return r(),p(We,{modelValue:y.value,"onUpdate:modelValue":M[7]||(M[7]=C=>y.value=C),onKeydown:xl(E,["esc"])},{activator:t(({props:C})=>[e(H,me({color:"#444",style:{"font-weight":"900",width:"100%"},dark:""},C),{default:t(()=>[n("編輯社團檔案")]),_:2},1040)]),default:t(()=>[e(Ke,{style:{"border-radius":"15px","max-width":"400px",margin:"auto",width:"100%"}},{default:t(()=>[e(Lt,{dark:"",color:"#333"},{default:t(()=>[e(H,{icon:"",dark:"",onClick:E},{default:t(()=>[e(_e,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:1}),e(wt,null,{default:t(()=>[n("編輯檔案")]),_:1}),e(qe),e(Kt)]),_:1}),e(Re,null,{default:t(()=>[e(Bt,{disabled:a(ce),onSubmit:Rt(a(ve),["prevent"])},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(Y,{modelValue:U.value,"onUpdate:modelValue":M[0]||(M[0]=C=>U.value=C),rawModelValue:_.value,"onUpdate:rawModelValue":M[1]||(M[1]=C=>_.value=C),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",ref_key:"fileAgent",ref:V,color:"#25ECE0"},null,8,["modelValue","rawModelValue"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(fe).value.value,"onUpdate:modelValue":M[2]||(M[2]=C=>a(fe).value.value=C),label:"社團名稱","error-messages":a(fe).errorMessage.value,maxlength:"6",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(o).ROLE===3?(r(),p(de,{key:0,modelValue:a(te).value.value,"onUpdate:modelValue":M[3]||(M[3]=C=>a(te).value.value=C),"error-messages":a(te).errorMessage.value,maxlength:"3",counter:"",color:"#25ECE0",label:"社團屆數",variant:"outlined"},null,8,["modelValue","error-messages"])):se("",!0)]),_:1}),e(s,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(o).ROLE===3?(r(),p(je,{key:0,modelValue:a(le).value.value,"onUpdate:modelValue":M[4]||(M[4]=C=>a(le).value.value=C),":error-messages":a(le).errorMessage.value,items:x.items,label:"社團類別",color:"#25ECE0",variant:"outlined"},null,8,["modelValue",":error-messages","items"])):se("",!0)]),_:1}),e(s,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[e(Tl,{style:{color:"#FF8484"}},{default:t(()=>[n(k(a(ee).clubCoreMember),1)]),_:1})]),_:1}),(r(!0),X(q,null,De(a(L).fields.value,(C,T)=>(r(),p(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"},key:C.key},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"5"},{default:t(()=>[a(o).ROLE===3?(r(),p(de,{key:0,modelValue:C.value.ROLE,"onUpdate:modelValue":D=>C.value.ROLE=D,"error-messages":a(ee)[`clubCoreMember[${T}].ROLE`],label:"幹部職稱",variant:"outlined",color:"#25ECE0",density:"compact"},null,8,["modelValue","onUpdate:modelValue","error-messages"])):se("",!0)]),_:2},1024),e(s,{cols:"5"},{default:t(()=>[a(o).ROLE===3?(r(),p(de,{key:0,modelValue:C.value.USER,"onUpdate:modelValue":D=>C.value.USER=D,"error-messages":a(ee)[`clubCoreMember[${T}].USER`],label:"用戶名稱",variant:"outlined",density:"compact",color:"#25ECE0",onInput:D=>j(T),id:"clubCoreMember_user"+T},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","id"])):se("",!0),e(Se,{activator:"#clubCoreMember_user"+T},{default:t(()=>[e(Ve,null,{default:t(()=>[C.value.USER?(r(!0),X(q,{key:0},De(K.value,D=>(r(),p(oe,{key:D.USER_NAME,onClick:be=>B(D.USER_NAME,T)},{default:t(()=>[e($,{style:{margin:"5px"}},{default:t(()=>[e(s,{cols:"4",class:"justify-center align-center",style:{padding:"8px"}},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:D.IMAGE},null,8,["src"])]),_:2},1024)]),_:2},1024),e(s,{cols:"8",class:"justify-center align-center"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[n(k(D.USER_NAME),1)]),_:2},1024),e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[n(k(D.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(J)]),_:2},1032,["onClick"]))),128)):(r(),p(oe,{key:1},{default:t(()=>[e(Ot,null,{default:t(()=>[n("無搜尋結果")]),_:1})]),_:1}))]),_:2},1024)]),_:2},1032,["activator"])]),_:2},1024),e(s,{cols:"1",style:{"justify-content":"start","align-items":"center"}},{default:t(()=>[T===0?(r(),p(H,{key:0,icon:"mdi-plus",onClick:Z,style:{"font-size":"1.2rem",width:"auto",height:"auto"}})):(r(),p(H,{key:1,icon:"mdi-minus",onClick:D=>P(T),style:{"font-size":"1.2rem",width:"auto",height:"auto"}},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(s,{cols:"12",style:{"padding-top":"10px","padding-bottom":"0"}},{default:t(()=>[e(de,{modelValue:a(Q).value.value,"onUpdate:modelValue":M[5]||(M[5]=C=>a(Q).value.value=C),"error-messages":a(Q).errorMessage.value,maxlength:"40",counter:"",label:"備用信箱",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(Pt,{modelValue:a(I).value.value,"onUpdate:modelValue":M[6]||(M[6]=C=>a(I).value.value=C),"error-messages":a(I).errorMessage.value,maxlength:"50",counter:"",label:"社團簡介",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(H,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:E},{default:t(()=>[n(" 取消 ")]),_:1})]),_:1}),e(s,{cols:"8",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(H,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[n(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ze={__name:"StatusBtn",setup(l){const c=pe(),u=O(()=>Nt.ROLE===Ae.CLUB?"分享社團檔案":"分享個人檔案"),o=Fe("routeUser");return Fe("routeEvent"),(f,g)=>(r(),p(s,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(c).USER_NAME===a(o).USER_NAME?(r(),X(q,{key:0},[a(o).ROLE===a(Ae).CLUB?(r(),p(Wl,{key:0,routeUser:a(o)},null,8,["routeUser"])):(r(),p(H,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n("編輯個人檔案")]),_:1}))],64)):(r(),p(H,{key:1,color:"#1BBCA9",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n("追蹤")]),_:1}))]),_:1}),e(s,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(c).USER_NAME===a(o).USER_NAME?(r(),p(H,{key:0,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n(k(u.value),1)]),_:1})):(r(),p(H,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n("發送訊息")]),_:1}))]),_:1}),e(s,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[e(H,{color:"#FF9900",style:{color:"#fff","font-weight":"900",width:"100%"}},{default:t(()=>[n("榮譽分數 "+k(a(o).SCORES)+" 分",1)]),_:1})]),_:1})]),_:1})]),_:1}))}},Xl={class:"d-flex justify-space-around"},ht={__name:"EventMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){ft(),pe();const c=l,u=O(()=>c.isMobile?{dividerFirst:{marginTop:"5px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"5px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"0px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"0px"},listItem:{fontSize:"1rem"}});return(o,f)=>(r(),X("div",Xl,[e(Se,null,{activator:t(({props:g})=>[e(_e,me(g,{color:"#fff"}),{default:t(()=>[n("mdi-dots-vertical")]),_:2},1040)]),default:t(()=>[e(Ve,null,{default:t(()=>[e(J,{style:F(u.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("編輯")]),_:1},8,["style"]),e(J,{style:F(u.value.divider)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("分享")]),_:1},8,["style"]),e(J,{style:F(u.value.dividerLast)},null,8,["style"])]),_:1})]),_:1})]))}};const st=l=>(Cl("data-v-d41235ca"),l=l(),Sl(),l),Ql={class:"me-1"},Zl=st(()=>ae("span",{class:"me-1",style:{"font-size":"0.7rem"}},"月",-1)),Jl={class:"me-1"},ea=st(()=>ae("span",{class:"me-1",style:{"font-size":"0.7rem"}},"日",-1)),ta={key:1,style:{"font-size":"1.3rem",color:"#ccc"}},la=st(()=>ae("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動參加紀錄",-1)),aa=st(()=>ae("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動參加紀錄",-1)),oa={__name:"PostEvent",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const c=pe(),u=z(""),{xs:o}=Ne(),f=O(()=>o.value),g=O(()=>u.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),y=O(()=>u.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),E=O(()=>u.value==="three"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;");return(B,w)=>l.routeUser.ROLE===a(Ae).CLUB?(r(),X(q,{key:0},[e(s,{cols:"12"},{default:t(()=>[e(kl,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=U=>u.value=U),"align-tabs":"start"},{default:t(()=>[e(ut,{value:"one",class:"rounded-ts-xl me-2",style:F([{"min-width":"80px"},g.value])},{default:t(()=>[n("動態")]),_:1},8,["style"]),e(ut,{value:"two",class:"rounded-ts-xl me-2",style:F([{"min-width":"80px"},y.value])},{default:t(()=>[n("主辦活動")]),_:1},8,["style"]),e(ut,{value:"three",class:"rounded-ts-xl",style:F([{"min-width":"80px"},E.value])},{default:t(()=>[n("活動紀錄")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(J,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(Bl,{modelValue:u.value,"onUpdate:modelValue":w[1]||(w[1]=U=>u.value=U),style:{width:"100%"}},{default:t(()=>[e(Mt,{value:"two"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[n(k(new Date().getFullYear()),1)]),_:1}),l.routeUser.MAKE_EVENTS_ID.length!==0?(r(!0),X(q,{key:0},De(l.routeEvent,U=>(r(),X(q,{key:U._id},[e(s,{cols:"3",style:{background:"rgba(6, 50, 107,0)","padding-right":"0"}},{default:t(()=>[ae("span",Ql,k(U.dateParts.month),1),Zl,ae("span",Jl,k(U.dateParts.day),1),ea]),_:2},1024),e(s,{cols:"7",onClick:_=>B.$router.push(`/event/${U._id}`),style:{cursor:"pointer"},class:"title"},{default:t(()=>[n(k(U.TITLE),1)]),_:2},1032,["onClick"]),e(s,{cols:"1",class:"d-flex justify-center"},{default:t(()=>[e(_e,{style:{},color:"#fff "},{default:t(()=>[n("mdi-camera")]),_:1})]),_:1}),e(s,{cols:"1",class:"d-flex justify-center",style:{cursor:"pointer"}},{default:t(()=>[f.value?(r(),p(ht,{key:0,isMobile:""})):(r(),p(ht,{key:1}))]),_:1})],64))),128)):(r(),p(s,{key:1,cols:"12"},{default:t(()=>[l.routeUser.USER_NAME===a(c).USER_NAME?(r(),p(zt,{key:0})):(r(),X("div",ta,"目前無活動"))]),_:1}))]),_:1})]),_:1})]),_:1}),e(Mt,{value:"three"},{default:t(()=>[e(s,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[n(k(new Date().getFullYear()),1)]),_:1}),e(s,{cols:"12"},{default:t(()=>[la]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):(r(),X(q,{key:1},[e(s,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[n(k(new Date().getFullYear()),1)]),_:1}),e(s,{cols:"12"},{default:t(()=>[aa]),_:1})],64))}},Je=ze(oa,[["__scopeId","data-v-d41235ca"]]),sa=ae("div",{class:"mt-3",style:{color:"#ccc"}},"新增",-1),et={__name:"TimePost",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){const c=pe(),{xs:u}=Ne(),o=O(()=>u.value),f=O(()=>o.value?3:2);return(g,y)=>l.routeUser.USER_NAME===a(c).USER_NAME||l.routeUser.MAKE_EVENT.length!==0?(r(),p(s,{key:0,cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:f.value,class:"text-center"},{default:t(()=>[e(H,{icon:"",size:"large",text:"",color:"rgba(0,0,0,0)"},{default:t(()=>[e(_e,{style:{"font-size":"3.8rem",border:"1px solid #ccc","border-radius":"50%"},color:"#ccc "},{default:t(()=>[n("mdi-plus")]),_:1})]),_:1}),sa]),_:1},8,["cols"])]),_:1})]),_:1})):se("",!0)}},ua={style:{border:"1px solid #25ECE0",padding:"3px 10px",color:"#FF6868"}},na={style:{"margin-right":"10px","font-weight":"900",color:"#25ECE0"}},tt={__name:"SchoolName",props:{isNClubComputer:{type:Boolean,default:!1,required:!1},routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){const c=l,u=O(()=>c.isNClubComputer?{"padding-top":"0rem"}:{"padding-top":"0.6rem"});return(o,f)=>(r(),p(s,{cols:"12",style:F([{"font-size":"0.9rem"},u.value])},{default:t(()=>[ae("span",ua,[ae("span",na,k(l.routeUser.SCHOOL_NAME),1),ae("span",null,k(l.routeUser.SCHOOL_CITY),1)])]),_:1},8,["style"]))}},ra={class:"me-3"},ia={class:"me-3",style:{"font-size":"1.05rem"}},da={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},ca={class:"me-3"},ma={class:"me-3",style:{"font-size":"1.05rem"}},fa={__name:"PersonalClub",emits:["updateUser"],setup(l,{emit:c}){const u=pe(),{xs:o}=Ne(),f=O(()=>o.value),g=c,y=()=>{g("updateUser")},E=Fe("routeUser"),B=Fe("routeEvent");return(w,U)=>f.value?(r(),p(Re,{key:0},{default:t(()=>[e($,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(s,{cols:"4",class:"d-flex justify-center",style:{"padding-top":"1.2rem"}},{default:t(()=>[e(Te,{size:"100%",style:{"margin-top":""}},{default:t(()=>[e(we,{src:a(E).IMAGE},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[ae("span",ra,k(a(E).NICK_NAME),1),ae("span",ia,"第"+k(a(E).CLUB_TH)+"屆",1),ae("span",null,[e(H,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[n("成員")]),_:1})])]),_:1}),e(tt,{routeUser:a(E)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(E).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(E)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{routeUser:a(E)},null,8,["routeUser"]),a(E).MAKE_EVENT.length!==0?(r(),p(Xe,{key:0})):se("",!0),e(et,{routeUser:a(E)},null,8,["routeUser"]),e(Je,{routeUser:a(E),routeEvent:a(B)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",da,[e(Re,{style:{"max-width":"800px"}},{default:t(()=>[e($,{class:"box",style:{"background-color":""}},{default:t(()=>[e(s,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",class:"d-flex justify-center"},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:a(E).IMAGE},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[n(k(a(E).USER_NAME),1)]),_:1}),e(s,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0","padding-top":"0.5rem"}},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[ae("span",ca,k(a(E).NICK_NAME),1),ae("span",ma,"第"+k(a(E).CLUB_TH)+"屆",1),ae("span",null,[e(H,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[n("成員")]),_:1})])]),_:1}),e(s,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(E).USER_NAME===a(u).USER_NAME?(r(),p(_e,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[n("mdi-plus-box-outline")]),_:1})):se("",!0),a(E).USER_NAME===a(u).USER_NAME?(r(),p(Se,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[e(_t)]),_:1})]),_:1})):se("",!0),e(_e,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[n("mdi-menu")]),_:1}),e(Se,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[a(E).USER_NAME===a(u).USER_NAME?(r(),p(vt,{key:0})):(r(),p(Et,{key:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(tt,{routeUser:a(E)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(E).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(E)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{onUpdateUser:y,routeUser:a(E)},null,8,["routeUser"]),a(E).MAKE_EVENT.length!==0?(r(),p(Xe,{key:0})):se("",!0),e(et,{routeUser:a(E)},null,8,["routeUser"]),e(Je,{routeUser:a(E),routeEvent:a(B)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const va={__name:"ClubMember",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const c=z(0),u=()=>{c.value++},o=l,f=O(()=>c.value%2===0?"幹部":o.routeUser.IS_CORE_MEMBER[0].NICK_NAME+"  "+o.routeUser.IS_CORE_MEMBER[0].CLUB_TH+"th "+o.routeUser.IS_CORE_MEMBER[0].ROLE);return(g,y)=>(r(),X(q,null,[l.routeUser.ROLE===a(Ae).STUDENT?(r(),p(s,{key:0,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[l.routeUser.IS_CORE_MEMBER?(r(),p(H,{key:0,type:"button",style:{"background-color":"#FF9900",height:"auto","padding-top":"3px","padding-bottom":"3px"},onClick:u},{default:t(()=>[n(k(f.value),1)]),_:1})):(r(),p(H,{key:1,type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[n("無社團")]),_:1}))]),_:1})):se("",!0),l.routeUser.ROLE===a(Ae).NOT_STUDENT?(r(),p(s,{key:1,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[e(H,{type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[n("畢業生")]),_:1})]),_:1})):se("",!0)],64))}},At=ze(va,[["__scopeId","data-v-80d3ee6b"]]),_a={class:"me-3"},Ea={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},pa={class:"me-3"},ga={__name:"NPersonalClub",setup(l){const c=pe(),{xs:u}=Ne(),o=O(()=>u.value),f=Fe("routeUser"),g=Fe("routeEvent");return(y,E)=>o.value?(r(),p(Re,{key:0},{default:t(()=>[e($,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(s,{cols:"4",class:"d-flex justify-center",style:{"padding-top":"1.2rem"}},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:a(f).IMAGE},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[ae("span",_a,k(a(f).NICK_NAME),1)]),_:1}),e(tt,{routeUser:a(f)},null,8,["routeUser"]),e(At,{routeUser:a(f)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(f).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(f)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{routeUser:a(f)},null,8,["routeUser"]),e(et,{routeUser:a(f)},null,8,["routeUser"]),e(Xe),e(Je,{routeUser:a(f),routeEvent:a(g)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",Ea,[e(Re,{style:{"max-width":"800px"}},{default:t(()=>[e($,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(s,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",class:"d-flex justify-center"},{default:t(()=>[e(Te,{size:"100%",style:{"margin-top":"0"}},{default:t(()=>[e(we,{src:a(f).IMAGE},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[n(k(a(f).USER_NAME),1)]),_:1}),e(s,{cols:"8",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[ae("span",pa,k(a(f).NICK_NAME),1)]),_:1}),e(s,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(f).USER_NAME===a(c).USER_NAME?(r(),p(_e,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[n("mdi-plus-box-outline")]),_:1})):se("",!0),a(f).USER_NAME===a(c).USER_NAME?(r(),p(Se,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[e(_t)]),_:1})]),_:1})):se("",!0),e(_e,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[n("mdi-menu")]),_:1}),e(Se,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[a(f).USER_NAME===a(c).USER_NAME?(r(),p(vt,{key:0})):(r(),p(Et,{key:1}))]),_:1})]),_:1})]),_:1}),e(tt,{isNClubComputer:"",routeUser:a(f)},null,8,["routeUser"]),e(At,{routeUser:a(f)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(f).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(f)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{routeUser:a(f)},null,8,["routeUser"]),e(et,{routeUser:a(f)},null,8,["routeUser"]),e(Xe),e(Je,{routeUser:a(f),routeEvent:a(g)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const ya={__name:"PersonalView",setup(l){const{apiAuth:c}=ot(),u=pe(),o=ft(),f=Nt(),g=at(),y=Dt(),{xs:E}=Ne(),B=O(()=>E.value),w=()=>{o.go(-1)};y.on("updateUser",async()=>{await u.getProfile(),await V(),y.emit("updateUserOk")});const U=z([]),_=z({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]});Ct("routeUser",_),Ct("routeEvent",U);const V=async()=>{var K,j;try{const{data:v}=await c.get("/users/"+f.params.USER_NAME);_.value.EMAIL=v.result.EMAIL,_.value.ROLE=v.result.ROLE,_.value.SCHOOL_NAME=v.result.SCHOOL_NAME,_.value.SCHOOL_CITY=v.result.SCHOOL_CITY,_.value.USER_NAME=v.result.USER_NAME,_.value.NICK_NAME=v.result.NICK_NAME,_.value.CLUB_TH=v.result.CLUB_TH,_.value.CLUB_CATEGORY=v.result.CLUB_CATEGORY,_.value.IMAGE=v.result.IMAGE,_.value.TICKET_CART=v.result.TICKET_CART,_.value.SCORES=v.result.SCORES,_.value.NOTIFY=v.result.NOTIFY,_.value.KEEP_POST=v.result.KEEP_POST,_.value.KEEP_EVENT=v.result.KEEP_EVENT,_.value.FANS=v.result.FANS,_.value.FOLLOW=v.result.FOLLOW,_.value.IS_STUDENT=v.result.IS_STUDENT,_.value.IS_ABLE=v.result.IS_ABLE,_.value.IS_ADMIN=v.result.IS_ADMIN,_.value.DESCRIBE=v.result.DESCRIBE,_.value.MAKE_EVENT=v.result.MAKE_EVENT,_.value.MAKE_POST=v.result.MAKE_POST,_.value.MAKE_TIME_POST=v.result.MAKE_TIME_POST,_.value.GO_EVENT=v.result.GO_EVENT,_.value.BE_MARK=v.result.BE_MARK,_.value.IS_CORE_MEMBER=v.result.IS_CORE_MEMBER,_.value.MAKE_EVENTS_ID=v.result.MAKE_EVENTS_ID,document.title=`學生社團 | ${_.value.NICK_NAME}（${_.value.USER_NAME}）`,await x()}catch(v){console.log(v);const G=((j=(K=v==null?void 0:v.response)==null?void 0:K.data)==null?void 0:j.message)||"發生錯誤，請稍後再試";g({text:G,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}}),o.push("/")}},x=async()=>{var K,j;try{const v=_.value.MAKE_EVENTS_ID.map(ce=>c.get("/events/"+ce)),G=await Promise.all(v);U.value=G.map(ce=>{const ee=ce.data.result,[ye,fe,h]=ee.DATE.split(" "),[Q,te,L]=ye.split("/"),[le,I]=[fe.slice(0,2),fe.slice(2)],[Z,P]=[h.slice(0,2),h.slice(2)];return ee.dateParts={year:Q,month:te.padStart(2,"0"),day:L.padStart(2,"0"),hourStart:le.padStart(2,"0"),minuteStart:I.padStart(2,"0"),hourEnd:Z.padStart(2,"0"),minuteEnd:P.padStart(2,"0")},ee})}catch(v){console.log(v);const G=((j=(K=v==null?void 0:v.response)==null?void 0:K.data)==null?void 0:j.message)||"發生錯誤，請稍後再試";g({text:G,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return It(async()=>{await V()}),(K,j)=>(r(),X(q,null,[B.value?(r(),p(Nl,{key:0},{default:t(()=>[e(Re,{class:"d-flex align-center",style:{}},{default:t(()=>[_.value.USER_NAME!==a(u).USER_NAME?(r(),p(H,{key:0,icon:"mdi-chevron-left",style:{"font-size":"1.4rem"},onClick:w})):se("",!0),e(Ol,{class:"text-h5 ms-5"},{default:t(()=>[n(k(_.value.USER_NAME),1)]),_:1}),_.value.USER_NAME===a(u).USER_NAME?(r(),p(We,{key:1,"max-width":"400px"},{activator:t(({props:v})=>[e(H,me(v,{icon:"mdi-plus-box-outline",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:v})=>[e(Ke,{style:{"border-radius":"15px"}},{default:t(()=>[e(St,{class:"text-center"},{default:t(()=>[e(_t,{"is-mobile":""})]),_:1}),e(qe),e(H,{text:"Close Dialog",flat:!0,onClick:G=>v.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(_e,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})):se("",!0),e(We,{"max-width":"400px"},{activator:t(({props:v})=>[e(H,me(v,{icon:"mdi-menu",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:v})=>[e(Ke,{style:{"border-radius":"15px"},class:"text-center"},{default:t(()=>[e(St,null,{default:t(()=>[_.value.USER_NAME===a(u).USER_NAME?(r(),p(vt,{key:0,"is-mobile":""})):(r(),p(Et,{key:1,"is-mobile":""}))]),_:1}),e(qe),e(H,{text:"Close Dialog",flat:!0,onClick:G=>v.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(_e,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1})]),_:1})):se("",!0),_.value.ROLE!==a(Ae).CLUB?(r(),p(ga,{key:1,routeUser:_.value,routeEvent:U.value},null,8,["routeUser","routeEvent"])):(r(),p(fa,{key:2,routeUser:_.value,routeEvent:U.value},null,8,["routeUser","routeEvent"]))],64))}},La=ze(ya,[["__scopeId","data-v-ed13017d"]]);export{La as default};
