import{p as lt,B as K,o as O,L as a,aq as Ut,ar as nt,as as $t,at as Gt,au as Ht,av as Yt,h as ct,aw as jt,ax as Be,ay as rt,az as qt,aA as Wt,a2 as ge,aB as Pe,aC as Xt,s as mt,_ as ie,v as e,J as j,$ as ce,a3 as Te,M as ve,aD as Qt,aE as Zt,G as n,aF as Jt,aG as At,aH as el,aI as tl,aJ as ll,aK as al,aL as ol,a6 as It,aM as sl,aN as ul,aO as yt,aP as nl,aQ as rl,ad as bt,ai as il,aR as dl,aS as cl,aT as ml,w as fl,aU as vl,a as _l,aV as El,r as pl,t as xt,R as at,y as ft,x as pe,D as r,H as X,O as F,F as t,K as se,Z as ot,A as Ne,T as it,W as re,U as Le,aW as Ye,aX as gl,C as Tt,E as p,P as H,a8 as De,ap as qe,N as Rt,I as Ke,a4 as we,Q as k,aY as yl,a7 as bl,al as We,aZ as xl,z as Nt,a9 as Fe,Y as ae,a0 as Cl,a1 as Sl,a5 as Ct,am as St}from"./index-55945f57.js";import{m as Ml,u as hl,b as Vl,c as Ul,a as Al,V as je,U as Ve}from"./VDatePicker-acd5b21c.js";import{V as J}from"./VDivider-7d9b1768.js";import{u as Il,t as He,a as Ue,V as oe,b as Ot,c as Tl}from"./VList-2d7bd3ee.js";import{u as kt,a as W,b as dt,V as Bt,v as Rl}from"./index-067146a7.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";import{b as Lt,c as wt,V as Nl,a as Ol}from"./VAppBarTitle-9a3e962c.js";import{V as Re}from"./VContainer-8bbe5f5a.js";import{V as z,a as s}from"./VRow-c1fb15ad.js";import{V as Ce}from"./VMenu-a033557d.js";import{b as Ft,a as Mt,V as kl}from"./VWindowItem-53b49013.js";import{V as Bl,a as ut}from"./VTabs-bcdbc3b8.js";import{P as Xe}from"./PersonalLine-cdc21d09.js";import"./ssrBoot-ab6ba0d9.js";const Ll=(l,c,u)=>l==null||c==null?-1:l.toString().toLocaleLowerCase().indexOf(c.toString().toLocaleLowerCase()),wl=lt({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Fl(l,c,u){var E;const o=[],f=(u==null?void 0:u.default)??Ll,y=u!=null&&u.filterKeys?nt(u.filterKeys):!1,b=Object.keys((u==null?void 0:u.customKeyFilter)??{}).length;if(!(l!=null&&l.length))return o;e:for(let B=0;B<l.length;B++){const[w,U=w]=nt(l[B]),_={},A={};let S=-1;if(c&&!(u!=null&&u.noFilter)){if(typeof w=="object"){const v=y||Object.keys(U);for(const $ of v){const de=$t(U,$,U),ee=(E=u==null?void 0:u.customKeyFilter)==null?void 0:E[$];if(S=ee?ee(de,c,w):f(de,c,w),S!==-1&&S!==!1)ee?_[$]=S:A[$]=S;else if((u==null?void 0:u.filterMode)==="every")continue e}}else S=f(w,c,w),S!==-1&&S!==!1&&(A.title=S);const D=Object.keys(A).length,Y=Object.keys(_).length;if(!D&&!Y||(u==null?void 0:u.filterMode)==="union"&&Y!==b&&!D||(u==null?void 0:u.filterMode)==="intersection"&&(Y!==b||!D))continue}o.push({index:B,matches:{...A,..._}})}return o}function Pl(l,c,u,o){const f=K([]),y=K(new Map),b=O(()=>o!=null&&o.transform?a(c).map(B=>[B,o.transform(B)]):a(c));Ut(()=>{const B=typeof u=="function"?u():a(u),w=typeof B!="string"&&typeof B!="number"?"":String(B),U=Fl(b.value,w,{customKeyFilter:{...l.customKeyFilter,...a(o==null?void 0:o.customKeyFilter)},default:l.customFilter,filterKeys:l.filterKeys,filterMode:l.filterMode,noFilter:l.noFilter}),_=a(c),A=[],S=new Map;U.forEach(D=>{let{index:Y,matches:v}=D;const $=_[Y];A.push($),S.set($.value,v)}),f.value=A,y.value=S});function E(B){return y.value.get(B.value)}return{filteredItems:f,filteredMatches:y,getMatches:E}}function Dl(l,c,u){if(c==null)return l;if(Array.isArray(c))throw new Error("Multiple matches is not implemented");return typeof c=="number"&&~c?e(j,null,[e("span",{class:"v-combobox__unmask"},[l.substr(0,c)]),e("span",{class:"v-combobox__mask"},[l.substr(c,u)]),e("span",{class:"v-combobox__unmask"},[l.substr(c+u)])]):l}const Kl=lt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...wl({filterKeys:["title"]}),...Ml({hideNoData:!0,returnObject:!0}),...Gt(Ht({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Yt({transition:!1})},"VCombobox"),zl=ct()({name:"VCombobox",props:Kl(),emits:{"update:focused":l=>!0,"update:modelValue":l=>!0,"update:search":l=>!0,"update:menu":l=>!0},setup(l,c){var ke;let{emit:u,slots:o}=c;const{t:f}=jt(),y=K(),b=Be(!1),E=Be(!0),B=Be(!1),w=K(),U=K(),_=rt(l,"menu"),A=O({get:()=>_.value,set:i=>{var R;_.value&&!i&&((R=w.value)!=null&&R.ΨopenChildren)||(_.value=i)}}),S=Be(-1);let D=!1;const Y=O(()=>{var i;return(i=y.value)==null?void 0:i.color}),v=O(()=>A.value?l.closeText:l.openText),{items:$,transformIn:de,transformOut:ee}=Il(l),{textColorClasses:ye,textColorStyles:me}=qt(Y),M=rt(l,"modelValue",[],i=>de(nt(i)),i=>{const R=ee(i);return l.multiple?R:R[0]??null}),Q=Wt(),te=Be(l.multiple?"":((ke=M.value[0])==null?void 0:ke.title)??""),L=O({get:()=>te.value,set:i=>{var R;if(te.value=i??"",l.multiple||(M.value=[He(l,i)]),i&&l.multiple&&((R=l.delimiters)!=null&&R.length)){const V=i.split(new RegExp(`(?:${l.delimiters.join("|")})+`));V.length>1&&(V.forEach(m=>{m=m.trim(),m&&ue(He(l,m))}),te.value="")}i||(S.value=-1),E.value=!i}}),le=O(()=>typeof l.counterValue=="function"?l.counterValue(M.value):typeof l.counterValue=="number"?l.counterValue:l.multiple?M.value.length:L.value.length);ge(te,i=>{D?Pe(()=>D=!1):b.value&&!A.value&&(A.value=!0),u("update:search",i)}),ge(M,i=>{var R;l.multiple||(te.value=((R=i[0])==null?void 0:R.title)??"")});const{filteredItems:T,getMatches:Z}=Pl(l,$,()=>E.value?"":L.value),P=O(()=>l.hideSelected?T.value.filter(i=>!M.value.some(R=>R.value===i.value)):T.value),fe=O(()=>M.value.map(i=>i.value)),h=O(()=>{var R;return(l.autoSelectFirst===!0||l.autoSelectFirst==="exact"&&L.value===((R=P.value[0])==null?void 0:R.title))&&P.value.length>0&&!E.value&&!B.value}),x=O(()=>l.hideNoData&&!P.value.length||l.readonly||(Q==null?void 0:Q.isReadonly.value)),q=K(),{onListScroll:g,onListKeydown:I}=hl(q,y);function G(i){D=!0,l.openOnClear&&(A.value=!0)}function Ee(){x.value||(A.value=!0)}function Se(i){x.value||(b.value&&(i.preventDefault(),i.stopPropagation()),A.value=!A.value)}function be(i){var m;if(el(i)||l.readonly||Q!=null&&Q.isReadonly.value)return;const R=y.value.selectionStart,V=M.value.length;if((S.value>-1||["Enter","ArrowDown","ArrowUp"].includes(i.key))&&i.preventDefault(),["Enter","ArrowDown"].includes(i.key)&&(A.value=!0),["Escape"].includes(i.key)&&(A.value=!1),["Enter","Escape","Tab"].includes(i.key)&&(h.value&&["Enter","Tab"].includes(i.key)&&ue(T.value[0]),E.value=!0),i.key==="ArrowDown"&&h.value&&((m=q.value)==null||m.focus("next")),!!l.multiple){if(["Backspace","Delete"].includes(i.key)){if(S.value<0){i.key==="Backspace"&&!L.value&&(S.value=V-1);return}const C=S.value,d=M.value[S.value];d&&!d.props.disabled&&ue(d,!1),S.value=C>=V-1?V-2:C}if(i.key==="ArrowLeft"){if(S.value<0&&R>0)return;const C=S.value>-1?S.value-1:V-1;M.value[C]?S.value=C:(S.value=-1,y.value.setSelectionRange(L.value.length,L.value.length))}if(i.key==="ArrowRight"){if(S.value<0)return;const C=S.value+1;M.value[C]?S.value=C:(S.value=-1,y.value.setSelectionRange(0,0))}i.key==="Enter"&&L.value&&(ue(He(l,L.value)),L.value="")}}function Me(){var i;b.value&&(E.value=!0,(i=y.value)==null||i.focus())}function ue(i){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(l.multiple){const V=M.value.findIndex(C=>l.valueComparator(C.value,i.value)),m=R??!~V;if(~V){const C=m?[...M.value,i]:[...M.value];C.splice(V,1),M.value=C}else m&&(M.value=[...M.value,i]);l.clearOnSelect&&(L.value="")}else{const V=R!==!1;M.value=V?[i]:[],te.value=V?i.title:"",Pe(()=>{A.value=!1,E.value=!0})}}function xe(i){b.value=!0,setTimeout(()=>{B.value=!0})}function he(i){B.value=!1}function Oe(i){(i==null||i===""&&!l.multiple)&&(M.value=[])}return ge(b,(i,R)=>{i||i===R||(S.value=-1,A.value=!1,h.value&&!B.value&&!M.value.some(V=>{let{value:m}=V;return m===P.value[0].value})?ue(P.value[0]):l.multiple&&L.value&&ue(He(l,L.value)))}),ge(A,()=>{if(!l.hideSelected&&A.value&&M.value.length){const i=P.value.findIndex(R=>M.value.some(V=>l.valueComparator(V.value,R.value)));Xt&&window.requestAnimationFrame(()=>{var R;i>=0&&((R=U.value)==null||R.scrollToIndex(i))})}}),ge(P,(i,R)=>{b.value&&(!i.length&&l.hideNoData&&(A.value=!1),!R.length&&i.length&&(A.value=!0))}),mt(()=>{const i=!!(l.chips||o.chip),R=!!(!l.hideNoData||P.value.length||o["prepend-item"]||o["append-item"]||o["no-data"]),V=M.value.length>0,m=ie.filterProps(l);return e(ie,ce({ref:y},m,{modelValue:L.value,"onUpdate:modelValue":[C=>L.value=C,Oe],focused:b.value,"onUpdate:focused":C=>b.value=C,validationValue:M.externalValue,counterValue:le.value,dirty:V,class:["v-combobox",{"v-combobox--active-menu":A.value,"v-combobox--chips":!!l.chips,"v-combobox--selection-slot":!!o.selection,"v-combobox--selecting-index":S.value>-1,[`v-combobox--${l.multiple?"multiple":"single"}`]:!0},l.class],style:l.style,readonly:l.readonly,placeholder:V?void 0:l.placeholder,"onClick:clear":G,"onMousedown:control":Ee,onKeydown:be}),{...o,default:()=>e(j,null,[e(Ce,ce({ref:w,modelValue:A.value,"onUpdate:modelValue":C=>A.value=C,activator:"parent",contentClass:"v-combobox__content",disabled:x.value,eager:l.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:l.transition,onAfterLeave:Me},l.menuProps),{default:()=>[R&&e(Ue,ce({ref:q,selected:fe.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:C=>C.preventDefault(),onKeydown:I,onFocusin:xe,onFocusout:he,onScrollPassive:g,tabindex:"-1","aria-live":"polite",color:l.itemColor??l.color},l.listProps),{default:()=>{var C,d,N;return[(C=o["prepend-item"])==null?void 0:C.call(o),!P.value.length&&!l.hideNoData&&(((d=o["no-data"])==null?void 0:d.call(o))??e(oe,{title:f(l.noDataText)},null)),e(Vl,{ref:U,renderless:!0,items:P.value},{default:_e=>{var gt;let{item:ne,index:Ae,itemRef:Ie}=_e;const pt=ce(ne.props,{ref:Ie,key:Ae,active:h.value&&Ae===0?!0:void 0,onClick:()=>ue(ne,null)});return((gt=o.item)==null?void 0:gt.call(o,{item:ne,index:Ae,props:pt}))??e(oe,pt,{prepend:$e=>{let{isSelected:Ge}=$e;return e(j,null,[l.multiple&&!l.hideSelected?e(Ul,{key:ne.value,modelValue:Ge,ripple:!1,tabindex:"-1"},null):void 0,ne.props.prependAvatar&&e(Te,{image:ne.props.prependAvatar},null),ne.props.prependIcon&&e(ve,{icon:ne.props.prependIcon},null)])},title:()=>{var $e,Ge;return E.value?ne.title:Dl(ne.title,($e=Z(ne))==null?void 0:$e.title,((Ge=L.value)==null?void 0:Ge.length)??0)}})}}),(N=o["append-item"])==null?void 0:N.call(o)]}})]}),M.value.map((C,d)=>{function N(Ie){Ie.stopPropagation(),Ie.preventDefault(),ue(C,!1)}const _e={"onClick:close":N,onMousedown(Ie){Ie.preventDefault(),Ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ne=i?!!o.chip:!!o.selection,Ae=ne?Qt(i?o.chip({item:C,index:d,props:_e}):o.selection({item:C,index:d})):void 0;if(!(ne&&!Ae))return e("div",{key:C.value,class:["v-combobox__selection",d===S.value&&["v-combobox__selection--selected",ye.value]],style:d===S.value?me.value:{}},[i?o.chip?e(Zt,{key:"chip-defaults",defaults:{VChip:{closable:l.closableChips,size:"small",text:C.title}}},{default:()=>[Ae]}):e(Ft,ce({key:"chip",closable:l.closableChips,size:"small",text:C.title,disabled:C.props.disabled},_e),null):Ae??e("span",{class:"v-combobox__selection-text"},[C.title,l.multiple&&d<M.value.length-1&&e("span",{class:"v-combobox__selection-comma"},[n(",")])])])})]),"append-inner":function(){var _e;for(var C=arguments.length,d=new Array(C),N=0;N<C;N++)d[N]=arguments[N];return e(j,null,[(_e=o["append-inner"])==null?void 0:_e.call(o,...d),(!l.hideNoData||l.items.length)&&l.menuIcon?e(ve,{class:"v-combobox__menu-icon",icon:l.menuIcon,onMousedown:Se,onClick:Jt,"aria-label":f(v.value),title:f(v.value)},null):void 0])}})}),At({isFocused:b,isPristine:E,menu:A,search:L,selectionIndex:S,filteredItems:T,select:ue},y)}});const $l=lt({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:l=>!isNaN(parseFloat(l))},maxRows:{type:[Number,String],validator:l=>!isNaN(parseFloat(l))},suffix:String,modelModifiers:Object,...tl(),...ll()},"VTextarea"),Pt=ct()({name:"VTextarea",directives:{Intersect:al},inheritAttrs:!1,props:$l(),emits:{"click:control":l=>!0,"mousedown:control":l=>!0,"update:focused":l=>!0,"update:modelValue":l=>!0},setup(l,c){let{attrs:u,emit:o,slots:f}=c;const y=rt(l,"modelValue"),{isFocused:b,focus:E,blur:B}=ol(l),w=O(()=>typeof l.counterValue=="function"?l.counterValue(y.value):(y.value||"").toString().length),U=O(()=>{if(u.maxlength)return u.maxlength;if(!(!l.counter||typeof l.counter!="number"&&typeof l.counter!="string"))return l.counter});function _(T,Z){var P,fe;!l.autofocus||!T||(fe=(P=Z[0].target)==null?void 0:P.focus)==null||fe.call(P)}const A=K(),S=K(),D=Be(""),Y=K(),v=O(()=>l.persistentPlaceholder||b.value||l.active);function $(){var T;Y.value!==document.activeElement&&((T=Y.value)==null||T.focus()),b.value||E()}function de(T){$(),o("click:control",T)}function ee(T){o("mousedown:control",T)}function ye(T){T.stopPropagation(),$(),Pe(()=>{y.value="",ml(l["onClick:clear"],T)})}function me(T){var P;const Z=T.target;if(y.value=Z.value,(P=l.modelModifiers)!=null&&P.trim){const fe=[Z.selectionStart,Z.selectionEnd];Pe(()=>{Z.selectionStart=fe[0],Z.selectionEnd=fe[1]})}}const M=K(),Q=K(+l.rows),te=O(()=>["plain","underlined"].includes(l.variant));Ut(()=>{l.autoGrow||(Q.value=+l.rows)});function L(){l.autoGrow&&Pe(()=>{if(!M.value||!S.value)return;const T=getComputedStyle(M.value),Z=getComputedStyle(S.value.$el),P=parseFloat(T.getPropertyValue("--v-field-padding-top"))+parseFloat(T.getPropertyValue("--v-input-padding-top"))+parseFloat(T.getPropertyValue("--v-field-padding-bottom")),fe=M.value.scrollHeight,h=parseFloat(T.lineHeight),x=Math.max(parseFloat(l.rows)*h+P,parseFloat(Z.getPropertyValue("--v-input-control-height"))),q=parseFloat(l.maxRows)*h+P||1/0,g=vl(fe??0,x,q);Q.value=Math.floor((g-P)/h),D.value=fl(g)})}It(L),ge(y,L),ge(()=>l.rows,L),ge(()=>l.maxRows,L),ge(()=>l.density,L);let le;return ge(M,T=>{T?(le=new ResizeObserver(L),le.observe(M.value)):le==null||le.disconnect()}),sl(()=>{le==null||le.disconnect()}),mt(()=>{const T=!!(f.counter||l.counter||l.counterValue),Z=!!(T||f.details),[P,fe]=ul(u),{modelValue:h,...x}=yt.filterProps(l),q=nl(l);return e(yt,ce({ref:A,modelValue:y.value,"onUpdate:modelValue":g=>y.value=g,class:["v-textarea v-text-field",{"v-textarea--prefixed":l.prefix,"v-textarea--suffixed":l.suffix,"v-text-field--prefixed":l.prefix,"v-text-field--suffixed":l.suffix,"v-textarea--auto-grow":l.autoGrow,"v-textarea--no-resize":l.noResize||l.autoGrow,"v-input--plain-underlined":te.value},l.class],style:l.style},P,x,{centerAffix:Q.value===1&&!te.value,focused:b.value}),{...f,default:g=>{let{id:I,isDisabled:G,isDirty:Ee,isReadonly:Se,isValid:be}=g;return e(rl,ce({ref:S,style:{"--v-textarea-control-height":D.value},onClick:de,onMousedown:ee,"onClick:clear":ye,"onClick:prependInner":l["onClick:prependInner"],"onClick:appendInner":l["onClick:appendInner"]},q,{id:I.value,active:v.value||Ee.value,centerAffix:Q.value===1&&!te.value,dirty:Ee.value||l.dirty,disabled:G.value,focused:b.value,error:be.value===!1}),{...f,default:Me=>{let{props:{class:ue,...xe}}=Me;return e(j,null,[l.prefix&&e("span",{class:"v-text-field__prefix"},[l.prefix]),bt(e("textarea",ce({ref:Y,class:ue,value:y.value,onInput:me,autofocus:l.autofocus,readonly:Se.value,disabled:G.value,placeholder:l.placeholder,rows:l.rows,name:l.name,onFocus:$,onBlur:B},xe,fe),null),[[il("intersect"),{handler:_},null,{once:!0}]]),l.autoGrow&&bt(e("textarea",{class:[ue,"v-textarea__sizer"],id:`${xe.id}-sizer`,"onUpdate:modelValue":he=>y.value=he,ref:M,readonly:!0,"aria-hidden":"true"},null),[[dl,y.value]]),l.suffix&&e("span",{class:"v-text-field__suffix"},[l.suffix])])}})},details:Z?g=>{var I;return e(j,null,[(I=f.details)==null?void 0:I.call(f,g),T&&e(j,null,[e("span",null,null),e(cl,{active:l.persistentCounter||b.value,value:w.value,max:U.value},f.counter)])])}:void 0})}),At({},A,S,Y)}}),Gl=lt({..._l(),...El({variant:"text"})},"VToolbarItems"),Dt=ct()({name:"VToolbarItems",props:Gl(),setup(l,c){let{slots:u}=c;return pl({VBtn:{color:xt(l,"color"),height:"inherit",variant:xt(l,"variant")}}),mt(()=>{var o;return e("div",{class:["v-toolbar-items",l.class],style:l.style},[(o=u.default)==null?void 0:o.call(u)])}),{}}}),vt={__name:"SettingsMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const c=at(),u=ft(),o=pe(),{apiAuth:f}=ot(),y=l,b=O(()=>y.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}}),E=async()=>{var B,w;try{await f.delete("/users/logout"),o.logout(),c({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),u.push("/")}catch(U){console.log(U);const _=((w=(B=U==null?void 0:U.response)==null?void 0:B.data)==null?void 0:w.message)||"發生錯誤，請稍後再試";c({text:_,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(B,w)=>(r(),X(j,null,[e(J,{style:F(b.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(b.value.listItem)},{default:t(()=>[n("貼文收藏")]),_:1},8,["style"]),e(J,{style:F(b.value.divider)},null,8,["style"]),e(oe,{style:F(b.value.listItem)},{default:t(()=>[n("喜歡的活動")]),_:1},8,["style"]),e(J,{style:F(b.value.divider)},null,8,["style"]),e(oe,{style:F(b.value.listItem)},{default:t(()=>[n("限動典藏")]),_:1},8,["style"]),e(J,{style:F(b.value.divider)},null,8,["style"]),a(o).IS_ADMIN?(r(),X(j,{key:0},[e(oe,{style:F([b.value.listItem,{cursor:"pointer"}]),to:"/admin"},{default:t(()=>[n("管理員後台")]),_:1},8,["style"]),e(J,{style:F(b.value.divider)},null,8,["style"])],64)):se("",!0),e(oe,{style:F([b.value.listItem,{cursor:"pointer"}]),onClick:E},{default:t(()=>[n("登出")]),_:1},8,["style"]),e(J,{style:F(b.value.dividerLast)},null,8,["style"])],64))}};const Hl={__name:"AddEvent",props:{isBtn:{type:Boolean,default:!0,required:!1},isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const{apiAuth:c}=ot(),u=at(),o=pe(),{xs:f,sm:y}=Ne();O(()=>f.value),O(()=>y.value);const b=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣","基隆市","新竹市","嘉義市"],E=["公開","學生"],B=["音樂","合唱","管樂","吉他","熱音","熱舞","手語","康輔","桌遊","運動","棒球","桌球","籃球","羽球","排球","天文","文學","話劇","美術","攝影","校友會","學生會","系學會","營隊","學習"],w=l,U=O(()=>!!w.isBtn),_=O(()=>w.isMobile?{fontSize:"1.2rem"}:{fontSize:"1rem"}),A=K(!1);K("");const S=()=>{A.value=!1,P(),ee.value.deleteFileRecord()},D=K(!1),Y=O(()=>x.value.value?new Date(x.value.value).toLocaleDateString().substring(0,10):""),v=new Date,$=K([]),de=K([]),ee=K(null),ye=()=>{i.value.value=!0,R()},me=K(""),M=K(""),Q=V=>{Oe.fields.value.splice(V,1),ke.fields.value.splice(V,1)},te=(V,m)=>{Oe.fields.value.push(m),ke.fields.value.push(V),M.value=""},L=async()=>{var V,m;try{const{data:C}=await c.get("/users/getUser",{params:{search:M.value,role:3}});me.value=C.result.data}catch(C){console.log(C);const d=((m=(V=C==null?void 0:C.response)==null?void 0:V.data)==null?void 0:m.message)||"發生錯誤，請稍後再試";u({text:d,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},le=it({title:re().required("「活動名稱」必填").min(3,"「活動名稱」長度不符").max(20,"「「活動名稱」長度不符"),date:re().required("「活動日期」必填"),startTime:Le().typeError("必須是數字").required("「活動時間」必填"),endTime:Le().typeError("必須是數字").required("「活動時間」必填").max(2359,"「活動時間」長度不符"),city:re().required("「活動縣市」必填").min(3,"「活動縣市」長度不符").max(3,"「「活動縣市」長度不符"),add:re().required("「活動地址」必填").max(40,"「活動地址」長度不符"),addRemark:re().max(30,"「地點備註」長度不符"),isPublic:re().required("「誰可參加」必填").min(2,"「誰可參加」長度不符").max(2,"「誰可參加」長度不符"),category:Ye().of(re()).max(5,"最多5個標籤").required("「活動分類」必填"),preSale:Le().typeError("必須是數字").max(9999,"「預售人數」長度不符").required("「預售人數」必填"),onSiteSale:Le().typeError("必須是數字").max(9999,"「現場票」長度不符").required("「現場票」必填"),scoreValues:Le().typeError("必須是數字").max(100,"「取票資格」長度不符").required("「取票資格」必填"),description:re().required("「活動內容」必填").min(50,"「活動內容」長度不符").max(1e3,"「活動內容」長度不符"),coOrganizer:Ye().of(re()).test("is-unique","協辦單位重複",function(V){return!V||!V.length?!0:new Set(V).size===V.length}),coOrganizerItem:Ye().of(re()).test("is-unique","協辦單位重複",function(V){return!V||!V.length?!0:new Set(V).size===V.length}),isEdit:gl().required("「草稿」必填")}),{handleSubmit:T,isSubmitting:Z,resetForm:P,errors:fe}=kt({validationSchema:le,initialValues:{isEdit:!1}}),h=W("title"),x=W("date"),q=W("startTime"),g=W("endTime"),I=W("city"),G=W("add"),Ee=W("addRemark"),Se=W("isPublic"),be=W("category"),Me=W("preSale"),ue=W("onSiteSale"),xe=W("scoreValues"),he=W("description"),Oe=dt("coOrganizer"),ke=dt("coOrganizerItem"),i=W("isEdit"),R=T(async V=>{var m,C,d;if(!((m=$.value[0])!=null&&m.error))try{console.log("values",V),console.log("category.value.value",be.value.value);const N=new FormData,_e=x.value.value?new Date(x.value.value).toLocaleDateString().substring(0,10):x.value.value,ne=q.value.value+" "+g.value.value;N.append("TITLE",h.value.value),N.append("DATE",_e+" "+ne),N.append("CITY",I.value.value),N.append("ADD",G.value.value),N.append("IS_PUBLIC",Se.value.value),N.append("CATEGORY",be.value.value),N.append("PRE_SALE",Me.value.value),N.append("ON_SITE_SALE",ue.value.value),N.append("SCORE_VALUES",xe.value.value),N.append("DESCRIPTION",he.value.value),N.append("HOST",o._id),N.append("IS_EDIT",i.value.value),N.append("IMAGE",$.value[0].file),Oe.fields.value.length>0&&N.append("CO_ORGANIZER",Oe.fields.value),Ee.value.value&&N.append("ADD_REMARK",Ee.value.value),await c.post("/events",N),u({text:"新增成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),S()}catch(N){console.log(N);const _e=((d=(C=N==null?void 0:N.response)==null?void 0:C.data)==null?void 0:d.message)||"發生錯誤，請稍後再試";u({text:_e,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return(V,m)=>{const C=Tt("VueFileAgent");return r(),p(We,{modelValue:A.value,"onUpdate:modelValue":m[21]||(m[21]=d=>A.value=d),fullscreen:"",transition:"dialog-bottom-transition"},{activator:t(({props:d})=>[U.value?(r(),p(H,ce({key:0,type:"button"},d,{style:{"background-color":"#1BBCA9",height:"auto","padding-top":"3px","padding-bottom":"3px"}}),{default:t(()=>[e(ve,{style:{"margin-left":"-3px"}},{default:t(()=>[n("mdi-plus")]),_:1}),n("新增活動")]),_:2},1040)):(r(),p(oe,ce({key:1},d,{style:_.value}),{default:t(()=>[n("建立活動")]),_:2},1040,["style"]))]),default:t(()=>[e(De,{class:"m-auto"},{default:t(()=>[e(Lt,{dark:"",color:"#333"},{default:t(()=>[e(H,{icon:"",dark:"",onClick:S},{default:t(()=>[e(ve,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:1}),e(wt,null,{default:t(()=>[n("新增活動")]),_:1}),e(qe),e(Dt)]),_:1}),e(Re,null,{default:t(()=>[e(Bt,{disabled:a(Z),onSubmit:Rt(a(R),["prevent"])},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(C,{modelValue:$.value,"onUpdate:modelValue":m[0]||(m[0]=d=>$.value=d),rawModelValue:de.value,"onUpdate:rawModelValue":m[1]||(m[1]=d=>de.value=d),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",color:"#25ECE0",ref_key:"fileAgent",ref:ee},null,8,["modelValue","rawModelValue"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(h).value.value,"onUpdate:modelValue":m[2]||(m[2]=d=>a(h).value.value=d),label:"活動名稱","error-messages":a(h).errorMessage.value,minlength:"3",maxlength:"20",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Ce,{modelValue:D.value,"onUpdate:modelValue":m[7]||(m[7]=d=>D.value=d),"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","min-width":"290px",class:"d-flex align-center justify-center"},{activator:t(({attrs:d})=>[e(ie,ce({"model-value":Y.value,"error-messages":a(x).errorMessage.value,color:"#25ECE0",variant:"outlined",label:"活動日期","prepend-icon":"mdi-calendar",readonly:""},d,{onClick:m[3]||(m[3]=N=>D.value=!D.value)}),null,16,["model-value","error-messages"])]),default:t(()=>[e(Al,{type:"date",color:"#25ECE0",modelValue:a(x).value.value,"onUpdate:modelValue":m[5]||(m[5]=d=>a(x).value.value=d),min:a(v),"no-time":"","no-title":"",onInput:m[6]||(m[6]=d=>D.value=!1)},{actions:t(()=>[e(H,{style:{"background-color":"#25ECE0",color:"rgb(0, 0, 0)","font-weight":"900"},onClick:m[4]||(m[4]=d=>D.value=!1)},{default:t(()=>[n("確定")]),_:1})]),_:1},8,["modelValue","min"])]),_:1},8,["modelValue"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(q).value.value,"onUpdate:modelValue":m[8]||(m[8]=d=>a(q).value.value=d),"error-messages":a(q).errorMessage.value,minlength:"4",maxlength:"4",counter:"",variant:"outlined",color:"#25ECE0",label:"開始時間(EX:1900)"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(g).value.value,"onUpdate:modelValue":m[9]||(m[9]=d=>a(g).value.value=d),"error-messages":a(g).errorMessage.value,minlength:"4",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined",label:"結束時間(EX:2230)"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"5",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(je,{modelValue:a(I).value.value,"onUpdate:modelValue":m[10]||(m[10]=d=>a(I).value.value=d),"error-messages":a(I).errorMessage.value,items:b,label:"地址(縣市)",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"7",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(G).value.value,"onUpdate:modelValue":m[11]||(m[11]=d=>a(G).value.value=d),label:"活動地址","error-messages":a(G).errorMessage.value,maxlength:"40",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(Ee).value.value,"onUpdate:modelValue":m[12]||(m[12]=d=>a(Ee).value.value=d),label:"活動地點備註","error-messages":a(Ee).errorMessage.value,maxlength:"30",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(je,{modelValue:a(Se).value.value,"onUpdate:modelValue":m[13]||(m[13]=d=>a(Se).value.value=d),"error-messages":a(Se).errorMessage.value,items:E,label:"誰可參加",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(je,{modelValue:a(be).value.value,"onUpdate:modelValue":m[14]||(m[14]=d=>a(be).value.value=d),"error-messages":a(be).errorMessage.value,items:B,editable:"false",multiple:"",chips:"",label:"活動分類",variant:"outlined",color:"#25ECE0",class:"custom-chips"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(Me).value.value,"onUpdate:modelValue":m[15]||(m[15]=d=>a(Me).value.value=d),label:"預售票(張)",maxlength:"4","error-messages":a(Me).errorMessage.value,counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(ue).value.value,"onUpdate:modelValue":m[16]||(m[16]=d=>a(ue).value.value=d),"error-messages":a(ue).errorMessage.value,label:"現場票(張)",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(xe).value.value,"onUpdate:modelValue":m[17]||(m[17]=d=>a(xe).value.value=d),"error-messages":a(xe).errorMessage.value,label:"取票資格(取票人榮譽分數門檻，0-100分)",maxlength:"3",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(zl,{modelValue:M.value,"onUpdate:modelValue":m[18]||(m[18]=d=>M.value=d),label:"協辦單位",counter:"",variant:"outlined",onInput:m[19]||(m[19]=d=>L()),id:"searchId","prepend-inner-icon":"mdi-account-search","deletable-chips":"",color:"#25ECE0"},null,8,["modelValue"]),e(Ce,{activator:"#searchId"},{default:t(()=>[e(Ue,null,{default:t(()=>[me.value?(r(!0),X(j,{key:0},Ke(me.value,d=>(r(),p(oe,{key:d.USER_NAME,onClick:N=>te(d.USER_NAME,d._id)},{default:t(()=>[e(z,{style:{margin:"5px"}},{default:t(()=>[e(s,{cols:"5",class:"justify-center align-center",style:{padding:"8px",height:"45px"}},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:d.IMAGE},null,8,["src"])]),_:2},1024)]),_:2},1024),e(s,{cols:"7",class:"justify-center align-center"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[n(k(d.USER_NAME),1)]),_:2},1024),e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[n(k(d.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(J)]),_:2},1032,["onClick"]))),128)):(r(),p(oe,{key:1},{default:t(()=>[e(Ot,null,{default:t(()=>[n("無搜尋結果")]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"22px"}},{default:t(()=>[e(De,{variant:"outlined",class:"d-flex align-center",style:{height:"56px"}},{default:t(()=>[e(yl,null,{default:t(()=>[n("協辦單位")]),_:1}),e(bl,null,{default:t(()=>[(r(!0),X(j,null,Ke(a(ke).fields.value,(d,N)=>(r(),p(Ft,{key:N,closable:"","onClick:close":_e=>Q(N)},{default:t(()=>[n(k(d),1)]),_:2},1032,["onClick:close"]))),128))]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Pt,{modelValue:a(he).value.value,"onUpdate:modelValue":m[20]||(m[20]=d=>a(he).value.value=d),label:"活動內容","error-messages":a(he).errorMessage.value,minlength:"50",maxlength:"1000",rows:"6",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(H,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:S},{default:t(()=>[n(" 取消 ")]),_:1})]),_:1}),e(s,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(H,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#444",height:"60px","font-weight":"900"},onClick:ye},{default:t(()=>[n(" 儲存草稿 ")]),_:1})]),_:1}),e(s,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(H,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[n(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Kt=ze(Hl,[["__scopeId","data-v-03be62f0"]]);const Yl={__name:"AddMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const c=pe(),u=l,o=O(()=>u.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(f,y)=>(r(),X(j,null,[e(J,{style:F(o.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(o.value.listItem)},{default:t(()=>[n("建立動態")]),_:1},8,["style"]),e(J,{style:F(o.value.divider)},null,8,["style"]),e(oe,{style:F(o.value.listItem)},{default:t(()=>[n("建立限動")]),_:1},8,["style"]),e(J,{style:F(o.value.divider)},null,8,["style"]),a(c).ROLE===a(Ve).CLUB?(r(),X(j,{key:0},[e(Kt,{isBtn:!1,style:F(o.value.listItem),"is-mobile":l.isMobile},null,8,["style","is-mobile"]),e(J,{style:F(o.value.dividerLast)},null,8,["style"])],64)):se("",!0)],64))}},_t=ze(Yl,[["__scopeId","data-v-3e9fbb87"]]),Et={__name:"SettingsMenuOther",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const c=l,u=O(()=>c.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(o,f)=>(r(),X(j,null,[e(J,{style:F(u.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("檢舉")]),_:1},8,["style"]),e(J,{style:F(u.value.divider)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("分享檔案")]),_:1},8,["style"]),e(J,{style:F(u.value.dividerLast)},null,8,["style"])],64))}},Qe={__name:"FollowNumber",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],EVENTS_ID:[]})}},setup(l){return(c,u)=>(r(),p(s,{cols:"12"},{default:t(()=>[l.routeUser.ROLE===a(Ve).CLUB?(r(),p(z,{key:0},{default:t(()=>[e(s,{cols:"4",style:{"background-color":""}}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("貼文")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("活動")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("粉絲")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{}},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FOLLOW.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1})]),_:1})]),_:1})):(r(),p(z,{key:1},{default:t(()=>[e(s,{cols:"8",style:{"background-color":""}}),e(s,{cols:"2",style:{background:""}},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FANS.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("粉絲")]),_:1})]),_:1})]),_:1}),e(s,{cols:"2",style:{}},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n(k(l.routeUser.FOLLOW.length),1)]),_:1}),e(s,{cols:"12",style:{padding:"0"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}))}};function jl(l){return{all:l=l||new Map,on:function(c,u){var o=l.get(c);o?o.push(u):l.set(c,[u])},off:function(c,u){var o=l.get(c);o&&(u?o.splice(o.indexOf(u)>>>0,1):l.set(c,[]))},emit:function(c,u){var o=l.get(c);o&&o.slice().map(function(f){f(u)}),(o=l.get("*"))&&o.slice().map(function(f){f(c,u)})}}}const ql=jl(),zt=()=>ql;const Wl={__name:"EditClub",setup(l){const{apiAuth:c}=ot(),u=at(),o=pe(),{xs:f}=Ne();O(()=>f.value);const y=zt(),b=K(!1),E=()=>{b.value=!1,ye({values:{realName:o.REAL_NAME,emailUB:o.EMAIL_UB,clubTh:o.CLUB_TH,clubCategory:o.CLUB_CATEGORY,clubCoreMember:w.value,describe:o.DESCRIBE}}),A.value.deleteFileRecord()},B=(h,x)=>{L.fields.value[x].value.USER=h},w=K([]);for(const h in o.CLUB_CORE_MEMBER)w.value.push({USER:o.CLUB_CORE_MEMBER[h].USER.USER_NAME,ROLE:o.CLUB_CORE_MEMBER[h].ROLE});const U=K([]),_=K([]),A=K(null),S={items:["學術","學藝","音樂","康樂","服務","體育","康輔","聯誼","其他"]},D=K(""),Y=async h=>{var x,q;try{const{data:g}=await c.get("/users/getUser",{params:{search:L.fields.value[h].value.USER,role:1}});D.value=g.result.data}catch(g){console.log(g);const I=((q=(x=g==null?void 0:g.response)==null?void 0:x.data)==null?void 0:q.message)||"發生錯誤，請稍後再試";u({text:I,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},v=it({realName:re().required("「姓名/社團名」必填").max(6,"「姓名/社團名」長度不符"),emailUB:re().max(40,"「備用信箱」長度不符").test("isEmail","「備用信箱」格式錯誤",h=>h?Rl.isEmail(h):!0),clubTh:Le().required("「社團屆數」必填").typeError("「社團屆數」必須是數字"),clubCoreMember:Ye(it({USER:re().required("「用戶名稱」必填"),ROLE:re().required("「幹部職稱」必填").max(5,"「幹部職稱」長度不符").min(2,"「幹部職稱」長度不符")})).test("role","必須要有社長和副社長",h=>h.filter(x=>x.ROLE==="社長").length===1&&h.filter(x=>x.ROLE==="副社長").length===1).test("user","幹部不可重複",h=>{const x=h.map(q=>q.USER);return new Set(x).size===x.length}),clubCategory:re().required("「社團類別」必填").min(2,"「社團類別」不符").max(2,"「社團類別」不符"),describe:re().max(50,"「社團類別」不符")}),{handleSubmit:$,isSubmitting:de,errors:ee,resetForm:ye}=kt({validationSchema:v,initialValues:{realName:o.REAL_NAME,emailUB:o.EMAIL_UB,clubTh:o.CLUB_TH,clubCategory:o.CLUB_CATEGORY,clubCoreMember:w.value,describe:o.DESCRIBE}}),me=W("realName"),M=W("nickName"),Q=W("emailUB"),te=W("clubTh"),L=dt("clubCoreMember"),le=W("clubCategory"),T=W("describe"),Z=()=>{L.push({USER:"",ROLE:""})},P=h=>{L.remove(h)},fe=$(async h=>{var x,q,g;if(!((x=U.value[0])!=null&&x.error))try{const I=new FormData;I.append("USER_NAME",o.USER_NAME),I.append("REAL_NAME",h.realName),I.append("NICK_NAME",M.value.value||h.realName),I.append("EMAIL_UB",h.emailUB),I.append("CLUB_TH",h.clubTh),I.append("CLUB_CATEGORY",h.clubCategory);for(const G in h.clubCoreMember)I.append(`CLUB_CORE_MEMBER[${G}][USER]`,h.clubCoreMember[G].USER),I.append(`CLUB_CORE_MEMBER[${G}][ROLE]`,h.clubCoreMember[G].ROLE);I.append("DESCRIBE",h.describe),U.value.length>0&&I.append("IMAGE",U.value[0].file),await c.patch("/users/edit",I),u({text:"編輯成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),y.emit("updateUser")}catch(I){const G=((g=(q=I==null?void 0:I.response)==null?void 0:q.data)==null?void 0:g.message)||"發生錯誤，請稍後再試";u({text:G,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return y.on("updateUserOk",async()=>{E()}),(h,x)=>{const q=Tt("VueFileAgent");return r(),p(We,{modelValue:b.value,"onUpdate:modelValue":x[7]||(x[7]=g=>b.value=g),onKeydown:xl(E,["esc"])},{activator:t(({props:g})=>[e(H,ce({color:"#444",style:{"font-weight":"900",width:"100%"},dark:""},g),{default:t(()=>[n("編輯社團檔案")]),_:2},1040)]),default:t(()=>[e(De,{style:{"border-radius":"15px","max-width":"400px",margin:"auto",width:"100%"}},{default:t(()=>[e(Lt,{dark:"",color:"#333"},{default:t(()=>[e(H,{icon:"",dark:"",onClick:E},{default:t(()=>[e(ve,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:1}),e(wt,null,{default:t(()=>[n("編輯檔案")]),_:1}),e(qe),e(Dt)]),_:1}),e(Re,null,{default:t(()=>[e(Bt,{disabled:a(de),onSubmit:Rt(a(fe),["prevent"])},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(q,{modelValue:U.value,"onUpdate:modelValue":x[0]||(x[0]=g=>U.value=g),rawModelValue:_.value,"onUpdate:rawModelValue":x[1]||(x[1]=g=>_.value=g),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",ref_key:"fileAgent",ref:A,color:"#25ECE0"},null,8,["modelValue","rawModelValue"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(me).value.value,"onUpdate:modelValue":x[2]||(x[2]=g=>a(me).value.value=g),label:"社團名稱","error-messages":a(me).errorMessage.value,maxlength:"6",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(o).ROLE===3?(r(),p(ie,{key:0,modelValue:a(te).value.value,"onUpdate:modelValue":x[3]||(x[3]=g=>a(te).value.value=g),"error-messages":a(te).errorMessage.value,maxlength:"3",counter:"",color:"#25ECE0",label:"社團屆數",variant:"outlined"},null,8,["modelValue","error-messages"])):se("",!0)]),_:1}),e(s,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(o).ROLE===3?(r(),p(je,{key:0,modelValue:a(le).value.value,"onUpdate:modelValue":x[4]||(x[4]=g=>a(le).value.value=g),":error-messages":a(le).errorMessage.value,items:S.items,label:"社團類別",color:"#25ECE0",variant:"outlined"},null,8,["modelValue",":error-messages","items"])):se("",!0)]),_:1}),e(s,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[e(Tl,{style:{color:"#FF8484"}},{default:t(()=>[n(k(a(ee).clubCoreMember),1)]),_:1})]),_:1}),(r(!0),X(j,null,Ke(a(L).fields.value,(g,I)=>(r(),p(s,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"},key:g.key},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"5"},{default:t(()=>[a(o).ROLE===3?(r(),p(ie,{key:0,modelValue:g.value.ROLE,"onUpdate:modelValue":G=>g.value.ROLE=G,"error-messages":a(ee)[`clubCoreMember[${I}].ROLE`],label:"幹部職稱",variant:"outlined",color:"#25ECE0",density:"compact"},null,8,["modelValue","onUpdate:modelValue","error-messages"])):se("",!0)]),_:2},1024),e(s,{cols:"5"},{default:t(()=>[a(o).ROLE===3?(r(),p(ie,{key:0,modelValue:g.value.USER,"onUpdate:modelValue":G=>g.value.USER=G,"error-messages":a(ee)[`clubCoreMember[${I}].USER`],label:"用戶名稱",variant:"outlined",density:"compact",color:"#25ECE0",onInput:G=>Y(I),id:"clubCoreMember_user"+I},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","id"])):se("",!0),e(Ce,{activator:"#clubCoreMember_user"+I},{default:t(()=>[e(Ue,null,{default:t(()=>[g.value.USER?(r(!0),X(j,{key:0},Ke(D.value,G=>(r(),p(oe,{key:G.USER_NAME,onClick:Ee=>B(G.USER_NAME,I)},{default:t(()=>[e(z,{style:{margin:"5px"}},{default:t(()=>[e(s,{cols:"4",class:"justify-center align-center",style:{padding:"8px"}},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:G.IMAGE},null,8,["src"])]),_:2},1024)]),_:2},1024),e(s,{cols:"8",class:"justify-center align-center"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[n(k(G.USER_NAME),1)]),_:2},1024),e(s,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[n(k(G.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(J)]),_:2},1032,["onClick"]))),128)):(r(),p(oe,{key:1},{default:t(()=>[e(Ot,null,{default:t(()=>[n("無搜尋結果")]),_:1})]),_:1}))]),_:2},1024)]),_:2},1032,["activator"])]),_:2},1024),e(s,{cols:"1",style:{"justify-content":"start","align-items":"center"}},{default:t(()=>[I===0?(r(),p(H,{key:0,icon:"mdi-plus",onClick:Z,style:{"font-size":"1.2rem",width:"auto",height:"auto"}})):(r(),p(H,{key:1,icon:"mdi-minus",onClick:G=>P(I),style:{"font-size":"1.2rem",width:"auto",height:"auto"}},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(s,{cols:"12",style:{"padding-top":"10px","padding-bottom":"0"}},{default:t(()=>[e(ie,{modelValue:a(Q).value.value,"onUpdate:modelValue":x[5]||(x[5]=g=>a(Q).value.value=g),"error-messages":a(Q).errorMessage.value,maxlength:"40",counter:"",label:"備用信箱",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(Pt,{modelValue:a(T).value.value,"onUpdate:modelValue":x[6]||(x[6]=g=>a(T).value.value=g),"error-messages":a(T).errorMessage.value,maxlength:"50",counter:"",label:"社團簡介",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(s,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(H,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:E},{default:t(()=>[n(" 取消 ")]),_:1})]),_:1}),e(s,{cols:"8",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(H,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[n(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ze={__name:"StatusBtn",setup(l){const c=pe(),u=O(()=>Nt.ROLE===Ve.CLUB?"分享社團檔案":"分享個人檔案"),o=Fe("routeUser");return Fe("routeEvent"),(f,y)=>(r(),p(s,{cols:"12"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(c).USER_NAME===a(o).USER_NAME?(r(),X(j,{key:0},[a(o).ROLE===a(Ve).CLUB?(r(),p(Wl,{key:0,routeUser:a(o)},null,8,["routeUser"])):(r(),p(H,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n("編輯個人檔案")]),_:1}))],64)):(r(),p(H,{key:1,color:"#1BBCA9",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n("追蹤")]),_:1}))]),_:1}),e(s,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(c).USER_NAME===a(o).USER_NAME?(r(),p(H,{key:0,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n(k(u.value),1)]),_:1})):(r(),p(H,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[n("發送訊息")]),_:1}))]),_:1}),e(s,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[e(H,{color:"#FF9900",style:{color:"#fff","font-weight":"900",width:"100%"}},{default:t(()=>[n("榮譽分數 "+k(a(o).SCORES)+" 分",1)]),_:1})]),_:1})]),_:1})]),_:1}))}},Xl={class:"d-flex justify-space-around"},ht={__name:"EventMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){ft(),pe();const c=l,u=O(()=>c.isMobile?{dividerFirst:{marginTop:"5px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"5px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"0px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"0px"},listItem:{fontSize:"1rem"}});return(o,f)=>(r(),X("div",Xl,[e(Ce,null,{activator:t(({props:y})=>[e(ve,ce(y,{color:"#fff"}),{default:t(()=>[n("mdi-dots-vertical")]),_:2},1040)]),default:t(()=>[e(Ue,null,{default:t(()=>[e(J,{style:F(u.value.dividerFirst)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("編輯")]),_:1},8,["style"]),e(J,{style:F(u.value.divider)},null,8,["style"]),e(oe,{style:F(u.value.listItem)},{default:t(()=>[n("分享")]),_:1},8,["style"]),e(J,{style:F(u.value.dividerLast)},null,8,["style"])]),_:1})]),_:1})]))}};const st=l=>(Cl("data-v-effd14bf"),l=l(),Sl(),l),Ql={class:"me-1"},Zl=st(()=>ae("span",{class:"me-1",style:{"font-size":"0.7rem"}},"月",-1)),Jl={class:"me-1"},ea=st(()=>ae("span",{class:"me-1",style:{"font-size":"0.7rem"}},"日",-1)),ta={key:1,style:{"font-size":"1.3rem",color:"#ccc"}},la=st(()=>ae("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動參加紀錄",-1)),aa=st(()=>ae("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動參加紀錄",-1)),oa={__name:"PostEvent",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const c=pe(),u=K(""),{xs:o}=Ne(),f=O(()=>o.value),y=O(()=>u.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),b=O(()=>u.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),E=O(()=>u.value==="three"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;");return(B,w)=>l.routeUser.ROLE===a(Ve).CLUB?(r(),X(j,{key:0},[e(s,{cols:"12"},{default:t(()=>[e(Bl,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=U=>u.value=U),"align-tabs":"start"},{default:t(()=>[e(ut,{value:"one",class:"rounded-ts-xl me-2",style:F([{"min-width":"80px"},y.value])},{default:t(()=>[n("動態")]),_:1},8,["style"]),e(ut,{value:"two",class:"rounded-ts-xl me-2",style:F([{"min-width":"80px"},b.value])},{default:t(()=>[n("主辦活動")]),_:1},8,["style"]),e(ut,{value:"three",class:"rounded-ts-xl",style:F([{"min-width":"80px"},E.value])},{default:t(()=>[n("活動紀錄")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(J,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(kl,{modelValue:u.value,"onUpdate:modelValue":w[1]||(w[1]=U=>u.value=U),style:{width:"100%"}},{default:t(()=>[e(Mt,{value:"two"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[n(k(new Date().getFullYear()),1)]),_:1}),l.routeUser.EVENTS_ID.length!==0?(r(!0),X(j,{key:0},Ke(l.routeEvent,U=>(r(),X(j,{key:U._id},[e(s,{cols:"3",style:{background:"rgba(6, 50, 107,0)","padding-right":"0"}},{default:t(()=>[ae("span",Ql,k(U.dateParts.month),1),Zl,ae("span",Jl,k(U.dateParts.day),1),ea]),_:2},1024),e(s,{cols:"7",onClick:_=>B.$router.push(`/event/${U._id}`),style:{cursor:"pointer"},class:"title"},{default:t(()=>[n(k(U.TITLE),1)]),_:2},1032,["onClick"]),e(s,{cols:"1",class:"d-flex justify-center"},{default:t(()=>[e(ve,{style:{},color:"#fff "},{default:t(()=>[n("mdi-camera")]),_:1})]),_:1}),e(s,{cols:"1",class:"d-flex justify-center",style:{cursor:"pointer"}},{default:t(()=>[f.value?(r(),p(ht,{key:0,isMobile:""})):(r(),p(ht,{key:1}))]),_:1})],64))),128)):(r(),p(s,{key:1,cols:"12"},{default:t(()=>[l.routeUser.USER_NAME===a(c).USER_NAME?(r(),p(Kt,{key:0})):(r(),X("div",ta,"目前無活動"))]),_:1}))]),_:1})]),_:1})]),_:1}),e(Mt,{value:"three"},{default:t(()=>[e(s,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[n(k(new Date().getFullYear()),1)]),_:1}),e(s,{cols:"12"},{default:t(()=>[la]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):(r(),X(j,{key:1},[e(s,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[n(k(new Date().getFullYear()),1)]),_:1}),e(s,{cols:"12"},{default:t(()=>[aa]),_:1})],64))}},Je=ze(oa,[["__scopeId","data-v-effd14bf"]]),sa=ae("div",{class:"mt-3",style:{color:"#ccc"}},"新增",-1),et={__name:"TimePost",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],EVENTS_ID:[]})}},setup(l){const c=pe(),{xs:u}=Ne(),o=O(()=>u.value),f=O(()=>o.value?3:2);return(y,b)=>l.routeUser.USER_NAME===a(c).USER_NAME||l.routeUser.MAKE_EVENT.length!==0?(r(),p(s,{key:0,cols:"12"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:f.value,class:"text-center"},{default:t(()=>[e(H,{icon:"",size:"large",text:"",color:"rgba(0,0,0,0)"},{default:t(()=>[e(ve,{style:{"font-size":"3.8rem",border:"1px solid #ccc","border-radius":"50%"},color:"#ccc "},{default:t(()=>[n("mdi-plus")]),_:1})]),_:1}),sa]),_:1},8,["cols"])]),_:1})]),_:1})):se("",!0)}},ua={style:{border:"1px solid #25ECE0",padding:"3px 10px",color:"#FF6868"}},na={style:{"margin-right":"10px","font-weight":"900",color:"#25ECE0"}},tt={__name:"SchoolName",props:{isNClubComputer:{type:Boolean,default:!1,required:!1},routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],EVENTS_ID:[]})}},setup(l){const c=l,u=O(()=>c.isNClubComputer?{"padding-top":"0rem"}:{"padding-top":"0.6rem"});return(o,f)=>(r(),p(s,{cols:"12",style:F([{"font-size":"0.9rem"},u.value])},{default:t(()=>[ae("span",ua,[ae("span",na,k(l.routeUser.SCHOOL_NAME),1),ae("span",null,k(l.routeUser.SCHOOL_CITY),1)])]),_:1},8,["style"]))}},ra={class:"me-3"},ia={class:"me-3",style:{"font-size":"1.05rem"}},da={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},ca={class:"me-3"},ma={class:"me-3",style:{"font-size":"1.05rem"}},fa={__name:"PersonalClub",emits:["updateUser"],setup(l,{emit:c}){const u=pe(),{xs:o}=Ne(),f=O(()=>o.value),y=c,b=()=>{y("updateUser")},E=Fe("routeUser"),B=Fe("routeEvent");return(w,U)=>f.value?(r(),p(Re,{key:0},{default:t(()=>[e(z,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(s,{cols:"4",class:"d-flex justify-center",style:{"padding-top":"1.2rem"}},{default:t(()=>[e(Te,{size:"100%",style:{"margin-top":""}},{default:t(()=>[e(we,{src:a(E).IMAGE},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[ae("span",ra,k(a(E).NICK_NAME),1),ae("span",ia,"第"+k(a(E).CLUB_TH)+"屆",1),ae("span",null,[e(H,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[n("成員")]),_:1})])]),_:1}),e(tt,{routeUser:a(E)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(E).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(E)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{routeUser:a(E)},null,8,["routeUser"]),a(E).MAKE_EVENT.length!==0?(r(),p(Xe,{key:0})):se("",!0),e(et,{routeUser:a(E)},null,8,["routeUser"]),e(Je,{routeUser:a(E),routeEvent:a(B)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",da,[e(Re,{style:{"max-width":"800px"}},{default:t(()=>[e(z,{class:"box",style:{"background-color":""}},{default:t(()=>[e(s,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",class:"d-flex justify-center"},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:a(E).IMAGE},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[n(k(a(E).USER_NAME),1)]),_:1}),e(s,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0","padding-top":"0.5rem"}},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[ae("span",ca,k(a(E).NICK_NAME),1),ae("span",ma,"第"+k(a(E).CLUB_TH)+"屆",1),ae("span",null,[e(H,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[n("成員")]),_:1})])]),_:1}),e(s,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(E).USER_NAME===a(u).USER_NAME?(r(),p(ve,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[n("mdi-plus-box-outline")]),_:1})):se("",!0),a(E).USER_NAME===a(u).USER_NAME?(r(),p(Ce,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ue,null,{default:t(()=>[e(_t)]),_:1})]),_:1})):se("",!0),e(ve,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[n("mdi-menu")]),_:1}),e(Ce,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ue,null,{default:t(()=>[a(E).USER_NAME===a(u).USER_NAME?(r(),p(vt,{key:0})):(r(),p(Et,{key:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(tt,{routeUser:a(E)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(E).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(E)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{onUpdateUser:b,routeUser:a(E)},null,8,["routeUser"]),a(E).MAKE_EVENT.length!==0?(r(),p(Xe,{key:0})):se("",!0),e(et,{routeUser:a(E)},null,8,["routeUser"]),e(Je,{routeUser:a(E),routeEvent:a(B)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const va={__name:"ClubMember",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const c=K(0),u=()=>{c.value++},o=l,f=O(()=>c.value%2===0?"幹部":o.routeUser.IS_CORE_MEMBER[0].NICK_NAME+"  "+o.routeUser.IS_CORE_MEMBER[0].CLUB_TH+"th "+o.routeUser.IS_CORE_MEMBER[0].ROLE);return(y,b)=>(r(),X(j,null,[l.routeUser.ROLE===a(Ve).STUDENT?(r(),p(s,{key:0,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[l.routeUser.IS_CORE_MEMBER?(r(),p(H,{key:0,type:"button",style:{"background-color":"#FF9900",height:"auto","padding-top":"3px","padding-bottom":"3px"},onClick:u},{default:t(()=>[n(k(f.value),1)]),_:1})):(r(),p(H,{key:1,type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[n("無社團")]),_:1}))]),_:1})):se("",!0),l.routeUser.ROLE===a(Ve).NOT_STUDENT?(r(),p(s,{key:1,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[e(H,{type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[n("畢業生")]),_:1})]),_:1})):se("",!0)],64))}},Vt=ze(va,[["__scopeId","data-v-7ae8f6cb"]]),_a={class:"me-3"},Ea={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},pa={class:"me-3"},ga={__name:"NPersonalClub",setup(l){const c=pe(),{xs:u}=Ne(),o=O(()=>u.value),f=Fe("routeUser"),y=Fe("routeEvent");return(b,E)=>o.value?(r(),p(Re,{key:0},{default:t(()=>[e(z,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(s,{cols:"4",class:"d-flex justify-center",style:{"padding-top":"1.2rem"}},{default:t(()=>[e(Te,{size:"100%"},{default:t(()=>[e(we,{src:a(f).IMAGE},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[ae("span",_a,k(a(f).NICK_NAME),1)]),_:1}),e(tt,{routeUser:a(f)},null,8,["routeUser"]),e(Vt,{routeUser:a(f)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(f).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(f)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{routeUser:a(f)},null,8,["routeUser"]),e(et,{routeUser:a(f)},null,8,["routeUser"]),e(Xe),e(Je,{routeUser:a(f),routeEvent:a(y)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",Ea,[e(Re,{style:{"max-width":"800px"}},{default:t(()=>[e(z,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(s,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",class:"d-flex justify-center"},{default:t(()=>[e(Te,{size:"100%",style:{"margin-top":"0"}},{default:t(()=>[e(we,{src:a(f).IMAGE},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"8"},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[n(k(a(f).USER_NAME),1)]),_:1}),e(s,{cols:"8",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[ae("span",pa,k(a(f).NICK_NAME),1)]),_:1}),e(s,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(f).USER_NAME===a(c).USER_NAME?(r(),p(ve,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[n("mdi-plus-box-outline")]),_:1})):se("",!0),a(f).USER_NAME===a(c).USER_NAME?(r(),p(Ce,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ue,null,{default:t(()=>[e(_t)]),_:1})]),_:1})):se("",!0),e(ve,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[n("mdi-menu")]),_:1}),e(Ce,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ue,null,{default:t(()=>[a(f).USER_NAME===a(c).USER_NAME?(r(),p(vt,{key:0})):(r(),p(Et,{key:1}))]),_:1})]),_:1})]),_:1}),e(tt,{isNClubComputer:"",routeUser:a(f)},null,8,["routeUser"]),e(Vt,{routeUser:a(f)},null,8,["routeUser"]),e(s,{cols:"12"},{default:t(()=>[n(k(a(f).DESCRIBE),1)]),_:1}),e(Qe,{routeUser:a(f)},null,8,["routeUser"])]),_:1})]),_:1}),e(Ze,{routeUser:a(f)},null,8,["routeUser"]),e(et,{routeUser:a(f)},null,8,["routeUser"]),e(Xe),e(Je,{routeUser:a(f),routeEvent:a(y)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const ya={__name:"PersonalView",setup(l){const{apiAuth:c}=ot(),u=pe(),o=ft(),f=Nt(),y=at(),b=zt(),{xs:E}=Ne(),B=O(()=>E.value),w=()=>{o.go(-1)};b.on("updateUser",async()=>{await u.getProfile(),await A(),b.emit("updateUserOk")});const U=K([]),_=K({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],EVENTS_ID:[]});Ct("routeUser",_),Ct("routeEvent",U);const A=async()=>{var D,Y;try{const{data:v}=await c.get("/users/"+f.params.USER_NAME);_.value.EMAIL=v.result.EMAIL,_.value.ROLE=v.result.ROLE,_.value.SCHOOL_NAME=v.result.SCHOOL_NAME,_.value.SCHOOL_CITY=v.result.SCHOOL_CITY,_.value.USER_NAME=v.result.USER_NAME,_.value.NICK_NAME=v.result.NICK_NAME,_.value.CLUB_TH=v.result.CLUB_TH,_.value.CLUB_CATEGORY=v.result.CLUB_CATEGORY,_.value.IMAGE=v.result.IMAGE,_.value.TICKET_CART=v.result.TICKET_CART,_.value.SCORES=v.result.SCORES,_.value.NOTIFY=v.result.NOTIFY,_.value.KEEP_POST=v.result.KEEP_POST,_.value.KEEP_EVENT=v.result.KEEP_EVENT,_.value.FANS=v.result.FANS,_.value.FOLLOW=v.result.FOLLOW,_.value.IS_STUDENT=v.result.IS_STUDENT,_.value.IS_ABLE=v.result.IS_ABLE,_.value.IS_ADMIN=v.result.IS_ADMIN,_.value.DESCRIBE=v.result.DESCRIBE,_.value.MAKE_EVENT=v.result.MAKE_EVENT,_.value.MAKE_POST=v.result.MAKE_POST,_.value.MAKE_TIME_POST=v.result.MAKE_TIME_POST,_.value.GO_EVENT=v.result.GO_EVENT,_.value.BE_MARK=v.result.BE_MARK,_.value.IS_CORE_MEMBER=v.result.IS_CORE_MEMBER,_.value.EVENTS_ID=v.result.EVENTS_ID,document.title=`學生社團 | ${_.value.NICK_NAME}（${_.value.USER_NAME}）`,await S()}catch(v){console.log(v);const $=((Y=(D=v==null?void 0:v.response)==null?void 0:D.data)==null?void 0:Y.message)||"發生錯誤，請稍後再試";y({text:$,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}}),o.push("/")}},S=async()=>{var D,Y;try{const v=_.value.EVENTS_ID.map(de=>c.get("/events/"+de)),$=await Promise.all(v);U.value=$.map(de=>{const ee=de.data.result,[ye,me,M]=ee.DATE.split(" "),[Q,te,L]=ye.split("/"),[le,T]=[me.slice(0,2),me.slice(2)],[Z,P]=[M.slice(0,2),M.slice(2)];return ee.dateParts={year:Q,month:te.padStart(2,"0"),day:L.padStart(2,"0"),hourStart:le.padStart(2,"0"),minuteStart:T.padStart(2,"0"),hourEnd:Z.padStart(2,"0"),minuteEnd:P.padStart(2,"0")},ee}),console.log(U.value,"routeEvent.value in")}catch(v){console.log(v);const $=((Y=(D=v==null?void 0:v.response)==null?void 0:D.data)==null?void 0:Y.message)||"發生錯誤，請稍後再試";y({text:$,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return console.log(_.value,"routeUser in PersonalView"),It(async()=>{await A(),console.log(U.value,"routeEvent in PersonalView")}),(D,Y)=>(r(),X(j,null,[B.value?(r(),p(Nl,{key:0},{default:t(()=>[e(Re,{class:"d-flex align-center",style:{}},{default:t(()=>[_.value.USER_NAME!==a(u).USER_NAME?(r(),p(H,{key:0,icon:"mdi-chevron-left",style:{"font-size":"1.4rem"},onClick:w})):se("",!0),e(Ol,{class:"text-h5 ms-5"},{default:t(()=>[n(k(_.value.USER_NAME),1)]),_:1}),_.value.USER_NAME===a(u).USER_NAME?(r(),p(We,{key:1,"max-width":"400px"},{activator:t(({props:v})=>[e(H,ce(v,{icon:"mdi-plus-box-outline",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:v})=>[e(De,{style:{"border-radius":"15px"}},{default:t(()=>[e(St,{class:"text-center"},{default:t(()=>[e(_t,{"is-mobile":""})]),_:1}),e(qe),e(H,{text:"Close Dialog",flat:!0,onClick:$=>v.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(ve,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})):se("",!0),e(We,{"max-width":"400px"},{activator:t(({props:v})=>[e(H,ce(v,{icon:"mdi-menu",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:v})=>[e(De,{style:{"border-radius":"15px"},class:"text-center"},{default:t(()=>[e(St,null,{default:t(()=>[_.value.USER_NAME===a(u).USER_NAME?(r(),p(vt,{key:0,"is-mobile":""})):(r(),p(Et,{key:1,"is-mobile":""}))]),_:1}),e(qe),e(H,{text:"Close Dialog",flat:!0,onClick:$=>v.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(ve,null,{default:t(()=>[n("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1})]),_:1})):se("",!0),_.value.ROLE!==a(Ve).CLUB?(r(),p(ga,{key:1,routeUser:_.value,routeEvent:U.value},null,8,["routeUser","routeEvent"])):(r(),p(fa,{key:2,routeUser:_.value,routeEvent:U.value},null,8,["routeUser","routeEvent"]))],64))}},ka=ze(ya,[["__scopeId","data-v-40c2a785"]]);export{ka as default};
