import{p as nt,B as P,o as I,L as a,aq as Ut,ar as mt,as as Ht,at as Gt,au as jt,av as Yt,h as pt,aw as qt,ax as we,ay as ft,az as Wt,aA as Xt,R as Ce,aB as $e,aC as Qt,s as gt,U as fe,v as e,J as j,a7 as _e,ac as ke,M as Ee,aD as Jt,aE as Zt,G as u,aF as el,aG as Rt,aH as tl,aI as ll,aJ as al,aK as ol,aL as sl,S as kt,aM as nl,aN as ul,aO as Ct,aP as rl,aQ as il,ah as St,am as dl,aR as cl,aS as ml,aT as fl,w as vl,aU as _l,a as El,aV as pl,r as gl,t as ht,Q as ut,y as rt,x as be,D as r,H as X,N as F,F as t,K as ee,X as Ge,A as Oe,a2 as vt,a4 as me,a3 as Le,aW as Xe,aX as yl,C as Nt,E as y,O as Y,Z as He,ab as Je,a6 as _t,I as Fe,Y as De,P as U,aY as bl,_ as xl,a9 as Ze,W as Cl,z as Ot,ad as Pe,T as J,$ as Sl,a0 as hl,a8 as Mt,aa as It}from"./index-59a9ea1a.js";import{u as it}from"./mitt-43e253ae.js";import{V as Ml,U as Ae}from"./VDatePicker-14c93b9e.js";import{V as se}from"./VDivider-a0dda799.js";import{V as re,a as Bt}from"./VListItem-fc079f4f.js";import{u as wt,a as oe,b as Et,V as Lt}from"./vee-validate.esm-51303a85.js";import{_ as Ke}from"./_plugin-vue_export-helper-c27b6911.js";import{b as Ft,c as Dt,V as Il,a as Tl}from"./VAppBarTitle-be7d2bfd.js";import{V as Ne}from"./VContainer-6962f3b0.js";import{V as $}from"./VRow-9bb72271.js";import{V as o}from"./VCol-988665ee.js";import{V as Me}from"./VMenu-81af5e0f.js";import{m as Al,u as Vl,a as Ul,b as Rl,V as Qe}from"./VSelect-e5cff56a.js";import{u as kl,t as qe,V as Ve,a as Nl}from"./VList-3504b1d6.js";import{V as Pt}from"./VChip-ef8da9af.js";import{v as Ol}from"./index-4f4bda90.js";import{_ as Tt}from"./InfoAll-35e7937e.js";import{V as Bl,a as ct}from"./VTabs-21a19f9b.js";import{a as At,V as wl}from"./VWindowItem-304a57f5.js";import{B as et}from"./BlankLine-8108c0c7.js";import"./ssrBoot-0b72bb23.js";import"./VSlideGroup-1f5f4873.js";const Ll=(l,_,n)=>l==null||_==null?-1:l.toString().toLocaleLowerCase().indexOf(_.toString().toLocaleLowerCase()),Fl=nt({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Dl(l,_,n){var g;const s=[],h=(n==null?void 0:n.default)??Ll,C=n!=null&&n.filterKeys?mt(n.filterKeys):!1,x=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(l!=null&&l.length))return s;e:for(let A=0;A<l.length;A++){const[D,p=D]=mt(l[A]),m={},b={};let c=-1;if(_&&!(n!=null&&n.noFilter)){if(typeof D=="object"){const v=C||Object.keys(p);for(const H of v){const te=Ht(p,H,p),ne=(g=n==null?void 0:n.customKeyFilter)==null?void 0:g[H];if(c=ne?ne(te,_,D):h(te,_,D),c!==-1&&c!==!1)ne?m[H]=c:b[H]=c;else if((n==null?void 0:n.filterMode)==="every")continue e}}else c=h(D,_,D),c!==-1&&c!==!1&&(b.title=c);const E=Object.keys(b).length,K=Object.keys(m).length;if(!E&&!K||(n==null?void 0:n.filterMode)==="union"&&K!==x&&!E||(n==null?void 0:n.filterMode)==="intersection"&&(K!==x||!E))continue}s.push({index:A,matches:{...b,...m}})}return s}function Pl(l,_,n,s){const h=P([]),C=P(new Map),x=I(()=>s!=null&&s.transform?a(_).map(A=>[A,s.transform(A)]):a(_));Ut(()=>{const A=typeof n=="function"?n():a(n),D=typeof A!="string"&&typeof A!="number"?"":String(A),p=Dl(x.value,D,{customKeyFilter:{...l.customKeyFilter,...a(s==null?void 0:s.customKeyFilter)},default:l.customFilter,filterKeys:l.filterKeys,filterMode:l.filterMode,noFilter:l.noFilter}),m=a(_),b=[],c=new Map;p.forEach(E=>{let{index:K,matches:v}=E;const H=m[K];b.push(H),c.set(H.value,v)}),h.value=b,C.value=c});function g(A){return C.value.get(A.value)}return{filteredItems:h,filteredMatches:C,getMatches:g}}function Kl(l,_,n){if(_==null)return l;if(Array.isArray(_))throw new Error("Multiple matches is not implemented");return typeof _=="number"&&~_?e(j,null,[e("span",{class:"v-combobox__unmask"},[l.substr(0,_)]),e("span",{class:"v-combobox__mask"},[l.substr(_,n)]),e("span",{class:"v-combobox__unmask"},[l.substr(_+n)])]):l}const zl=nt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Fl({filterKeys:["title"]}),...Al({hideNoData:!0,returnObject:!0}),...Gt(jt({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Yt({transition:!1})},"VCombobox"),$l=pt()({name:"VCombobox",props:zl(),emits:{"update:focused":l=>!0,"update:modelValue":l=>!0,"update:search":l=>!0,"update:menu":l=>!0},setup(l,_){var Ue;let{emit:n,slots:s}=_;const{t:h}=qt(),C=P(),x=we(!1),g=we(!0),A=we(!1),D=P(),p=P(),m=ft(l,"menu"),b=I({get:()=>m.value,set:i=>{var N;m.value&&!i&&((N=D.value)!=null&&N.ΨopenChildren)||(m.value=i)}}),c=we(-1);let E=!1;const K=I(()=>{var i;return(i=C.value)==null?void 0:i.color}),v=I(()=>b.value?l.closeText:l.openText),{items:H,transformIn:te,transformOut:ne}=kl(l),{textColorClasses:pe,textColorStyles:ve}=Wt(K),M=ft(l,"modelValue",[],i=>te(mt(i)),i=>{const N=ne(i);return l.multiple?N:N[0]??null}),le=Xt(),Z=we(l.multiple?"":((Ue=M.value[0])==null?void 0:Ue.title)??""),R=I({get:()=>Z.value,set:i=>{var N;if(Z.value=i??"",l.multiple||(M.value=[qe(l,i)]),i&&l.multiple&&((N=l.delimiters)!=null&&N.length)){const W=i.split(new RegExp(`(?:${l.delimiters.join("|")})+`));W.length>1&&(W.forEach(de=>{de=de.trim(),de&&ie(qe(l,de))}),Z.value="")}i||(c.value=-1),g.value=!i}}),ae=I(()=>typeof l.counterValue=="function"?l.counterValue(M.value):typeof l.counterValue=="number"?l.counterValue:l.multiple?M.value.length:R.value.length);Ce(Z,i=>{E?$e(()=>E=!1):x.value&&!b.value&&(b.value=!0),n("update:search",i)}),Ce(M,i=>{var N;l.multiple||(Z.value=((N=i[0])==null?void 0:N.title)??"")});const{filteredItems:k,getMatches:Q}=Pl(l,H,()=>g.value?"":R.value),z=I(()=>l.hideSelected?k.value.filter(i=>!M.value.some(N=>N.value===i.value)):k.value),ce=I(()=>M.value.map(i=>i.value)),ge=I(()=>{var N;return(l.autoSelectFirst===!0||l.autoSelectFirst==="exact"&&R.value===((N=z.value[0])==null?void 0:N.title))&&z.value.length>0&&!g.value&&!A.value}),O=I(()=>l.hideNoData&&!z.value.length||l.readonly||(le==null?void 0:le.isReadonly.value)),T=P(),{onListScroll:q,onListKeydown:S}=Vl(T,C);function B(i){E=!0,l.openOnClear&&(b.value=!0)}function G(){O.value||(b.value=!0)}function Se(i){O.value||(x.value&&(i.preventDefault(),i.stopPropagation()),b.value=!b.value)}function Ie(i){var de;if(tl(i)||l.readonly||le!=null&&le.isReadonly.value)return;const N=C.value.selectionStart,W=M.value.length;if((c.value>-1||["Enter","ArrowDown","ArrowUp"].includes(i.key))&&i.preventDefault(),["Enter","ArrowDown"].includes(i.key)&&(b.value=!0),["Escape"].includes(i.key)&&(b.value=!1),["Enter","Escape","Tab"].includes(i.key)&&(ge.value&&["Enter","Tab"].includes(i.key)&&ie(k.value[0]),g.value=!0),i.key==="ArrowDown"&&ge.value&&((de=T.value)==null||de.focus("next")),!!l.multiple){if(["Backspace","Delete"].includes(i.key)){if(c.value<0){i.key==="Backspace"&&!R.value&&(c.value=W-1);return}const V=c.value,w=M.value[c.value];w&&!w.props.disabled&&ie(w,!1),c.value=V>=W-1?W-2:V}if(i.key==="ArrowLeft"){if(c.value<0&&N>0)return;const V=c.value>-1?c.value-1:W-1;M.value[V]?c.value=V:(c.value=-1,C.value.setSelectionRange(R.value.length,R.value.length))}if(i.key==="ArrowRight"){if(c.value<0)return;const V=c.value+1;M.value[V]?c.value=V:(c.value=-1,C.value.setSelectionRange(0,0))}i.key==="Enter"&&R.value&&(ie(qe(l,R.value)),R.value="")}}function he(){var i;x.value&&(g.value=!0,(i=C.value)==null||i.focus())}function ie(i){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(l.multiple){const W=M.value.findIndex(V=>l.valueComparator(V.value,i.value)),de=N??!~W;if(~W){const V=de?[...M.value,i]:[...M.value];V.splice(W,1),M.value=V}else de&&(M.value=[...M.value,i]);l.clearOnSelect&&(R.value="")}else{const W=N!==!1;M.value=W?[i]:[],Z.value=W?i.title:"",$e(()=>{b.value=!1,g.value=!0})}}function xe(i){x.value=!0,setTimeout(()=>{A.value=!0})}function Te(i){A.value=!1}function Be(i){(i==null||i===""&&!l.multiple)&&(M.value=[])}return Ce(x,(i,N)=>{i||i===N||(c.value=-1,b.value=!1,ge.value&&!A.value&&!M.value.some(W=>{let{value:de}=W;return de===z.value[0].value})?ie(z.value[0]):l.multiple&&R.value&&ie(qe(l,R.value)))}),Ce(b,()=>{if(!l.hideSelected&&b.value&&M.value.length){const i=z.value.findIndex(N=>M.value.some(W=>l.valueComparator(W.value,N.value)));Qt&&window.requestAnimationFrame(()=>{var N;i>=0&&((N=p.value)==null||N.scrollToIndex(i))})}}),Ce(z,(i,N)=>{x.value&&(!i.length&&l.hideNoData&&(b.value=!1),!N.length&&i.length&&(b.value=!0))}),gt(()=>{const i=!!(l.chips||s.chip),N=!!(!l.hideNoData||z.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),W=M.value.length>0,de=fe.filterProps(l);return e(fe,_e({ref:C},de,{modelValue:R.value,"onUpdate:modelValue":[V=>R.value=V,Be],focused:x.value,"onUpdate:focused":V=>x.value=V,validationValue:M.externalValue,counterValue:ae.value,dirty:W,class:["v-combobox",{"v-combobox--active-menu":b.value,"v-combobox--chips":!!l.chips,"v-combobox--selection-slot":!!s.selection,"v-combobox--selecting-index":c.value>-1,[`v-combobox--${l.multiple?"multiple":"single"}`]:!0},l.class],style:l.style,readonly:l.readonly,placeholder:W?void 0:l.placeholder,"onClick:clear":B,"onMousedown:control":G,onKeydown:Ie}),{...s,default:()=>e(j,null,[e(Me,_e({ref:D,modelValue:b.value,"onUpdate:modelValue":V=>b.value=V,activator:"parent",contentClass:"v-combobox__content",disabled:O.value,eager:l.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:l.transition,onAfterLeave:he},l.menuProps),{default:()=>[N&&e(Ve,_e({ref:T,selected:ce.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:V=>V.preventDefault(),onKeydown:S,onFocusin:xe,onFocusout:Te,onScrollPassive:q,tabindex:"-1","aria-live":"polite",color:l.itemColor??l.color},l.listProps),{default:()=>{var V,w,f;return[(V=s["prepend-item"])==null?void 0:V.call(s),!z.value.length&&!l.hideNoData&&(((w=s["no-data"])==null?void 0:w.call(s))??e(re,{title:h(l.noDataText)},null)),e(Ul,{ref:p,renderless:!0,items:z.value},{default:ue=>{var dt;let{item:d,index:L,itemRef:ye}=ue;const je=_e(d.props,{ref:ye,key:L,active:ge.value&&L===0?!0:void 0,onClick:()=>ie(d,null)});return((dt=s.item)==null?void 0:dt.call(s,{item:d,index:L,props:je}))??e(re,je,{prepend:Re=>{let{isSelected:Ye}=Re;return e(j,null,[l.multiple&&!l.hideSelected?e(Rl,{key:d.value,modelValue:Ye,ripple:!1,tabindex:"-1"},null):void 0,d.props.prependAvatar&&e(ke,{image:d.props.prependAvatar},null),d.props.prependIcon&&e(Ee,{icon:d.props.prependIcon},null)])},title:()=>{var Re,Ye;return g.value?d.title:Kl(d.title,(Re=Q(d))==null?void 0:Re.title,((Ye=R.value)==null?void 0:Ye.length)??0)}})}}),(f=s["append-item"])==null?void 0:f.call(s)]}})]}),M.value.map((V,w)=>{function f(ye){ye.stopPropagation(),ye.preventDefault(),ie(V,!1)}const ue={"onClick:close":f,onMousedown(ye){ye.preventDefault(),ye.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},d=i?!!s.chip:!!s.selection,L=d?Jt(i?s.chip({item:V,index:w,props:ue}):s.selection({item:V,index:w})):void 0;if(!(d&&!L))return e("div",{key:V.value,class:["v-combobox__selection",w===c.value&&["v-combobox__selection--selected",pe.value]],style:w===c.value?ve.value:{}},[i?s.chip?e(Zt,{key:"chip-defaults",defaults:{VChip:{closable:l.closableChips,size:"small",text:V.title}}},{default:()=>[L]}):e(Pt,_e({key:"chip",closable:l.closableChips,size:"small",text:V.title,disabled:V.props.disabled},ue),null):L??e("span",{class:"v-combobox__selection-text"},[V.title,l.multiple&&w<M.value.length-1&&e("span",{class:"v-combobox__selection-comma"},[u(",")])])])})]),"append-inner":function(){var ue;for(var V=arguments.length,w=new Array(V),f=0;f<V;f++)w[f]=arguments[f];return e(j,null,[(ue=s["append-inner"])==null?void 0:ue.call(s,...w),(!l.hideNoData||l.items.length)&&l.menuIcon?e(Ee,{class:"v-combobox__menu-icon",icon:l.menuIcon,onMousedown:Se,onClick:el,"aria-label":h(v.value),title:h(v.value)},null):void 0])}})}),Rt({isFocused:x,isPristine:g,menu:b,search:R,selectionIndex:c,filteredItems:k,select:ie},C)}});const Hl=nt({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:l=>!isNaN(parseFloat(l))},maxRows:{type:[Number,String],validator:l=>!isNaN(parseFloat(l))},suffix:String,modelModifiers:Object,...ll(),...al()},"VTextarea"),Kt=pt()({name:"VTextarea",directives:{Intersect:ol},inheritAttrs:!1,props:Hl(),emits:{"click:control":l=>!0,"mousedown:control":l=>!0,"update:focused":l=>!0,"update:modelValue":l=>!0},setup(l,_){let{attrs:n,emit:s,slots:h}=_;const C=ft(l,"modelValue"),{isFocused:x,focus:g,blur:A}=sl(l),D=I(()=>typeof l.counterValue=="function"?l.counterValue(C.value):(C.value||"").toString().length),p=I(()=>{if(n.maxlength)return n.maxlength;if(!(!l.counter||typeof l.counter!="number"&&typeof l.counter!="string"))return l.counter});function m(k,Q){var z,ce;!l.autofocus||!k||(ce=(z=Q[0].target)==null?void 0:z.focus)==null||ce.call(z)}const b=P(),c=P(),E=we(""),K=P(),v=I(()=>l.persistentPlaceholder||x.value||l.active);function H(){var k;K.value!==document.activeElement&&((k=K.value)==null||k.focus()),x.value||g()}function te(k){H(),s("click:control",k)}function ne(k){s("mousedown:control",k)}function pe(k){k.stopPropagation(),H(),$e(()=>{C.value="",fl(l["onClick:clear"],k)})}function ve(k){var z;const Q=k.target;if(C.value=Q.value,(z=l.modelModifiers)!=null&&z.trim){const ce=[Q.selectionStart,Q.selectionEnd];$e(()=>{Q.selectionStart=ce[0],Q.selectionEnd=ce[1]})}}const M=P(),le=P(+l.rows),Z=I(()=>["plain","underlined"].includes(l.variant));Ut(()=>{l.autoGrow||(le.value=+l.rows)});function R(){l.autoGrow&&$e(()=>{if(!M.value||!c.value)return;const k=getComputedStyle(M.value),Q=getComputedStyle(c.value.$el),z=parseFloat(k.getPropertyValue("--v-field-padding-top"))+parseFloat(k.getPropertyValue("--v-input-padding-top"))+parseFloat(k.getPropertyValue("--v-field-padding-bottom")),ce=M.value.scrollHeight,ge=parseFloat(k.lineHeight),O=Math.max(parseFloat(l.rows)*ge+z,parseFloat(Q.getPropertyValue("--v-input-control-height"))),T=parseFloat(l.maxRows)*ge+z||1/0,q=_l(ce??0,O,T);le.value=Math.floor((q-z)/ge),E.value=vl(q)})}kt(R),Ce(C,R),Ce(()=>l.rows,R),Ce(()=>l.maxRows,R),Ce(()=>l.density,R);let ae;return Ce(M,k=>{k?(ae=new ResizeObserver(R),ae.observe(M.value)):ae==null||ae.disconnect()}),nl(()=>{ae==null||ae.disconnect()}),gt(()=>{const k=!!(h.counter||l.counter||l.counterValue),Q=!!(k||h.details),[z,ce]=ul(n),{modelValue:ge,...O}=Ct.filterProps(l),T=rl(l);return e(Ct,_e({ref:b,modelValue:C.value,"onUpdate:modelValue":q=>C.value=q,class:["v-textarea v-text-field",{"v-textarea--prefixed":l.prefix,"v-textarea--suffixed":l.suffix,"v-text-field--prefixed":l.prefix,"v-text-field--suffixed":l.suffix,"v-textarea--auto-grow":l.autoGrow,"v-textarea--no-resize":l.noResize||l.autoGrow,"v-input--plain-underlined":Z.value},l.class],style:l.style},z,O,{centerAffix:le.value===1&&!Z.value,focused:x.value}),{...h,default:q=>{let{id:S,isDisabled:B,isDirty:G,isReadonly:Se,isValid:Ie}=q;return e(il,_e({ref:c,style:{"--v-textarea-control-height":E.value},onClick:te,onMousedown:ne,"onClick:clear":pe,"onClick:prependInner":l["onClick:prependInner"],"onClick:appendInner":l["onClick:appendInner"]},T,{id:S.value,active:v.value||G.value,centerAffix:le.value===1&&!Z.value,dirty:G.value||l.dirty,disabled:B.value,focused:x.value,error:Ie.value===!1}),{...h,default:he=>{let{props:{class:ie,...xe}}=he;return e(j,null,[l.prefix&&e("span",{class:"v-text-field__prefix"},[l.prefix]),St(e("textarea",_e({ref:K,class:ie,value:C.value,onInput:ve,autofocus:l.autofocus,readonly:Se.value,disabled:B.value,placeholder:l.placeholder,rows:l.rows,name:l.name,onFocus:H,onBlur:A},xe,ce),null),[[dl("intersect"),{handler:m},null,{once:!0}]]),l.autoGrow&&St(e("textarea",{class:[ie,"v-textarea__sizer"],id:`${xe.id}-sizer`,"onUpdate:modelValue":Te=>C.value=Te,ref:M,readonly:!0,"aria-hidden":"true"},null),[[cl,C.value]]),l.suffix&&e("span",{class:"v-text-field__suffix"},[l.suffix])])}})},details:Q?q=>{var S;return e(j,null,[(S=h.details)==null?void 0:S.call(h,q),k&&e(j,null,[e("span",null,null),e(ml,{active:l.persistentCounter||x.value,value:D.value,max:p.value},h.counter)])])}:void 0})}),Rt({},b,c,K)}}),Gl=nt({...El(),...pl({variant:"text"})},"VToolbarItems"),zt=pt()({name:"VToolbarItems",props:Gl(),setup(l,_){let{slots:n}=_;return gl({VBtn:{color:ht(l,"color"),height:"inherit",variant:ht(l,"variant")}}),gt(()=>{var s;return e("div",{class:["v-toolbar-items",l.class],style:l.style},[(s=n.default)==null?void 0:s.call(n)])}),{}}}),yt={__name:"SettingsMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const _=ut(),n=rt(),s=be(),{apiAuth:h}=Ge(),C=l,x=I(()=>C.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}}),g=async()=>{var A,D;try{await h.delete("/users/logout"),s.logout(),_({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),n.push("/")}catch(p){console.log(p);const m=((D=(A=p==null?void 0:p.response)==null?void 0:A.data)==null?void 0:D.message)||"發生錯誤，請稍後再試";_({text:m,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(A,D)=>(r(),X(j,null,[e(se,{style:F(x.value.dividerFirst)},null,8,["style"]),e(re,{style:F(x.value.listItem)},{default:t(()=>[u("貼文收藏")]),_:1},8,["style"]),e(se,{style:F(x.value.divider)},null,8,["style"]),e(re,{style:F(x.value.listItem)},{default:t(()=>[u("喜歡的活動")]),_:1},8,["style"]),e(se,{style:F(x.value.divider)},null,8,["style"]),e(re,{style:F(x.value.listItem)},{default:t(()=>[u("限動典藏")]),_:1},8,["style"]),e(se,{style:F(x.value.divider)},null,8,["style"]),a(s).IS_ADMIN?(r(),X(j,{key:0},[e(re,{style:F([x.value.listItem,{cursor:"pointer"}]),to:"/admin"},{default:t(()=>[u("管理員後台")]),_:1},8,["style"]),e(se,{style:F(x.value.divider)},null,8,["style"])],64)):ee("",!0),e(re,{style:F([x.value.listItem,{cursor:"pointer"}]),onClick:g},{default:t(()=>[u("登出")]),_:1},8,["style"]),e(se,{style:F(x.value.dividerLast)},null,8,["style"])],64))}};const jl={__name:"AddEvent",props:{isBtn:{type:Boolean,default:!0,required:!1},isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const{apiAuth:_}=Ge(),n=ut(),s=be(),{xs:h,sm:C}=Oe(),x=I(()=>h.value);I(()=>C.value);const g=it(),A=rt(),D=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣","基隆市","新竹市","嘉義市"],p=["公開","學生"],m=["音樂","合唱","管樂","吉他","熱音","熱舞","手語","康輔","桌遊","運動","棒球","桌球","籃球","羽球","排球","天文","文學","話劇","美術","攝影","校友會","學生會","系學會","營隊","學習"],b=I(()=>x.value?3:2),c=l,E=I(()=>!!c.isBtn),K=I(()=>c.isMobile?{fontSize:"1.2rem"}:{fontSize:"1rem"}),v=P(!1);P("");const H=()=>{v.value=!1,O(),M.value.deleteFileRecord()},te=P(!1),ne=I(()=>S.value.value?new Date(S.value.value).toLocaleDateString().substring(0,10):""),pe=P([]),ve=P([]),M=P(null),le=()=>{de.value.value=!0,V()},Z=P(""),R=P(""),ae=w=>{N.fields.value.splice(w,1),W.fields.value.splice(w,1)},k=(w,f)=>{N.fields.value.push(f),W.fields.value.push(w),R.value=""},Q=async()=>{var w,f;try{const{data:ue}=await _.get("/users/getUser",{params:{search:R.value,role:3}});Z.value=ue.result.data}catch(ue){console.log(ue);const d=((f=(w=ue==null?void 0:ue.response)==null?void 0:w.data)==null?void 0:f.message)||"發生錯誤，請稍後再試";n({text:d,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},z=vt({title:me().required("「活動名稱」必填").min(3,"「活動名稱」長度不符").max(20,"「「活動名稱」長度不符"),date:me().required("「活動日期」必填"),startTime:Le().typeError("必須是數字").required("「活動時間」必填"),endTime:Le().typeError("必須是數字").required("「活動時間」必填").max(2359,"「活動時間」長度不符"),city:me().required("「活動縣市」必填").min(3,"「活動縣市」長度不符").max(3,"「「活動縣市」長度不符"),add:me().required("「活動地址」必填").max(40,"「活動地址」長度不符"),addRemark:me().max(30,"「地點備註」長度不符"),isPublic:me().required("「誰可參加」必填").min(2,"「誰可參加」長度不符").max(2,"「誰可參加」長度不符"),category:Xe().of(me()).max(5,"最多5個標籤").required("「活動分類」必填"),preSale:Le().typeError("必須是數字").max(9999,"「預售人數」長度不符").required("「預售人數」必填"),onSiteSale:Le().typeError("必須是數字").max(9999,"「現場票」長度不符").required("「現場票」必填"),scoreValues:Le().typeError("必須是數字").max(100,"「取票資格」長度不符").required("「取票資格」必填"),description:me().required("「活動內容」必填").min(50,"「活動內容」長度不符").max(1e3,"「活動內容」長度不符"),coOrganizer:Xe().of(me()).test("is-unique","協辦單位重複",function(w){return!w||!w.length?!0:new Set(w).size===w.length}),coOrganizerItem:Xe().of(me()).test("is-unique","協辦單位重複",function(w){return!w||!w.length?!0:new Set(w).size===w.length}),isEdit:yl().required("「草稿」必填")}),{handleSubmit:ce,isSubmitting:ge,resetForm:O,errors:T}=wt({validationSchema:z,initialValues:{isEdit:!1}}),q=oe("title"),S=oe("date"),B=oe("startTime"),G=oe("endTime"),Se=oe("city"),Ie=oe("add"),he=oe("addRemark"),ie=oe("isPublic"),xe=oe("category"),Te=oe("preSale"),Be=oe("onSiteSale"),Ue=oe("scoreValues"),i=oe("description"),N=Et("coOrganizer"),W=Et("coOrganizerItem"),de=oe("isEdit"),V=ce(async w=>{var f,ue,d;if(!((f=pe.value[0])!=null&&f.error))try{console.log("values",w),console.log("category.value.value",xe.value.value);const L=new FormData,ye=S.value.value?new Date(S.value.value).toLocaleDateString().substring(0,10):S.value.value,je=B.value.value+" "+G.value.value;L.append("TITLE",q.value.value),L.append("DATE",ye+" "+je),L.append("CITY",Se.value.value),L.append("ADD",Ie.value.value),L.append("IS_PUBLIC",ie.value.value),L.append("CATEGORY",xe.value.value),L.append("PRE_SALE",Te.value.value),L.append("ON_SITE_SALE",Be.value.value),L.append("SCORE_VALUES",Ue.value.value),L.append("DESCRIPTION",i.value.value),L.append("HOST",s._id),L.append("IS_EDIT",de.value.value),L.append("IMAGE",pe.value[0].file),N.fields.value.length>0&&L.append("CO_ORGANIZER",N.fields.value),he.value.value&&L.append("ADD_REMARK",he.value.value);const Re=(await _.post("/events",L)).data.result._id;console.log("eventId",Re),n({text:"新增成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),g.emit("updateUserOk"),A.push("/event/"+Re)}catch(L){console.log(L);const ye=((d=(ue=L==null?void 0:L.response)==null?void 0:ue.data)==null?void 0:d.message)||"發生錯誤，請稍後再試";n({text:ye,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return(w,f)=>{const ue=Nt("VueFileAgent");return r(),y(Ze,{modelValue:v.value,"onUpdate:modelValue":f[22]||(f[22]=d=>v.value=d),fullscreen:"",transition:"dialog-bottom-transition",persistent:!0},{activator:t(({props:d})=>[E.value?(r(),y(Y,_e({key:0,type:"button"},d,{style:{"background-color":"#1BBCA9",height:"auto","padding-top":"3px","padding-bottom":"3px"}}),{default:t(()=>[e(Ee,{style:{"margin-left":"-3px"}},{default:t(()=>[u("mdi-plus")]),_:1}),u("建立活動 ")]),_:2},1040)):(r(),y(re,_e({key:1},d,{style:K.value}),{default:t(()=>[u("建立活動")]),_:2},1040,["style"]))]),default:t(()=>[e(He,{class:"m-auto"},{default:t(()=>[e(Ft,{dark:"",color:"#333"},{default:t(()=>[e(Y,{icon:"",dark:"",onClick:H},{default:t(()=>[e(Ee,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:1}),e(Dt,null,{default:t(()=>[u("新增活動")]),_:1}),e(Je),e(zt)]),_:1}),e(Ne,null,{default:t(()=>[e(Lt,{disabled:a(ge),onSubmit:_t(a(V),["prevent"])},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(ue,{modelValue:pe.value,"onUpdate:modelValue":f[0]||(f[0]=d=>pe.value=d),rawModelValue:ve.value,"onUpdate:rawModelValue":f[1]||(f[1]=d=>ve.value=d),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",color:"#25ECE0",ref_key:"fileAgent",ref:M},null,8,["modelValue","rawModelValue"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(q).value.value,"onUpdate:modelValue":f[2]||(f[2]=d=>a(q).value.value=d),label:"活動名稱","error-messages":a(q).errorMessage.value,minlength:"3",maxlength:"20",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Me,{modelValue:te.value,"onUpdate:modelValue":f[7]||(f[7]=d=>te.value=d),"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","min-width":"290px",class:"d-flex align-center justify-center"},{activator:t(({attrs:d})=>[e(fe,_e({"model-value":ne.value,"error-messages":a(S).errorMessage.value,color:"#25ECE0",variant:"outlined",label:"活動日期","prepend-icon":"mdi-calendar",readonly:""},d,{onClick:f[3]||(f[3]=L=>te.value=!te.value)}),null,16,["model-value","error-messages"])]),default:t(()=>[e(Ml,{type:"date",color:"#25ECE0",modelValue:a(S).value.value,"onUpdate:modelValue":f[5]||(f[5]=d=>a(S).value.value=d),"no-time":"","no-title":"",onInput:f[6]||(f[6]=d=>te.value=!1)},{actions:t(()=>[e(Y,{style:{"background-color":"#25ECE0",color:"rgb(0, 0, 0)","font-weight":"900"},onClick:f[4]||(f[4]=d=>te.value=!1)},{default:t(()=>[u("確定")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(B).value.value,"onUpdate:modelValue":f[8]||(f[8]=d=>a(B).value.value=d),"error-messages":a(B).errorMessage.value,minlength:"4",maxlength:"4",counter:"",variant:"outlined",color:"#25ECE0",label:"開始時間(EX:1900)"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(G).value.value,"onUpdate:modelValue":f[9]||(f[9]=d=>a(G).value.value=d),"error-messages":a(G).errorMessage.value,minlength:"4",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined",label:"結束時間(EX:2230)"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"5",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Qe,{modelValue:a(Se).value.value,"onUpdate:modelValue":f[10]||(f[10]=d=>a(Se).value.value=d),"error-messages":a(Se).errorMessage.value,items:D,label:"地址(縣市)",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"7",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(Ie).value.value,"onUpdate:modelValue":f[11]||(f[11]=d=>a(Ie).value.value=d),label:"活動地址","error-messages":a(Ie).errorMessage.value,maxlength:"40",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(he).value.value,"onUpdate:modelValue":f[12]||(f[12]=d=>a(he).value.value=d),label:"活動地點備註","error-messages":a(he).errorMessage.value,maxlength:"30",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Qe,{modelValue:a(ie).value.value,"onUpdate:modelValue":f[13]||(f[13]=d=>a(ie).value.value=d),"error-messages":a(ie).errorMessage.value,items:p,label:"誰可參加",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Qe,{modelValue:a(xe).value.value,"onUpdate:modelValue":f[14]||(f[14]=d=>a(xe).value.value=d),"error-messages":a(xe).errorMessage.value,items:m,editable:"false",multiple:"",chips:"",label:"活動分類",variant:"outlined",color:"#25ECE0",class:"custom-chips"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(Te).value.value,"onUpdate:modelValue":f[15]||(f[15]=d=>a(Te).value.value=d),label:"預售票(張)",maxlength:"4","error-messages":a(Te).errorMessage.value,counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(Be).value.value,"onUpdate:modelValue":f[16]||(f[16]=d=>a(Be).value.value=d),"error-messages":a(Be).errorMessage.value,label:"現場票(張)",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(Ue).value.value,"onUpdate:modelValue":f[17]||(f[17]=d=>a(Ue).value.value=d),"error-messages":a(Ue).errorMessage.value,label:"取票資格(取票人榮譽分數門檻，0-100分)",maxlength:"3",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e($l,{modelValue:R.value,"onUpdate:modelValue":f[18]||(f[18]=d=>R.value=d),label:"協辦單位",counter:"",variant:"outlined",onInput:f[19]||(f[19]=d=>Q()),id:"searchId","prepend-inner-icon":"mdi-account-search","deletable-chips":"",color:"#25ECE0"},null,8,["modelValue"]),e(Me,{activator:"#searchId",onClick:f[20]||(f[20]=_t(()=>{},["stop"]))},{default:t(()=>[e(Ve,{style:{"max-height":"300px","overflow-y":"auto"}},{default:t(()=>[Z.value?(r(!0),X(j,{key:0},Fe(Z.value,d=>(r(),y(re,{key:d.USER_NAME,onClick:L=>k(d.USER_NAME,d._id)},{default:t(()=>[e($,{style:{margin:"5px"}},{default:t(()=>[e(o,{cols:b.value,class:"justify-center align-center",style:{padding:"0px",height:"45px"}},{default:t(()=>[e(ke,{size:"45"},{default:t(()=>[e(De,{src:d.IMAGE,cover:""},null,8,["src"])]),_:2},1024)]),_:2},1032,["cols"]),e(o,{cols:"7",class:"justify-center align-center"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[u(U(d.USER_NAME),1)]),_:2},1024),e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[u(U(d.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(se)]),_:2},1032,["onClick"]))),128)):(r(),y(re,{key:1},{default:t(()=>[e(Bt,null,{default:t(()=>[u("無搜尋結果")]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"22px"}},{default:t(()=>[e(He,{variant:"outlined",class:"d-flex align-center",style:{height:"56px"}},{default:t(()=>[e(bl,null,{default:t(()=>[u("協辦單位")]),_:1}),e(xl,null,{default:t(()=>[(r(!0),X(j,null,Fe(a(W).fields.value,(d,L)=>(r(),y(Pt,{key:L,closable:"","onClick:close":ye=>ae(L)},{default:t(()=>[u(U(d),1)]),_:2},1032,["onClick:close"]))),128))]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Kt,{modelValue:a(i).value.value,"onUpdate:modelValue":f[21]||(f[21]=d=>a(i).value.value=d),label:"活動內容","error-messages":a(i).errorMessage.value,minlength:"50",maxlength:"1000",rows:"6",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(Y,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:H},{default:t(()=>[u(" 取消 ")]),_:1})]),_:1}),e(o,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(Y,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#444",height:"60px","font-weight":"900"},onClick:le},{default:t(()=>[u(" 儲存草稿 ")]),_:1})]),_:1}),e(o,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(Y,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[u(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},$t=Ke(jl,[["__scopeId","data-v-d9b3c4f4"]]);const Yl={__name:"AddMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const _=be(),n=l,s=I(()=>n.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(h,C)=>(r(),X(j,null,[e(se,{style:F(s.value.dividerFirst)},null,8,["style"]),e(re,{style:F(s.value.listItem)},{default:t(()=>[u("建立動態")]),_:1},8,["style"]),e(se,{style:F(s.value.divider)},null,8,["style"]),e(re,{style:F(s.value.listItem)},{default:t(()=>[u("建立限動")]),_:1},8,["style"]),e(se,{style:F(s.value.divider)},null,8,["style"]),a(_).ROLE===a(Ae).CLUB?(r(),X(j,{key:0},[e($t,{isBtn:!1,style:F(s.value.listItem),"is-mobile":l.isMobile},null,8,["style","is-mobile"]),e(se,{style:F(s.value.dividerLast)},null,8,["style"])],64)):ee("",!0)],64))}},bt=Ke(Yl,[["__scopeId","data-v-3e9fbb87"]]),xt={__name:"SettingsMenuOther",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const _=l,n=I(()=>_.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(s,h)=>(r(),X(j,null,[e(se,{style:F(n.value.dividerFirst)},null,8,["style"]),e(re,{style:F(n.value.listItem)},{default:t(()=>[u("檢舉")]),_:1},8,["style"]),e(se,{style:F(n.value.divider)},null,8,["style"]),e(re,{style:F(n.value.listItem)},{default:t(()=>[u("分享檔案")]),_:1},8,["style"]),e(se,{style:F(n.value.dividerLast)},null,8,["style"])],64))}},tt={__name:"FollowNumber",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){return(_,n)=>(r(),y(o,{cols:"12"},{default:t(()=>[l.routeUser.ROLE===a(Ae).CLUB?(r(),y($,{key:0},{default:t(()=>[e(o,{cols:"4",style:{"background-color":""}}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(U(l.routeUser.MAKE_POST.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("貼文")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(U(l.routeUser.MAKE_EVENTS_ID.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("活動")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(U(l.routeUser.FANS.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("粉絲")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(U(l.routeUser.FOLLOW.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("追蹤")]),_:1})]),_:1})]),_:1})]),_:1})):(r(),y($,{key:1},{default:t(()=>[e(o,{cols:"8",style:{"background-color":""}}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(U(l.routeUser.FANS.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("粉絲")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(U(l.routeUser.FOLLOW.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("追蹤")]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}))}};const ql={__name:"EditClub",setup(l){var ge;const{apiAuth:_}=Ge(),n=ut(),s=be(),{xs:h}=Oe();I(()=>h.value);const C=it(),x=P(!1),g=()=>{x.value=!1,pe({values:{realName:s.REAL_NAME,emailUB:s.EMAIL_UB,clubTh:s.CLUB_TH,clubCategory:s.CLUB_CATEGORY,clubCoreMember:D.value,describe:s.DESCRIBE}}),b.value.deleteFileRecord()},A=(O,T)=>{R.fields.value[T].value.USER=O},D=P([]);for(const O in s.CLUB_CORE_MEMBER)D.value.push({USER:((ge=s.CLUB_CORE_MEMBER[O].USER)==null?void 0:ge.USER_NAME)||"",ROLE:s.CLUB_CORE_MEMBER[O].ROLE});const p=P([]),m=P([]),b=P(null),c={items:["學術","學藝","音樂","康樂","服務","體育","康輔","聯誼","其他"]},E=P(""),K=async O=>{var T,q;try{const{data:S}=await _.get("/users/getUser",{params:{search:R.fields.value[O].value.USER,role:1}});E.value=S.result.data}catch(S){console.log(S);const B=((q=(T=S==null?void 0:S.response)==null?void 0:T.data)==null?void 0:q.message)||"發生錯誤，請稍後再試";n({text:B,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},v=vt({realName:me().required("「姓名/社團名」必填").max(6,"「姓名/社團名」長度不符"),emailUB:me().max(40,"「備用信箱」長度不符").test("isEmail","「備用信箱」格式錯誤",O=>O?Ol.isEmail(O):!0),clubTh:Le().required("「社團屆數」必填").typeError("「社團屆數」必須是數字"),clubCoreMember:Xe(vt({USER:me().required("「用戶名稱」必填"),ROLE:me().required("「幹部職稱」必填").max(5,"「幹部職稱」長度不符").min(2,"「幹部職稱」長度不符")})).test("role","必須要有社長和副社長",O=>O.filter(T=>T.ROLE==="社長").length===1&&O.filter(T=>T.ROLE==="副社長").length===1).test("user","幹部不可重複",O=>{const T=O.map(q=>q.USER);return new Set(T).size===T.length}),clubCategory:me().required("「社團類別」必填").min(2,"「社團類別」不符").max(2,"「社團類別」不符"),describe:me().max(50,"「社團類別」不符")}),{handleSubmit:H,isSubmitting:te,errors:ne,resetForm:pe}=wt({validationSchema:v,initialValues:{realName:s.REAL_NAME,emailUB:s.EMAIL_UB,clubTh:s.CLUB_TH,clubCategory:s.CLUB_CATEGORY,clubCoreMember:D.value,describe:s.DESCRIBE}}),ve=oe("realName"),M=oe("nickName"),le=oe("emailUB"),Z=oe("clubTh"),R=Et("clubCoreMember"),ae=oe("clubCategory"),k=oe("describe"),Q=()=>{R.push({USER:"",ROLE:""})},z=O=>{R.remove(O)},ce=H(async O=>{var T,q,S;if(!((T=p.value[0])!=null&&T.error))try{const B=new FormData;B.append("USER_NAME",s.USER_NAME),B.append("REAL_NAME",O.realName),B.append("NICK_NAME",M.value.value||O.realName),B.append("EMAIL_UB",O.emailUB),B.append("CLUB_TH",O.clubTh),B.append("CLUB_CATEGORY",O.clubCategory);for(const G in O.clubCoreMember)B.append(`CLUB_CORE_MEMBER[${G}][USER]`,O.clubCoreMember[G].USER),B.append(`CLUB_CORE_MEMBER[${G}][ROLE]`,O.clubCoreMember[G].ROLE);B.append("DESCRIBE",O.describe),p.value.length>0&&B.append("IMAGE",p.value[0].file),await _.patch("/users/edit",B),n({text:"編輯成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),C.emit("updateUser")}catch(B){const G=((S=(q=B==null?void 0:B.response)==null?void 0:q.data)==null?void 0:S.message)||"發生錯誤，請稍後再試";n({text:G,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return C.on("updateUserOk",async()=>{g()}),(O,T)=>{const q=Nt("VueFileAgent");return r(),y(Ze,{modelValue:x.value,"onUpdate:modelValue":T[7]||(T[7]=S=>x.value=S),onKeydown:Cl(g,["esc"])},{activator:t(({props:S})=>[e(Y,_e({color:"#444",style:{"font-weight":"900",width:"100%"},dark:""},S),{default:t(()=>[u("編輯社團檔案")]),_:2},1040)]),default:t(()=>[e(He,{style:{"border-radius":"15px","max-width":"400px",margin:"auto",width:"100%"}},{default:t(()=>[e(Ft,{dark:"",color:"#333"},{default:t(()=>[e(Y,{icon:"",dark:"",onClick:g},{default:t(()=>[e(Ee,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:1}),e(Dt,null,{default:t(()=>[u("編輯檔案")]),_:1}),e(Je),e(zt)]),_:1}),e(Ne,null,{default:t(()=>[e(Lt,{disabled:a(te),onSubmit:_t(a(ce),["prevent"])},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(q,{modelValue:p.value,"onUpdate:modelValue":T[0]||(T[0]=S=>p.value=S),rawModelValue:m.value,"onUpdate:rawModelValue":T[1]||(T[1]=S=>m.value=S),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",ref_key:"fileAgent",ref:b,color:"#25ECE0"},null,8,["modelValue","rawModelValue"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(ve).value.value,"onUpdate:modelValue":T[2]||(T[2]=S=>a(ve).value.value=S),label:"社團名稱","error-messages":a(ve).errorMessage.value,maxlength:"6",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(s).ROLE===3?(r(),y(fe,{key:0,modelValue:a(Z).value.value,"onUpdate:modelValue":T[3]||(T[3]=S=>a(Z).value.value=S),"error-messages":a(Z).errorMessage.value,maxlength:"3",counter:"",color:"#25ECE0",label:"社團屆數",variant:"outlined"},null,8,["modelValue","error-messages"])):ee("",!0)]),_:1}),e(o,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(s).ROLE===3?(r(),y(Qe,{key:0,modelValue:a(ae).value.value,"onUpdate:modelValue":T[4]||(T[4]=S=>a(ae).value.value=S),":error-messages":a(ae).errorMessage.value,items:c.items,label:"社團類別",color:"#25ECE0",variant:"outlined"},null,8,["modelValue",":error-messages","items"])):ee("",!0)]),_:1}),e(o,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[e(Nl,{style:{color:"#FF8484"}},{default:t(()=>[u(U(a(ne).clubCoreMember),1)]),_:1})]),_:1}),(r(!0),X(j,null,Fe(a(R).fields.value,(S,B)=>(r(),y(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"},key:S.key},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"5"},{default:t(()=>[a(s).ROLE===3?(r(),y(fe,{key:0,modelValue:S.value.ROLE,"onUpdate:modelValue":G=>S.value.ROLE=G,"error-messages":a(ne)[`clubCoreMember[${B}].ROLE`],label:"幹部職稱",variant:"outlined",color:"#25ECE0",density:"compact"},null,8,["modelValue","onUpdate:modelValue","error-messages"])):ee("",!0)]),_:2},1024),e(o,{cols:"5"},{default:t(()=>[a(s).ROLE===3?(r(),y(fe,{key:0,modelValue:S.value.USER,"onUpdate:modelValue":G=>S.value.USER=G,"error-messages":a(ne)[`clubCoreMember[${B}].USER`],label:"用戶名稱",variant:"outlined",density:"compact",color:"#25ECE0",onInput:G=>K(B),id:"clubCoreMember_user"+B},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","id"])):ee("",!0),e(Me,{activator:"#clubCoreMember_user"+B},{default:t(()=>[e(Ve,{style:{"max-height":"300px","overflow-y":"auto"}},{default:t(()=>[S.value.USER?(r(!0),X(j,{key:0},Fe(E.value,G=>(r(),y(re,{key:G.USER_NAME,onClick:Se=>A(G.USER_NAME,B)},{default:t(()=>[e($,{style:{margin:"5px"}},{default:t(()=>[e(o,{cols:"5",class:"justify-center",style:{padding:"8px"}},{default:t(()=>[e(ke,{size:"35"},{default:t(()=>[e(De,{src:G.IMAGE,cover:""},null,8,["src"])]),_:2},1024)]),_:2},1024),e(o,{cols:"7",class:"justify-center align-center"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[u(U(G.USER_NAME),1)]),_:2},1024),e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[u(U(G.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(se)]),_:2},1032,["onClick"]))),128)):(r(),y(re,{key:1},{default:t(()=>[e(Bt,null,{default:t(()=>[u("無搜尋結果")]),_:1})]),_:1}))]),_:2},1024)]),_:2},1032,["activator"])]),_:2},1024),e(o,{cols:"1",style:{"justify-content":"start","align-items":"center"}},{default:t(()=>[B===0?(r(),y(Y,{key:0,icon:"mdi-plus",onClick:Q,style:{"font-size":"1.2rem",width:"auto",height:"auto"}})):(r(),y(Y,{key:1,icon:"mdi-minus",onClick:G=>z(B),style:{"font-size":"1.2rem",width:"auto",height:"auto"}},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(o,{cols:"12",style:{"padding-top":"10px","padding-bottom":"0"}},{default:t(()=>[e(fe,{modelValue:a(le).value.value,"onUpdate:modelValue":T[5]||(T[5]=S=>a(le).value.value=S),"error-messages":a(le).errorMessage.value,maxlength:"40",counter:"",label:"備用信箱",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(Kt,{modelValue:a(k).value.value,"onUpdate:modelValue":T[6]||(T[6]=S=>a(k).value.value=S),"error-messages":a(k).errorMessage.value,maxlength:"50",counter:"",label:"社團簡介",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(Y,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:g},{default:t(()=>[u(" 取消 ")]),_:1})]),_:1}),e(o,{cols:"8",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(Y,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[u(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},lt={__name:"StatusBtn",setup(l){const _=be(),n=I(()=>Ot.ROLE===Ae.CLUB?"分享社團檔案":"分享個人檔案"),s=Pe("routeUser");return Pe("routeEvent"),(h,C)=>(r(),y(o,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(_).USER_NAME===a(s).USER_NAME?(r(),X(j,{key:0},[a(s).ROLE===a(Ae).CLUB?(r(),y(ql,{key:0,routeUser:a(s)},null,8,["routeUser"])):(r(),y(Y,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u("編輯個人檔案")]),_:1}))],64)):(r(),y(Y,{key:1,color:"#1BBCA9",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u("追蹤")]),_:1}))]),_:1}),e(o,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(_).USER_NAME===a(s).USER_NAME?(r(),y(Y,{key:0,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u(U(n.value),1)]),_:1})):(r(),y(Y,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u("發送訊息")]),_:1}))]),_:1}),e(o,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[e(Y,{color:"#FF9900",style:{color:"#fff","font-weight":"900",width:"100%"}},{default:t(()=>[u("榮譽分數 "+U(a(s).SCORES)+" 分",1)]),_:1})]),_:1})]),_:1})]),_:1}))}};const Wl={class:"d-flex justify-space-around"},Xl={__name:"EventMenu",props:{isMobile:{type:Boolean,default:!1,required:!1},itemId:{type:String,default:"",required:!0},joinEvent:{type:Boolean,default:!1,required:!1}},setup(l){rt(),be();const{apiAuth:_}=Ge(),n=it(),s=l,h=I(()=>s.isMobile?{dividerFirst:{marginTop:"5px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"5px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"0px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"0px"},listItem:{fontSize:"1rem"}}),C=P(!1),x=P(""),g=P(!1),A=P("刪除成功！"),D=()=>{C.value=!1,g.value=!1},p=async()=>{var m,b;try{await _.delete(`/events/${s.itemId}`),n.emit("updateUser"),g.value=!0}catch(c){const E=((b=(m=c==null?void 0:c.response)==null?void 0:m.data)==null?void 0:b.message)||"發生錯誤，請稍後再試";x.value=E,C.value=!0}};return(m,b)=>(r(),X(j,null,[J("div",Wl,[e(Me,null,{activator:t(({props:c})=>[e(Ee,_e(c,{class:"textHover"}),{default:t(()=>[u("mdi-dots-vertical")]),_:2},1040)]),default:t(()=>[e(Ve,null,{default:t(()=>[e(se,{style:F(h.value.dividerFirst)},null,8,["style"]),l.joinEvent?ee("",!0):(r(),X(j,{key:0},[e(re,{style:F(h.value.listItem)},{default:t(()=>[u("編輯")]),_:1},8,["style"]),e(se,{style:F(h.value.divider)},null,8,["style"])],64)),e(re,{style:F(h.value.listItem)},{default:t(()=>[u("分享")]),_:1},8,["style"]),l.joinEvent?ee("",!0):(r(),X(j,{key:1},[e(se,{style:F(h.value.divider)},null,8,["style"]),e(re,{style:F(h.value.listItem),onClick:p},{default:t(()=>[u("刪除")]),_:1},8,["style"])],64)),e(se,{style:F(h.value.dividerLast)},null,8,["style"])]),_:1})]),_:1})]),e(Tt,{InfoSwitch:C.value,InfoText:x.value,closeInfo:D,"onUpdate:InfoSwitch":b[0]||(b[0]=c=>C.value=c)},null,8,["InfoSwitch","InfoText"]),e(Tt,{InfoSwitch:g.value,InfoText:A.value,closeInfo:D,"onUpdate:InfoSwitch":b[1]||(b[1]=c=>g.value=c)},null,8,["InfoSwitch","InfoText"])],64))}},We=Ke(Xl,[["__scopeId","data-v-bd449fd4"]]);const ze=l=>(Sl("data-v-e80eb4ac"),l=l(),hl(),l),Ql={class:"me-1"},Jl=ze(()=>J("span",{class:"me-1",style:{"font-size":"0.7rem"}},"月",-1)),Zl={class:"me-1"},ea=ze(()=>J("span",{class:"me-1",style:{"font-size":"0.7rem"}},"日",-1)),ta={key:1,style:{"font-size":"1.3rem",color:"#ccc"}},la={class:"me-1"},aa=ze(()=>J("span",{class:"me-1",style:{"font-size":"0.7rem"}},"月",-1)),oa={class:"me-1"},sa=ze(()=>J("span",{class:"me-1",style:{"font-size":"0.7rem"}},"日",-1)),na=ze(()=>J("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動",-1)),ua=ze(()=>J("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動參加紀錄",-1)),ra={__name:"PostEvent",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const _=be(),n=P(""),{xs:s}=Oe(),h=I(()=>s.value),C=I(()=>m.routeEvent.slice().sort((b,c)=>{const E=b.DATE.split(" ")[0],K=c.DATE.split(" ")[0];return new Date(K)-new Date(E)})),x=I(()=>m.routeUser.TICKET_CART.slice().sort((b,c)=>{const E=b.EVENT.DATE.split(" ")[0],K=c.EVENT.DATE.split(" ")[0];return new Date(K)-new Date(E)})),g=I(()=>n.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),A=I(()=>n.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),D=I(()=>n.value==="three"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),p=b=>{const c=b.split(" "),E=c[0].split("/"),K=c[1].split(" "),v=c[2].split(" "),H=E[0],te=E[1].padStart(2,"0")+"."+E[2].padStart(2,"0"),ne=K[0].slice(0,2)+":"+K[0].slice(2),pe=v[0].slice(0,2)+":"+v[0].slice(2),ve=E[1],M=E[2],le=E[1].padStart(2,"0")+"/"+E[2].padStart(2,"0"),Z=Q=>Q.replace(/\//g,"-"),R=Q=>{const z=new Date(Q);return["日","一","二","三","四","五","六"][z.getDay()]},ae=Z(c[0]),k=R(ae);return{year:H,monthDay:te,monthDay2:le,week:k,startTime:ne,endTime:pe,month:ve,day:M}},m=l;return(b,c)=>l.routeUser.ROLE===a(Ae).CLUB?(r(),X(j,{key:0},[e(o,{cols:"12"},{default:t(()=>[e(Bl,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=E=>n.value=E),"align-tabs":"start"},{default:t(()=>[e(ct,{value:"one",class:"rounded-ts-xl me-2",style:F([{"min-width":"80px"},g.value])},{default:t(()=>[u("動態")]),_:1},8,["style"]),e(ct,{value:"two",class:"rounded-ts-xl me-2",style:F([{"min-width":"80px"},A.value])},{default:t(()=>[u("主辦活動")]),_:1},8,["style"]),e(ct,{value:"three",class:"rounded-ts-xl",style:F([{"min-width":"80px"},D.value])},{default:t(()=>[u("活動紀錄")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(se,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(wl,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=E=>n.value=E),style:{width:"100%"}},{default:t(()=>[e(At,{value:"two"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[u(U(new Date().getFullYear()),1)]),_:1}),l.routeUser.MAKE_EVENTS_ID.length!==0?(r(!0),X(j,{key:0},Fe(C.value,E=>(r(),X(j,{key:E._id},[e(o,{cols:"3",style:{background:"rgba(6, 50, 107,0)","padding-right":"0"}},{default:t(()=>[J("span",Ql,U(E.dateParts.month),1),Jl,J("span",Zl,U(E.dateParts.day),1),ea]),_:2},1024),e(o,{cols:"7",onClick:K=>b.$router.push(`/event/${E._id}`),class:"textHover"},{default:t(()=>[u(U(E.TITLE),1)]),_:2},1032,["onClick"]),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[e(Ee,null,{default:t(()=>[u("mdi-camera")]),_:1})]),_:1}),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[h.value?(r(),y(We,{key:0,isMobile:"",itemId:E._id},null,8,["itemId"])):(r(),y(We,{key:1,itemId:E._id},null,8,["itemId"]))]),_:2},1024)],64))),128)):(r(),y(o,{key:1,cols:"12"},{default:t(()=>[l.routeUser.USER_NAME===a(_).USER_NAME?(r(),y($t,{key:0})):(r(),X("div",ta,"目前無活動"))]),_:1}))]),_:1})]),_:1})]),_:1}),e(At,{value:"three"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[u(U(new Date().getFullYear()),1)]),_:1}),l.routeUser.TICKET_CART.length!==0?(r(!0),X(j,{key:0},Fe(x.value.filter(E=>E.USED===1),E=>(r(),X(j,{key:E._id},[e(o,{cols:"3",style:{background:"rgba(6, 50, 107,0)","padding-right":"0"}},{default:t(()=>[J("span",la,U(p(E.EVENT.DATE).month),1),aa,J("span",oa,U(p(E.EVENT.DATE).day),1),sa]),_:2},1024),e(o,{cols:"7",onClick:K=>b.$router.push(`/event/${E.EVENT._id}`),class:"textHover"},{default:t(()=>[u(U(E.EVENT.TITLE),1)]),_:2},1032,["onClick"]),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[e(Ee,null,{default:t(()=>[u("mdi-camera")]),_:1})]),_:1}),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[h.value?(r(),y(We,{key:0,isMobile:"",itemId:E._id,joinEvent:!0},null,8,["itemId"])):(r(),y(We,{key:1,itemId:E._id,joinEvent:!0},null,8,["itemId"]))]),_:2},1024)],64))),128)):ee("",!0),x.value.filter(E=>E.USED===1).length===0?(r(),y(o,{key:1,cols:"12"},{default:t(()=>[na]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):(r(),X(j,{key:1},[e(o,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[u(U(new Date().getFullYear()),1)]),_:1}),e(o,{cols:"12"},{default:t(()=>[ua]),_:1})],64))}},at=Ke(ra,[["__scopeId","data-v-e80eb4ac"]]),ia=J("div",{class:"mt-3",style:{color:"#ccc"}},"新增",-1),ot={__name:"TimePost",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){const _=be(),{xs:n}=Oe(),s=I(()=>n.value),h=I(()=>s.value?3:2);return(C,x)=>l.routeUser.USER_NAME===a(_).USER_NAME||l.routeUser.MAKE_EVENT.length!==0?(r(),y(o,{key:0,cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:h.value,class:"text-center"},{default:t(()=>[e(Y,{icon:"",size:"large",text:"",color:"rgba(0,0,0,0)"},{default:t(()=>[e(Ee,{style:{"font-size":"3.8rem",border:"1px solid #ccc","border-radius":"50%"},color:"#ccc "},{default:t(()=>[u("mdi-plus")]),_:1})]),_:1}),ia]),_:1},8,["cols"])]),_:1})]),_:1})):ee("",!0)}},da={style:{border:"1px solid #25ECE0",padding:"3px 10px",color:"#FF6868"}},ca={style:{"margin-right":"10px","font-weight":"900",color:"#25ECE0"}},st={__name:"SchoolName",props:{isNClubComputer:{type:Boolean,default:!1,required:!1},routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){const _=l,n=I(()=>_.isNClubComputer?{"padding-top":"0rem"}:{"padding-top":"0.6rem"});return(s,h)=>(r(),y(o,{cols:"12",style:F([{"font-size":"0.9rem"},n.value])},{default:t(()=>[J("span",da,[J("span",ca,U(l.routeUser.SCHOOL_NAME),1),J("span",null,U(l.routeUser.SCHOOL_CITY),1)])]),_:1},8,["style"]))}},ma={class:"me-3"},fa={class:"me-3",style:{"font-size":"1.05rem"}},va={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},_a={class:"me-3"},Ea={class:"me-3",style:{"font-size":"1.05rem"}},pa={__name:"PersonalClub",emits:["updateUser"],setup(l,{emit:_}){const n=be(),{xs:s,sm:h}=Oe(),C=I(()=>s.value),x=I(()=>h.value),g=_,A=()=>{g("updateUser")},D=I(()=>x.value?150:180),p=Pe("routeUser"),m=Pe("routeEvent");return(b,c)=>C.value?(r(),y(Ne,{key:0},{default:t(()=>[e($,{class:"box"},{default:t(()=>[e(o,{cols:"4",class:"d-flex justify-center"},{default:t(()=>[e(ke,{size:"115",style:{"margin-top":"15px"}},{default:t(()=>[e(De,{src:a(p).IMAGE,cover:""},null,8,["src"])]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[J("span",ma,U(a(p).NICK_NAME),1),J("span",fa,"第"+U(a(p).CLUB_TH)+"屆",1),J("span",null,[e(Y,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[u("成員")]),_:1})])]),_:1}),e(st,{routeUser:a(p)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(U(a(p).DESCRIBE),1)]),_:1}),e(tt,{routeUser:a(p)},null,8,["routeUser"])]),_:1})]),_:1}),e(lt,{routeUser:a(p)},null,8,["routeUser"]),a(p).MAKE_EVENT.length!==0?(r(),y(et,{key:0})):ee("",!0),e(ot,{routeUser:a(p)},null,8,["routeUser"]),e(at,{routeUser:a(p),routeEvent:a(m)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",va,[e(Ne,{style:{"max-width":"800px"}},{default:t(()=>[e($,{class:"box",style:{"background-color":""}},{default:t(()=>[e(o,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-center align-center"},{default:t(()=>[e(ke,{size:D.value},{default:t(()=>[e(De,{src:a(p).IMAGE,cover:""},null,8,["src"])]),_:1},8,["size"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[u(U(a(p).USER_NAME),1)]),_:1}),e(o,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0","padding-top":"0.5rem"}},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"8"},{default:t(()=>[J("span",_a,U(a(p).NICK_NAME),1),J("span",Ea,"第"+U(a(p).CLUB_TH)+"屆",1),J("span",null,[e(Y,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[u("成員")]),_:1})])]),_:1}),e(o,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(p).USER_NAME===a(n).USER_NAME?(r(),y(Ee,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[u("mdi-plus-box-outline")]),_:1})):ee("",!0),a(p).USER_NAME===a(n).USER_NAME?(r(),y(Me,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[e(bt)]),_:1})]),_:1})):ee("",!0),e(Ee,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[u("mdi-menu")]),_:1}),e(Me,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[a(p).USER_NAME===a(n).USER_NAME?(r(),y(yt,{key:0})):(r(),y(xt,{key:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(st,{routeUser:a(p)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(U(a(p).DESCRIBE),1)]),_:1}),e(tt,{routeUser:a(p)},null,8,["routeUser"])]),_:1})]),_:1}),e(lt,{onUpdateUser:A,routeUser:a(p)},null,8,["routeUser"]),a(p).MAKE_EVENT.length!==0?(r(),y(et,{key:0})):ee("",!0),e(ot,{routeUser:a(p)},null,8,["routeUser"]),e(at,{routeUser:a(p),routeEvent:a(m)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const ga={__name:"ClubMember",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const _=P(0),n=()=>{_.value++},s=l,h=I(()=>_.value%2===0?"幹部":s.routeUser.IS_CORE_MEMBER[0].NICK_NAME+"  "+s.routeUser.IS_CORE_MEMBER[0].CLUB_TH+"th "+s.routeUser.IS_CORE_MEMBER[0].ROLE);return(C,x)=>(r(),X(j,null,[l.routeUser.ROLE===a(Ae).STUDENT?(r(),y(o,{key:0,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[l.routeUser.IS_CORE_MEMBER?(r(),y(Y,{key:0,type:"button",style:{"background-color":"#FF9900",height:"auto","padding-top":"3px","padding-bottom":"3px"},onClick:n},{default:t(()=>[u(U(h.value),1)]),_:1})):(r(),y(Y,{key:1,type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[u("無社團")]),_:1}))]),_:1})):ee("",!0),l.routeUser.ROLE===a(Ae).NOT_STUDENT?(r(),y(o,{key:1,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[e(Y,{type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[u("畢業生")]),_:1})]),_:1})):ee("",!0)],64))}},Vt=Ke(ga,[["__scopeId","data-v-80d3ee6b"]]),ya={class:"me-3"},ba={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},xa={class:"me-3"},Ca={__name:"NPersonalClub",setup(l){const _=be(),{xs:n,sm:s}=Oe(),h=I(()=>n.value),C=I(()=>s.value),x=I(()=>C.value?150:180),g=Pe("routeUser"),A=Pe("routeEvent");return(D,p)=>h.value?(r(),y(Ne,{key:0},{default:t(()=>[e($,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(o,{cols:"4",class:"d-flex justify-center",style:{"padding-top":"1.2rem"}},{default:t(()=>[e(ke,{size:"115",style:{"margin-top":"15px"}},{default:t(()=>[e(De,{src:a(g).IMAGE},null,8,["src"])]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[J("span",ya,U(a(g).NICK_NAME),1)]),_:1}),e(st,{routeUser:a(g)},null,8,["routeUser"]),e(Vt,{routeUser:a(g)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(U(a(g).DESCRIBE),1)]),_:1}),e(tt,{routeUser:a(g)},null,8,["routeUser"])]),_:1})]),_:1}),e(lt,{routeUser:a(g)},null,8,["routeUser"]),e(ot,{routeUser:a(g)},null,8,["routeUser"]),e(et),e(at,{routeUser:a(g),routeEvent:a(A)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",ba,[e(Ne,{style:{"max-width":"800px"}},{default:t(()=>[e($,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(o,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-center align-center"},{default:t(()=>[e(ke,{size:x.value},{default:t(()=>[e(De,{src:a(g).IMAGE},null,8,["src"])]),_:1},8,["size"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[u(U(a(g).USER_NAME),1)]),_:1}),e(o,{cols:"8",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[J("span",xa,U(a(g).NICK_NAME),1)]),_:1}),e(o,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(g).USER_NAME===a(_).USER_NAME?(r(),y(Ee,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[u("mdi-plus-box-outline")]),_:1})):ee("",!0),a(g).USER_NAME===a(_).USER_NAME?(r(),y(Me,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[e(bt)]),_:1})]),_:1})):ee("",!0),e(Ee,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[u("mdi-menu")]),_:1}),e(Me,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[a(g).USER_NAME===a(_).USER_NAME?(r(),y(yt,{key:0})):(r(),y(xt,{key:1}))]),_:1})]),_:1})]),_:1}),e(st,{isNClubComputer:"",routeUser:a(g)},null,8,["routeUser"]),e(Vt,{routeUser:a(g)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(U(a(g).DESCRIBE),1)]),_:1}),e(tt,{routeUser:a(g)},null,8,["routeUser"])]),_:1})]),_:1}),e(lt,{routeUser:a(g)},null,8,["routeUser"]),e(ot,{routeUser:a(g)},null,8,["routeUser"]),e(et),e(at,{routeUser:a(g),routeEvent:a(A)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const Sa={__name:"PersonalView",setup(l){const{apiAuth:_}=Ge(),n=be(),s=rt(),h=Ot(),C=ut(),x=it(),{xs:g}=Oe(),A=I(()=>g.value),D=()=>{s.go(-1)};x.on("updateUser",async()=>{await n.getProfile(),await b(),x.emit("updateUserOk")});const p=P([]),m=P({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[],CLUB_CORE_MEMBER:[]});Mt("routeUser",m),Mt("routeEvent",p);const b=async()=>{var E,K;try{const{data:v}=await _.get("/users/"+h.params.USER_NAME);m.value.EMAIL=v.result.EMAIL,m.value.ROLE=v.result.ROLE,m.value.SCHOOL_NAME=v.result.SCHOOL_NAME,m.value.SCHOOL_CITY=v.result.SCHOOL_CITY,m.value.USER_NAME=v.result.USER_NAME,m.value.NICK_NAME=v.result.NICK_NAME,m.value.CLUB_TH=v.result.CLUB_TH,m.value.CLUB_CATEGORY=v.result.CLUB_CATEGORY,m.value.IMAGE=v.result.IMAGE,m.value.TICKET_CART=v.result.TICKET_CART,m.value.SCORES=v.result.SCORES,m.value.NOTIFY=v.result.NOTIFY,m.value.KEEP_POST=v.result.KEEP_POST,m.value.KEEP_EVENT=v.result.KEEP_EVENT,m.value.FANS=v.result.FANS,m.value.FOLLOW=v.result.FOLLOW,m.value.IS_STUDENT=v.result.IS_STUDENT,m.value.IS_ABLE=v.result.IS_ABLE,m.value.IS_ADMIN=v.result.IS_ADMIN,m.value.DESCRIBE=v.result.DESCRIBE,m.value.MAKE_EVENT=v.result.MAKE_EVENT,m.value.MAKE_POST=v.result.MAKE_POST,m.value.MAKE_TIME_POST=v.result.MAKE_TIME_POST,m.value.GO_EVENT=v.result.GO_EVENT,m.value.BE_MARK=v.result.BE_MARK,m.value.IS_CORE_MEMBER=v.result.IS_CORE_MEMBER,m.value.MAKE_EVENTS_ID=v.result.MAKE_EVENTS_ID,document.title=`學生社團 | ${m.value.NICK_NAME}（${m.value.USER_NAME}）`,await c()}catch(v){console.log(v);const H=((K=(E=v==null?void 0:v.response)==null?void 0:E.data)==null?void 0:K.message)||"發生錯誤，請稍後再試";C({text:H,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}}),s.push("/")}},c=async()=>{var E,K;try{const v=m.value.MAKE_EVENTS_ID.map(te=>_.get("/events/"+te)),H=await Promise.all(v);p.value=H.map(te=>{const ne=te.data.result,[pe,ve,M]=ne.DATE.split(" "),[le,Z,R]=pe.split("/"),[ae,k]=[ve.slice(0,2),ve.slice(2)],[Q,z]=[M.slice(0,2),M.slice(2)];return ne.dateParts={year:le,month:Z.padStart(2,"0"),day:R.padStart(2,"0"),hourStart:ae.padStart(2,"0"),minuteStart:k.padStart(2,"0"),hourEnd:Q.padStart(2,"0"),minuteEnd:z.padStart(2,"0")},ne})}catch(v){console.log(v);const H=((K=(E=v==null?void 0:v.response)==null?void 0:E.data)==null?void 0:K.message)||"發生錯誤，請稍後再試";C({text:H,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return kt(async()=>{await b()}),(E,K)=>(r(),X(j,null,[A.value?(r(),y(Il,{key:0},{default:t(()=>[e(Ne,{class:"d-flex align-center",style:{}},{default:t(()=>[m.value.USER_NAME!==a(n).USER_NAME?(r(),y(Y,{key:0,icon:"mdi-chevron-left",style:{"font-size":"1.4rem"},onClick:D})):ee("",!0),e(Tl,{class:"text-h5 ms-5"},{default:t(()=>[u(U(m.value.USER_NAME),1)]),_:1}),m.value.USER_NAME===a(n).USER_NAME?(r(),y(Ze,{key:1,"max-width":"400px"},{activator:t(({props:v})=>[e(Y,_e(v,{icon:"mdi-plus-box-outline",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:v})=>[e(He,{style:{"border-radius":"15px"}},{default:t(()=>[e(It,{class:"text-center"},{default:t(()=>[e(bt,{"is-mobile":""})]),_:1}),e(Je),e(Y,{text:"Close Dialog",flat:!0,onClick:H=>v.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(Ee,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})):ee("",!0),e(Ze,{"max-width":"400px"},{activator:t(({props:v})=>[e(Y,_e(v,{icon:"mdi-menu",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:v})=>[e(He,{style:{"border-radius":"15px"},class:"text-center"},{default:t(()=>[e(It,null,{default:t(()=>[m.value.USER_NAME===a(n).USER_NAME?(r(),y(yt,{key:0,"is-mobile":""})):(r(),y(xt,{key:1,"is-mobile":""}))]),_:1}),e(Je),e(Y,{text:"Close Dialog",flat:!0,onClick:H=>v.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(Ee,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1})]),_:1})):ee("",!0),m.value.ROLE!==a(Ae).CLUB?(r(),y(Ca,{key:1,routeUser:m.value,routeEvent:p.value},null,8,["routeUser","routeEvent"])):(r(),y(pa,{key:2,routeUser:m.value,routeEvent:p.value},null,8,["routeUser","routeEvent"]))],64))}},ja=Ke(Sa,[["__scopeId","data-v-ef9aec41"]]);export{ja as default};
