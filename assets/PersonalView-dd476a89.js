import{p as ut,B as D,o as I,L as a,aq as Ut,ar as mt,as as Ht,at as Gt,au as jt,av as Yt,h as pt,aw as qt,ax as Le,ay as ft,az as Wt,aA as Xt,R as xe,aB as Ge,aC as Qt,s as gt,U as _e,v as e,J as j,a7 as Ee,ac as ke,M as pe,aD as Jt,aE as Zt,G as u,aF as el,aG as Rt,aH as tl,aI as ll,aJ as al,aK as ol,aL as sl,S as kt,aM as nl,aN as ul,aO as Ct,aP as rl,aQ as il,ah as St,am as dl,aR as cl,aS as ml,aT as fl,w as vl,aU as _l,a as El,aV as pl,r as gl,t as ht,Q as rt,y as it,x as be,D as r,H as X,N as L,F as t,K as te,X as Ye,A as Oe,a2 as vt,a4 as ve,a3 as Fe,aW as Qe,aX as yl,C as Nt,E as y,O as Y,Z as je,ab as Ze,a6 as _t,I as De,Y as Pe,P as R,aY as bl,_ as xl,a9 as et,W as Cl,z as Ot,ad as Ke,T as Z,$ as Sl,a0 as hl,a8 as Mt,aa as It}from"./index-184141ce.js";import{u as dt}from"./mitt-43e253ae.js";import{V as Ml,U as Ae}from"./VDatePicker-96803c38.js";import{V as ne}from"./VDivider-549fee90.js";import{V as re,a as Bt}from"./VListItem-f1e1de59.js";import{u as wt,a as se,b as Et,V as Lt}from"./vee-validate.esm-7aed1c46.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";import{b as Ft,c as Dt,V as Il,a as Tl}from"./VAppBarTitle-c08b9bf3.js";import{V as Ne}from"./VContainer-2e973843.js";import{V as $}from"./VRow-9f7ad9d9.js";import{V as o}from"./VCol-5b4ee2b8.js";import{V as Me,a as Pt}from"./VMenu-792513ad.js";import{m as Al,u as Vl,a as Ul,b as Rl,V as Je}from"./VSelect-9f841541.js";import{u as kl,t as We,V as Ve,a as Nl}from"./VList-910e3020.js";import{v as Ol}from"./index-f15f191b.js";import{_ as Tt}from"./InfoAll-437be714.js";import{V as Bl,a as ct}from"./VTabs-4a93587f.js";import{a as At,V as wl}from"./VWindowItem-e75e5bdc.js";import{B as tt}from"./BlankLine-bba8f318.js";import"./ssrBoot-c0e0a555.js";import"./VSlideGroup-1b6d7cf4.js";const Ll=(l,_,n)=>l==null||_==null?-1:l.toString().toLocaleLowerCase().indexOf(_.toString().toLocaleLowerCase()),Fl=ut({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Dl(l,_,n){var p;const s=[],S=(n==null?void 0:n.default)??Ll,C=n!=null&&n.filterKeys?mt(n.filterKeys):!1,x=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(l!=null&&l.length))return s;e:for(let V=0;V<l.length;V++){const[F,g=F]=mt(l[V]),c={},b={};let d=-1;if(_&&!(n!=null&&n.noFilter)){if(typeof F=="object"){const m=C||Object.keys(g);for(const H of m){const le=Ht(g,H,g),ue=(p=n==null?void 0:n.customKeyFilter)==null?void 0:p[H];if(d=ue?ue(le,_,F):S(le,_,F),d!==-1&&d!==!1)ue?c[H]=d:b[H]=d;else if((n==null?void 0:n.filterMode)==="every")continue e}}else d=S(F,_,F),d!==-1&&d!==!1&&(b.title=d);const E=Object.keys(b).length,P=Object.keys(c).length;if(!E&&!P||(n==null?void 0:n.filterMode)==="union"&&P!==x&&!E||(n==null?void 0:n.filterMode)==="intersection"&&(P!==x||!E))continue}s.push({index:V,matches:{...b,...c}})}return s}function Pl(l,_,n,s){const S=D([]),C=D(new Map),x=I(()=>s!=null&&s.transform?a(_).map(V=>[V,s.transform(V)]):a(_));Ut(()=>{const V=typeof n=="function"?n():a(n),F=typeof V!="string"&&typeof V!="number"?"":String(V),g=Dl(x.value,F,{customKeyFilter:{...l.customKeyFilter,...a(s==null?void 0:s.customKeyFilter)},default:l.customFilter,filterKeys:l.filterKeys,filterMode:l.filterMode,noFilter:l.noFilter}),c=a(_),b=[],d=new Map;g.forEach(E=>{let{index:P,matches:m}=E;const H=c[P];b.push(H),d.set(H.value,m)}),S.value=b,C.value=d});function p(V){return C.value.get(V.value)}return{filteredItems:S,filteredMatches:C,getMatches:p}}function Kl(l,_,n){if(_==null)return l;if(Array.isArray(_))throw new Error("Multiple matches is not implemented");return typeof _=="number"&&~_?e(j,null,[e("span",{class:"v-combobox__unmask"},[l.substr(0,_)]),e("span",{class:"v-combobox__mask"},[l.substr(_,n)]),e("span",{class:"v-combobox__unmask"},[l.substr(_+n)])]):l}const zl=ut({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Fl({filterKeys:["title"]}),...Al({hideNoData:!0,returnObject:!0}),...Gt(jt({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Yt({transition:!1})},"VCombobox"),$l=pt()({name:"VCombobox",props:zl(),emits:{"update:focused":l=>!0,"update:modelValue":l=>!0,"update:search":l=>!0,"update:menu":l=>!0},setup(l,_){var Ue;let{emit:n,slots:s}=_;const{t:S}=qt(),C=D(),x=Le(!1),p=Le(!0),V=Le(!1),F=D(),g=D(),c=ft(l,"menu"),b=I({get:()=>c.value,set:i=>{var N;c.value&&!i&&((N=F.value)!=null&&N.ΨopenChildren)||(c.value=i)}}),d=Le(-1);let E=!1;const P=I(()=>{var i;return(i=C.value)==null?void 0:i.color}),m=I(()=>b.value?l.closeText:l.openText),{items:H,transformIn:le,transformOut:ue}=kl(l),{textColorClasses:ye,textColorStyles:me}=Wt(P),M=ft(l,"modelValue",[],i=>le(mt(i)),i=>{const N=ue(i);return l.multiple?N:N[0]??null}),ee=Xt(),oe=Le(l.multiple?"":((Ue=M.value[0])==null?void 0:Ue.title)??""),O=I({get:()=>oe.value,set:i=>{var N;if(oe.value=i??"",l.multiple||(M.value=[We(l,i)]),i&&l.multiple&&((N=l.delimiters)!=null&&N.length)){const q=i.split(new RegExp(`(?:${l.delimiters.join("|")})+`));q.length>1&&(q.forEach(de=>{de=de.trim(),de&&ie(We(l,de))}),oe.value="")}i||(d.value=-1),p.value=!i}}),Q=I(()=>typeof l.counterValue=="function"?l.counterValue(M.value):typeof l.counterValue=="number"?l.counterValue:l.multiple?M.value.length:O.value.length);xe(oe,i=>{E?Ge(()=>E=!1):x.value&&!b.value&&(b.value=!0),n("update:search",i)}),xe(M,i=>{var N;l.multiple||(oe.value=((N=i[0])==null?void 0:N.title)??"")});const{filteredItems:k,getMatches:J}=Pl(l,H,()=>p.value?"":O.value),K=I(()=>l.hideSelected?k.value.filter(i=>!M.value.some(N=>N.value===i.value)):k.value),fe=I(()=>M.value.map(i=>i.value)),ge=I(()=>{var N;return(l.autoSelectFirst===!0||l.autoSelectFirst==="exact"&&O.value===((N=K.value[0])==null?void 0:N.title))&&K.value.length>0&&!p.value&&!V.value}),B=I(()=>l.hideNoData&&!K.value.length||l.readonly||(ee==null?void 0:ee.isReadonly.value)),T=D(),{onListScroll:ae,onListKeydown:h}=Vl(T,C);function A(i){E=!0,l.openOnClear&&(b.value=!0)}function G(){B.value||(b.value=!0)}function Ce(i){B.value||(x.value&&(i.preventDefault(),i.stopPropagation()),b.value=!b.value)}function Ie(i){var de;if(tl(i)||l.readonly||ee!=null&&ee.isReadonly.value)return;const N=C.value.selectionStart,q=M.value.length;if((d.value>-1||["Enter","ArrowDown","ArrowUp"].includes(i.key))&&i.preventDefault(),["Enter","ArrowDown"].includes(i.key)&&(b.value=!0),["Escape"].includes(i.key)&&(b.value=!1),["Enter","Escape","Tab"].includes(i.key)&&(ge.value&&["Enter","Tab"].includes(i.key)&&ie(k.value[0]),p.value=!0),i.key==="ArrowDown"&&ge.value&&((de=T.value)==null||de.focus("next")),!!l.multiple){if(["Backspace","Delete"].includes(i.key)){if(d.value<0){i.key==="Backspace"&&!O.value&&(d.value=q-1);return}const U=d.value,ce=M.value[d.value];ce&&!ce.props.disabled&&ie(ce,!1),d.value=U>=q-1?q-2:U}if(i.key==="ArrowLeft"){if(d.value<0&&N>0)return;const U=d.value>-1?d.value-1:q-1;M.value[U]?d.value=U:(d.value=-1,C.value.setSelectionRange(O.value.length,O.value.length))}if(i.key==="ArrowRight"){if(d.value<0)return;const U=d.value+1;M.value[U]?d.value=U:(d.value=-1,C.value.setSelectionRange(0,0))}i.key==="Enter"&&O.value&&(ie(We(l,O.value)),O.value="")}}function Te(){var i;x.value&&(p.value=!0,(i=C.value)==null||i.focus())}function ie(i){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(l.multiple){const q=M.value.findIndex(U=>l.valueComparator(U.value,i.value)),de=N??!~q;if(~q){const U=de?[...M.value,i]:[...M.value];U.splice(q,1),M.value=U}else de&&(M.value=[...M.value,i]);l.clearOnSelect&&(O.value="")}else{const q=N!==!1;M.value=q?[i]:[],oe.value=q?i.title:"",Ge(()=>{b.value=!1,p.value=!0})}}function Se(i){x.value=!0,setTimeout(()=>{V.value=!0})}function he(i){V.value=!1}function Be(i){(i==null||i===""&&!l.multiple)&&(M.value=[])}return xe(x,(i,N)=>{i||i===N||(d.value=-1,b.value=!1,ge.value&&!V.value&&!M.value.some(q=>{let{value:de}=q;return de===K.value[0].value})?ie(K.value[0]):l.multiple&&O.value&&ie(We(l,O.value)))}),xe(b,()=>{if(!l.hideSelected&&b.value&&M.value.length){const i=K.value.findIndex(N=>M.value.some(q=>l.valueComparator(q.value,N.value)));Qt&&window.requestAnimationFrame(()=>{var N;i>=0&&((N=g.value)==null||N.scrollToIndex(i))})}}),xe(K,(i,N)=>{x.value&&(!i.length&&l.hideNoData&&(b.value=!1),!N.length&&i.length&&(b.value=!0))}),gt(()=>{const i=!!(l.chips||s.chip),N=!!(!l.hideNoData||K.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),q=M.value.length>0,de=_e.filterProps(l);return e(_e,Ee({ref:C},de,{modelValue:O.value,"onUpdate:modelValue":[U=>O.value=U,Be],focused:x.value,"onUpdate:focused":U=>x.value=U,validationValue:M.externalValue,counterValue:Q.value,dirty:q,class:["v-combobox",{"v-combobox--active-menu":b.value,"v-combobox--chips":!!l.chips,"v-combobox--selection-slot":!!s.selection,"v-combobox--selecting-index":d.value>-1,[`v-combobox--${l.multiple?"multiple":"single"}`]:!0},l.class],style:l.style,readonly:l.readonly,placeholder:q?void 0:l.placeholder,"onClick:clear":A,"onMousedown:control":G,onKeydown:Ie}),{...s,default:()=>e(j,null,[e(Me,Ee({ref:F,modelValue:b.value,"onUpdate:modelValue":U=>b.value=U,activator:"parent",contentClass:"v-combobox__content",disabled:B.value,eager:l.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:l.transition,onAfterLeave:Te},l.menuProps),{default:()=>[N&&e(Ve,Ee({ref:T,selected:fe.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:U=>U.preventDefault(),onKeydown:h,onFocusin:Se,onFocusout:he,onScrollPassive:ae,tabindex:"-1","aria-live":"polite",color:l.itemColor??l.color},l.listProps),{default:()=>{var U,ce,z;return[(U=s["prepend-item"])==null?void 0:U.call(s),!K.value.length&&!l.hideNoData&&(((ce=s["no-data"])==null?void 0:ce.call(s))??e(re,{title:S(l.noDataText)},null)),e(Ul,{ref:g,renderless:!0,items:K.value},{default:v=>{var qe;let{item:W,index:f,itemRef:w}=v;const Re=Ee(W.props,{ref:w,key:f,active:ge.value&&f===0?!0:void 0,onClick:()=>ie(W,null)});return((qe=s.item)==null?void 0:qe.call(s,{item:W,index:f,props:Re}))??e(re,Re,{prepend:He=>{let{isSelected:we}=He;return e(j,null,[l.multiple&&!l.hideSelected?e(Rl,{key:W.value,modelValue:we,ripple:!1,tabindex:"-1"},null):void 0,W.props.prependAvatar&&e(ke,{image:W.props.prependAvatar},null),W.props.prependIcon&&e(pe,{icon:W.props.prependIcon},null)])},title:()=>{var He,we;return p.value?W.title:Kl(W.title,(He=J(W))==null?void 0:He.title,((we=O.value)==null?void 0:we.length)??0)}})}}),(z=s["append-item"])==null?void 0:z.call(s)]}})]}),M.value.map((U,ce)=>{function z(w){w.stopPropagation(),w.preventDefault(),ie(U,!1)}const v={"onClick:close":z,onMousedown(w){w.preventDefault(),w.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},W=i?!!s.chip:!!s.selection,f=W?Jt(i?s.chip({item:U,index:ce,props:v}):s.selection({item:U,index:ce})):void 0;if(!(W&&!f))return e("div",{key:U.value,class:["v-combobox__selection",ce===d.value&&["v-combobox__selection--selected",ye.value]],style:ce===d.value?me.value:{}},[i?s.chip?e(Zt,{key:"chip-defaults",defaults:{VChip:{closable:l.closableChips,size:"small",text:U.title}}},{default:()=>[f]}):e(Pt,Ee({key:"chip",closable:l.closableChips,size:"small",text:U.title,disabled:U.props.disabled},v),null):f??e("span",{class:"v-combobox__selection-text"},[U.title,l.multiple&&ce<M.value.length-1&&e("span",{class:"v-combobox__selection-comma"},[u(",")])])])})]),"append-inner":function(){var v;for(var U=arguments.length,ce=new Array(U),z=0;z<U;z++)ce[z]=arguments[z];return e(j,null,[(v=s["append-inner"])==null?void 0:v.call(s,...ce),(!l.hideNoData||l.items.length)&&l.menuIcon?e(pe,{class:"v-combobox__menu-icon",icon:l.menuIcon,onMousedown:Ce,onClick:el,"aria-label":S(m.value),title:S(m.value)},null):void 0])}})}),Rt({isFocused:x,isPristine:p,menu:b,search:O,selectionIndex:d,filteredItems:k,select:ie},C)}});const Hl=ut({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:l=>!isNaN(parseFloat(l))},maxRows:{type:[Number,String],validator:l=>!isNaN(parseFloat(l))},suffix:String,modelModifiers:Object,...ll(),...al()},"VTextarea"),Kt=pt()({name:"VTextarea",directives:{Intersect:ol},inheritAttrs:!1,props:Hl(),emits:{"click:control":l=>!0,"mousedown:control":l=>!0,"update:focused":l=>!0,"update:modelValue":l=>!0},setup(l,_){let{attrs:n,emit:s,slots:S}=_;const C=ft(l,"modelValue"),{isFocused:x,focus:p,blur:V}=sl(l),F=I(()=>typeof l.counterValue=="function"?l.counterValue(C.value):(C.value||"").toString().length),g=I(()=>{if(n.maxlength)return n.maxlength;if(!(!l.counter||typeof l.counter!="number"&&typeof l.counter!="string"))return l.counter});function c(k,J){var K,fe;!l.autofocus||!k||(fe=(K=J[0].target)==null?void 0:K.focus)==null||fe.call(K)}const b=D(),d=D(),E=Le(""),P=D(),m=I(()=>l.persistentPlaceholder||x.value||l.active);function H(){var k;P.value!==document.activeElement&&((k=P.value)==null||k.focus()),x.value||p()}function le(k){H(),s("click:control",k)}function ue(k){s("mousedown:control",k)}function ye(k){k.stopPropagation(),H(),Ge(()=>{C.value="",fl(l["onClick:clear"],k)})}function me(k){var K;const J=k.target;if(C.value=J.value,(K=l.modelModifiers)!=null&&K.trim){const fe=[J.selectionStart,J.selectionEnd];Ge(()=>{J.selectionStart=fe[0],J.selectionEnd=fe[1]})}}const M=D(),ee=D(+l.rows),oe=I(()=>["plain","underlined"].includes(l.variant));Ut(()=>{l.autoGrow||(ee.value=+l.rows)});function O(){l.autoGrow&&Ge(()=>{if(!M.value||!d.value)return;const k=getComputedStyle(M.value),J=getComputedStyle(d.value.$el),K=parseFloat(k.getPropertyValue("--v-field-padding-top"))+parseFloat(k.getPropertyValue("--v-input-padding-top"))+parseFloat(k.getPropertyValue("--v-field-padding-bottom")),fe=M.value.scrollHeight,ge=parseFloat(k.lineHeight),B=Math.max(parseFloat(l.rows)*ge+K,parseFloat(J.getPropertyValue("--v-input-control-height"))),T=parseFloat(l.maxRows)*ge+K||1/0,ae=_l(fe??0,B,T);ee.value=Math.floor((ae-K)/ge),E.value=vl(ae)})}kt(O),xe(C,O),xe(()=>l.rows,O),xe(()=>l.maxRows,O),xe(()=>l.density,O);let Q;return xe(M,k=>{k?(Q=new ResizeObserver(O),Q.observe(M.value)):Q==null||Q.disconnect()}),nl(()=>{Q==null||Q.disconnect()}),gt(()=>{const k=!!(S.counter||l.counter||l.counterValue),J=!!(k||S.details),[K,fe]=ul(n),{modelValue:ge,...B}=Ct.filterProps(l),T=rl(l);return e(Ct,Ee({ref:b,modelValue:C.value,"onUpdate:modelValue":ae=>C.value=ae,class:["v-textarea v-text-field",{"v-textarea--prefixed":l.prefix,"v-textarea--suffixed":l.suffix,"v-text-field--prefixed":l.prefix,"v-text-field--suffixed":l.suffix,"v-textarea--auto-grow":l.autoGrow,"v-textarea--no-resize":l.noResize||l.autoGrow,"v-input--plain-underlined":oe.value},l.class],style:l.style},K,B,{centerAffix:ee.value===1&&!oe.value,focused:x.value}),{...S,default:ae=>{let{id:h,isDisabled:A,isDirty:G,isReadonly:Ce,isValid:Ie}=ae;return e(il,Ee({ref:d,style:{"--v-textarea-control-height":E.value},onClick:le,onMousedown:ue,"onClick:clear":ye,"onClick:prependInner":l["onClick:prependInner"],"onClick:appendInner":l["onClick:appendInner"]},T,{id:h.value,active:m.value||G.value,centerAffix:ee.value===1&&!oe.value,dirty:G.value||l.dirty,disabled:A.value,focused:x.value,error:Ie.value===!1}),{...S,default:Te=>{let{props:{class:ie,...Se}}=Te;return e(j,null,[l.prefix&&e("span",{class:"v-text-field__prefix"},[l.prefix]),St(e("textarea",Ee({ref:P,class:ie,value:C.value,onInput:me,autofocus:l.autofocus,readonly:Ce.value,disabled:A.value,placeholder:l.placeholder,rows:l.rows,name:l.name,onFocus:H,onBlur:V},Se,fe),null),[[dl("intersect"),{handler:c},null,{once:!0}]]),l.autoGrow&&St(e("textarea",{class:[ie,"v-textarea__sizer"],id:`${Se.id}-sizer`,"onUpdate:modelValue":he=>C.value=he,ref:M,readonly:!0,"aria-hidden":"true"},null),[[cl,C.value]]),l.suffix&&e("span",{class:"v-text-field__suffix"},[l.suffix])])}})},details:J?ae=>{var h;return e(j,null,[(h=S.details)==null?void 0:h.call(S,ae),k&&e(j,null,[e("span",null,null),e(ml,{active:l.persistentCounter||x.value,value:F.value,max:g.value},S.counter)])])}:void 0})}),Rt({},b,d,P)}}),Gl=ut({...El(),...pl({variant:"text"})},"VToolbarItems"),zt=pt()({name:"VToolbarItems",props:Gl(),setup(l,_){let{slots:n}=_;return gl({VBtn:{color:ht(l,"color"),height:"inherit",variant:ht(l,"variant")}}),gt(()=>{var s;return e("div",{class:["v-toolbar-items",l.class],style:l.style},[(s=n.default)==null?void 0:s.call(n)])}),{}}}),yt={__name:"SettingsMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const _=rt(),n=it(),s=be(),{apiAuth:S}=Ye(),C=l,x=I(()=>C.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}}),p=async()=>{var V,F;try{await S.delete("/users/logout"),s.logout(),_({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),n.push("/")}catch(g){console.log(g);const c=((F=(V=g==null?void 0:g.response)==null?void 0:V.data)==null?void 0:F.message)||"發生錯誤，請稍後再試";_({text:c,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(V,F)=>(r(),X(j,null,[e(ne,{style:L(x.value.dividerFirst)},null,8,["style"]),e(re,{style:L(x.value.listItem)},{default:t(()=>[u("貼文收藏")]),_:1},8,["style"]),e(ne,{style:L(x.value.divider)},null,8,["style"]),e(re,{style:L(x.value.listItem)},{default:t(()=>[u("喜歡的活動")]),_:1},8,["style"]),e(ne,{style:L(x.value.divider)},null,8,["style"]),e(re,{style:L(x.value.listItem)},{default:t(()=>[u("限動典藏")]),_:1},8,["style"]),e(ne,{style:L(x.value.divider)},null,8,["style"]),a(s).IS_ADMIN?(r(),X(j,{key:0},[e(re,{style:L([x.value.listItem,{cursor:"pointer"}]),to:"/admin"},{default:t(()=>[u("管理員後台")]),_:1},8,["style"]),e(ne,{style:L(x.value.divider)},null,8,["style"])],64)):te("",!0),e(re,{style:L([x.value.listItem,{cursor:"pointer"}]),onClick:p},{default:t(()=>[u("登出")]),_:1},8,["style"]),e(ne,{style:L(x.value.dividerLast)},null,8,["style"])],64))}};const jl={__name:"AddEvent",props:{isBtn:{type:Boolean,default:!0,required:!1},isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const{apiAuth:_}=Ye(),n=rt(),s=be(),{xs:S,sm:C}=Oe(),x=I(()=>S.value);I(()=>C.value);const p=dt(),V=it(),F=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣","基隆市","新竹市","嘉義市"],g=["公開","學生"],c=["音樂","合唱","管樂","吉他","熱音","熱舞","手語","康輔","桌遊","運動","棒球","桌球","籃球","羽球","排球","天文","文學","話劇","美術","攝影","校友會","學生會","系學會","營隊","學習"],b=I(()=>x.value?3:2),d=l,E=I(()=>!!d.isBtn),P=I(()=>d.isMobile?{fontSize:"1.2rem"}:{fontSize:"1rem"}),m=D(!1);D("");const H=()=>{m.value=!1,T(),ee.value.deleteFileRecord()},le=D(!1),ue=I(()=>A.value.value?new Date(A.value.value).toLocaleDateString().substring(0,10):""),ye=new Date,me=D([]),M=D([]),ee=D(null),oe=()=>{U.value.value=!0,ce()},O=D(""),Q=D(""),k=z=>{q.fields.value.splice(z,1),de.fields.value.splice(z,1)},J=(z,v)=>{q.fields.value.push(v),de.fields.value.push(z),Q.value=""},K=async()=>{var z,v;try{const{data:W}=await _.get("/users/getUser",{params:{search:Q.value,role:3}});O.value=W.result.data}catch(W){console.log(W);const f=((v=(z=W==null?void 0:W.response)==null?void 0:z.data)==null?void 0:v.message)||"發生錯誤，請稍後再試";n({text:f,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},fe=vt({title:ve().required("「活動名稱」必填").min(3,"「活動名稱」長度不符").max(20,"「「活動名稱」長度不符"),date:ve().required("「活動日期」必填"),startTime:Fe().typeError("必須是數字").required("「活動時間」必填"),endTime:Fe().typeError("必須是數字").required("「活動時間」必填").max(2359,"「活動時間」長度不符"),city:ve().required("「活動縣市」必填").min(3,"「活動縣市」長度不符").max(3,"「「活動縣市」長度不符"),add:ve().required("「活動地址」必填").max(40,"「活動地址」長度不符"),addRemark:ve().max(30,"「地點備註」長度不符"),isPublic:ve().required("「誰可參加」必填").min(2,"「誰可參加」長度不符").max(2,"「誰可參加」長度不符"),category:Qe().of(ve()).max(5,"最多5個標籤").required("「活動分類」必填"),preSale:Fe().typeError("必須是數字").max(9999,"「預售人數」長度不符").required("「預售人數」必填"),onSiteSale:Fe().typeError("必須是數字").max(9999,"「現場票」長度不符").required("「現場票」必填"),scoreValues:Fe().typeError("必須是數字").max(100,"「取票資格」長度不符").required("「取票資格」必填"),description:ve().required("「活動內容」必填").min(50,"「活動內容」長度不符").max(1e3,"「活動內容」長度不符"),coOrganizer:Qe().of(ve()).test("is-unique","協辦單位重複",function(z){return!z||!z.length?!0:new Set(z).size===z.length}),coOrganizerItem:Qe().of(ve()).test("is-unique","協辦單位重複",function(z){return!z||!z.length?!0:new Set(z).size===z.length}),isEdit:yl().required("「草稿」必填")}),{handleSubmit:ge,isSubmitting:B,resetForm:T,errors:ae}=wt({validationSchema:fe,initialValues:{isEdit:!1}}),h=se("title"),A=se("date"),G=se("startTime"),Ce=se("endTime"),Ie=se("city"),Te=se("add"),ie=se("addRemark"),Se=se("isPublic"),he=se("category"),Be=se("preSale"),Ue=se("onSiteSale"),i=se("scoreValues"),N=se("description"),q=Et("coOrganizer"),de=Et("coOrganizerItem"),U=se("isEdit"),ce=ge(async z=>{var v,W,f;if(!((v=me.value[0])!=null&&v.error))try{console.log("values",z),console.log("category.value.value",he.value.value);const w=new FormData,Re=A.value.value?new Date(A.value.value).toLocaleDateString().substring(0,10):A.value.value,qe=G.value.value+" "+Ce.value.value;w.append("TITLE",h.value.value),w.append("DATE",Re+" "+qe),w.append("CITY",Ie.value.value),w.append("ADD",Te.value.value),w.append("IS_PUBLIC",Se.value.value),w.append("CATEGORY",he.value.value),w.append("PRE_SALE",Be.value.value),w.append("ON_SITE_SALE",Ue.value.value),w.append("SCORE_VALUES",i.value.value),w.append("DESCRIPTION",N.value.value),w.append("HOST",s._id),w.append("IS_EDIT",U.value.value),w.append("IMAGE",me.value[0].file),q.fields.value.length>0&&w.append("CO_ORGANIZER",q.fields.value),ie.value.value&&w.append("ADD_REMARK",ie.value.value);const we=(await _.post("/events",w)).data.result._id;n({text:"新增成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),V.push("/event/"+we)}catch(w){console.log(w);const Re=((f=(W=w==null?void 0:w.response)==null?void 0:W.data)==null?void 0:f.message)||"發生錯誤，請稍後再試";n({text:Re,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return p.on("updateUserOk",async()=>{H()}),(z,v)=>{const W=Nt("VueFileAgent");return r(),y(et,{modelValue:m.value,"onUpdate:modelValue":v[22]||(v[22]=f=>m.value=f),fullscreen:"",transition:"dialog-bottom-transition",persistent:!0},{activator:t(({props:f})=>[E.value?(r(),y(Y,Ee({key:0,type:"button"},f,{style:{"background-color":"#1BBCA9",height:"auto","padding-top":"3px","padding-bottom":"3px"}}),{default:t(()=>[e(pe,{style:{"margin-left":"-3px"}},{default:t(()=>[u("mdi-plus")]),_:1}),u("建立活動 ")]),_:2},1040)):(r(),y(re,Ee({key:1},f,{style:P.value}),{default:t(()=>[u("建立活動")]),_:2},1040,["style"]))]),default:t(()=>[e(je,{class:"m-auto"},{default:t(()=>[e(Ft,{dark:"",color:"#333"},{default:t(()=>[e(Y,{icon:"",dark:"",onClick:H},{default:t(()=>[e(pe,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:1}),e(Dt,null,{default:t(()=>[u("新增活動")]),_:1}),e(Ze),e(zt)]),_:1}),e(Ne,null,{default:t(()=>[e(Lt,{disabled:a(B),onSubmit:_t(a(ce),["prevent"])},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(W,{modelValue:me.value,"onUpdate:modelValue":v[0]||(v[0]=f=>me.value=f),rawModelValue:M.value,"onUpdate:rawModelValue":v[1]||(v[1]=f=>M.value=f),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",color:"#25ECE0",ref_key:"fileAgent",ref:ee},null,8,["modelValue","rawModelValue"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(h).value.value,"onUpdate:modelValue":v[2]||(v[2]=f=>a(h).value.value=f),label:"活動名稱","error-messages":a(h).errorMessage.value,minlength:"3",maxlength:"20",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Me,{modelValue:le.value,"onUpdate:modelValue":v[7]||(v[7]=f=>le.value=f),"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","min-width":"290px",class:"d-flex align-center justify-center"},{activator:t(({attrs:f})=>[e(_e,Ee({"model-value":ue.value,"error-messages":a(A).errorMessage.value,color:"#25ECE0",variant:"outlined",label:"活動日期","prepend-icon":"mdi-calendar",readonly:""},f,{onClick:v[3]||(v[3]=w=>le.value=!le.value)}),null,16,["model-value","error-messages"])]),default:t(()=>[e(Ml,{type:"date",color:"#25ECE0",modelValue:a(A).value.value,"onUpdate:modelValue":v[5]||(v[5]=f=>a(A).value.value=f),min:a(ye),"no-time":"","no-title":"",onInput:v[6]||(v[6]=f=>le.value=!1)},{actions:t(()=>[e(Y,{style:{"background-color":"#25ECE0",color:"rgb(0, 0, 0)","font-weight":"900"},onClick:v[4]||(v[4]=f=>le.value=!1)},{default:t(()=>[u("確定")]),_:1})]),_:1},8,["modelValue","min"])]),_:1},8,["modelValue"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(G).value.value,"onUpdate:modelValue":v[8]||(v[8]=f=>a(G).value.value=f),"error-messages":a(G).errorMessage.value,minlength:"4",maxlength:"4",counter:"",variant:"outlined",color:"#25ECE0",label:"開始時間(EX:1900)"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(Ce).value.value,"onUpdate:modelValue":v[9]||(v[9]=f=>a(Ce).value.value=f),"error-messages":a(Ce).errorMessage.value,minlength:"4",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined",label:"結束時間(EX:2230)"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"5",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Je,{modelValue:a(Ie).value.value,"onUpdate:modelValue":v[10]||(v[10]=f=>a(Ie).value.value=f),"error-messages":a(Ie).errorMessage.value,items:F,label:"地址(縣市)",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"7",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(Te).value.value,"onUpdate:modelValue":v[11]||(v[11]=f=>a(Te).value.value=f),label:"活動地址","error-messages":a(Te).errorMessage.value,maxlength:"40",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(ie).value.value,"onUpdate:modelValue":v[12]||(v[12]=f=>a(ie).value.value=f),label:"活動地點備註","error-messages":a(ie).errorMessage.value,maxlength:"30",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Je,{modelValue:a(Se).value.value,"onUpdate:modelValue":v[13]||(v[13]=f=>a(Se).value.value=f),"error-messages":a(Se).errorMessage.value,items:g,label:"誰可參加",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Je,{modelValue:a(he).value.value,"onUpdate:modelValue":v[14]||(v[14]=f=>a(he).value.value=f),"error-messages":a(he).errorMessage.value,items:c,editable:"false",multiple:"",chips:"",label:"活動分類",variant:"outlined",color:"#25ECE0",class:"custom-chips"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(Be).value.value,"onUpdate:modelValue":v[15]||(v[15]=f=>a(Be).value.value=f),label:"預售票(張)",maxlength:"4","error-messages":a(Be).errorMessage.value,counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(Ue).value.value,"onUpdate:modelValue":v[16]||(v[16]=f=>a(Ue).value.value=f),"error-messages":a(Ue).errorMessage.value,label:"現場票(張)",maxlength:"4",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(i).value.value,"onUpdate:modelValue":v[17]||(v[17]=f=>a(i).value.value=f),"error-messages":a(i).errorMessage.value,label:"取票資格(取票人榮譽分數門檻，0-100分)",maxlength:"3",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e($l,{modelValue:Q.value,"onUpdate:modelValue":v[18]||(v[18]=f=>Q.value=f),label:"協辦單位",counter:"",variant:"outlined",onInput:v[19]||(v[19]=f=>K()),id:"searchId","prepend-inner-icon":"mdi-account-search","deletable-chips":"",color:"#25ECE0"},null,8,["modelValue"]),e(Me,{activator:"#searchId",onClick:v[20]||(v[20]=_t(()=>{},["stop"]))},{default:t(()=>[e(Ve,{style:{"max-height":"300px","overflow-y":"auto"}},{default:t(()=>[O.value?(r(!0),X(j,{key:0},De(O.value,f=>(r(),y(re,{key:f.USER_NAME,onClick:w=>J(f.USER_NAME,f._id)},{default:t(()=>[e($,{style:{margin:"5px"}},{default:t(()=>[e(o,{cols:b.value,class:"justify-center align-center",style:{padding:"0px",height:"45px"}},{default:t(()=>[e(ke,{size:"45"},{default:t(()=>[e(Pe,{src:f.IMAGE,cover:""},null,8,["src"])]),_:2},1024)]),_:2},1032,["cols"]),e(o,{cols:"7",class:"justify-center align-center"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[u(R(f.USER_NAME),1)]),_:2},1024),e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[u(R(f.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(ne)]),_:2},1032,["onClick"]))),128)):(r(),y(re,{key:1},{default:t(()=>[e(Bt,null,{default:t(()=>[u("無搜尋結果")]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"22px"}},{default:t(()=>[e(je,{variant:"outlined",class:"d-flex align-center",style:{height:"56px"}},{default:t(()=>[e(bl,null,{default:t(()=>[u("協辦單位")]),_:1}),e(xl,null,{default:t(()=>[(r(!0),X(j,null,De(a(de).fields.value,(f,w)=>(r(),y(Pt,{key:w,closable:"","onClick:close":Re=>k(w)},{default:t(()=>[u(R(f),1)]),_:2},1032,["onClick:close"]))),128))]),_:1})]),_:1})]),_:1}),e(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[e(Kt,{modelValue:a(N).value.value,"onUpdate:modelValue":v[21]||(v[21]=f=>a(N).value.value=f),label:"活動內容","error-messages":a(N).errorMessage.value,minlength:"50",maxlength:"1000",rows:"6",counter:"",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(Y,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:H},{default:t(()=>[u(" 取消 ")]),_:1})]),_:1}),e(o,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(Y,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#444",height:"60px","font-weight":"900"},onClick:oe},{default:t(()=>[u(" 儲存草稿 ")]),_:1})]),_:1}),e(o,{cols:"4",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(Y,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[u(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},$t=ze(jl,[["__scopeId","data-v-93b6ea21"]]);const Yl={__name:"AddMenu",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const _=be(),n=l,s=I(()=>n.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(S,C)=>(r(),X(j,null,[e(ne,{style:L(s.value.dividerFirst)},null,8,["style"]),e(re,{style:L(s.value.listItem)},{default:t(()=>[u("建立動態")]),_:1},8,["style"]),e(ne,{style:L(s.value.divider)},null,8,["style"]),e(re,{style:L(s.value.listItem)},{default:t(()=>[u("建立限動")]),_:1},8,["style"]),e(ne,{style:L(s.value.divider)},null,8,["style"]),a(_).ROLE===a(Ae).CLUB?(r(),X(j,{key:0},[e($t,{isBtn:!1,style:L(s.value.listItem),"is-mobile":l.isMobile},null,8,["style","is-mobile"]),e(ne,{style:L(s.value.dividerLast)},null,8,["style"])],64)):te("",!0)],64))}},bt=ze(Yl,[["__scopeId","data-v-3e9fbb87"]]),xt={__name:"SettingsMenuOther",props:{isMobile:{type:Boolean,default:!1,required:!1}},setup(l){const _=l,n=I(()=>_.isMobile?{dividerFirst:{marginTop:"30px",marginBottom:"15px"},divider:{marginTop:"15px",marginBottom:"15px"},dividerLast:{marginTop:"15px",marginBottom:"30px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"6px",marginBottom:"6px"},divider:{marginTop:"6px",marginBottom:"6px"},dividerLast:{marginTop:"6px",marginBottom:"6px"},listItem:{fontSize:"1rem"}});return(s,S)=>(r(),X(j,null,[e(ne,{style:L(n.value.dividerFirst)},null,8,["style"]),e(re,{style:L(n.value.listItem)},{default:t(()=>[u("檢舉")]),_:1},8,["style"]),e(ne,{style:L(n.value.divider)},null,8,["style"]),e(re,{style:L(n.value.listItem)},{default:t(()=>[u("分享檔案")]),_:1},8,["style"]),e(ne,{style:L(n.value.dividerLast)},null,8,["style"])],64))}},lt={__name:"FollowNumber",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){return(_,n)=>(r(),y(o,{cols:"12"},{default:t(()=>[l.routeUser.ROLE===a(Ae).CLUB?(r(),y($,{key:0},{default:t(()=>[e(o,{cols:"4",style:{"background-color":""}}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(R(l.routeUser.MAKE_POST.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("貼文")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(R(l.routeUser.MAKE_EVENTS_ID.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("活動")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(R(l.routeUser.FANS.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("粉絲")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(R(l.routeUser.FOLLOW.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("追蹤")]),_:1})]),_:1})]),_:1})]),_:1})):(r(),y($,{key:1},{default:t(()=>[e(o,{cols:"8",style:{"background-color":""}}),e(o,{cols:"2",style:{background:""}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(R(l.routeUser.FANS.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("粉絲")]),_:1})]),_:1})]),_:1}),e(o,{cols:"2",style:{}},{default:t(()=>[e($,{class:"text-center"},{default:t(()=>[e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u(R(l.routeUser.FOLLOW.length),1)]),_:1}),e(o,{cols:"12",style:{padding:"0"}},{default:t(()=>[u("追蹤")]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}))}};const ql={__name:"EditClub",setup(l){var ge;const{apiAuth:_}=Ye(),n=rt(),s=be(),{xs:S}=Oe();I(()=>S.value);const C=dt(),x=D(!1),p=()=>{x.value=!1,ye({values:{realName:s.REAL_NAME,emailUB:s.EMAIL_UB,clubTh:s.CLUB_TH,clubCategory:s.CLUB_CATEGORY,clubCoreMember:F.value,describe:s.DESCRIBE}}),b.value.deleteFileRecord()},V=(B,T)=>{O.fields.value[T].value.USER=B},F=D([]);for(const B in s.CLUB_CORE_MEMBER)F.value.push({USER:((ge=s.CLUB_CORE_MEMBER[B].USER)==null?void 0:ge.USER_NAME)||"",ROLE:s.CLUB_CORE_MEMBER[B].ROLE});const g=D([]),c=D([]),b=D(null),d={items:["學術","學藝","音樂","康樂","服務","體育","康輔","聯誼","其他"]},E=D(""),P=async B=>{var T,ae;try{const{data:h}=await _.get("/users/getUser",{params:{search:O.fields.value[B].value.USER,role:1}});E.value=h.result.data}catch(h){console.log(h);const A=((ae=(T=h==null?void 0:h.response)==null?void 0:T.data)==null?void 0:ae.message)||"發生錯誤，請稍後再試";n({text:A,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}},m=vt({realName:ve().required("「姓名/社團名」必填").max(6,"「姓名/社團名」長度不符"),emailUB:ve().max(40,"「備用信箱」長度不符").test("isEmail","「備用信箱」格式錯誤",B=>B?Ol.isEmail(B):!0),clubTh:Fe().required("「社團屆數」必填").typeError("「社團屆數」必須是數字"),clubCoreMember:Qe(vt({USER:ve().required("「用戶名稱」必填"),ROLE:ve().required("「幹部職稱」必填").max(5,"「幹部職稱」長度不符").min(2,"「幹部職稱」長度不符")})).test("role","必須要有社長和副社長",B=>B.filter(T=>T.ROLE==="社長").length===1&&B.filter(T=>T.ROLE==="副社長").length===1).test("user","幹部不可重複",B=>{const T=B.map(ae=>ae.USER);return new Set(T).size===T.length}),clubCategory:ve().required("「社團類別」必填").min(2,"「社團類別」不符").max(2,"「社團類別」不符"),describe:ve().max(50,"「社團類別」不符")}),{handleSubmit:H,isSubmitting:le,errors:ue,resetForm:ye}=wt({validationSchema:m,initialValues:{realName:s.REAL_NAME,emailUB:s.EMAIL_UB,clubTh:s.CLUB_TH,clubCategory:s.CLUB_CATEGORY,clubCoreMember:F.value,describe:s.DESCRIBE}}),me=se("realName"),M=se("nickName"),ee=se("emailUB"),oe=se("clubTh"),O=Et("clubCoreMember"),Q=se("clubCategory"),k=se("describe"),J=()=>{O.push({USER:"",ROLE:""})},K=B=>{O.remove(B)},fe=H(async B=>{var T,ae,h;if(!((T=g.value[0])!=null&&T.error))try{const A=new FormData;A.append("USER_NAME",s.USER_NAME),A.append("REAL_NAME",B.realName),A.append("NICK_NAME",M.value.value||B.realName),A.append("EMAIL_UB",B.emailUB),A.append("CLUB_TH",B.clubTh),A.append("CLUB_CATEGORY",B.clubCategory);for(const G in B.clubCoreMember)A.append(`CLUB_CORE_MEMBER[${G}][USER]`,B.clubCoreMember[G].USER),A.append(`CLUB_CORE_MEMBER[${G}][ROLE]`,B.clubCoreMember[G].ROLE);A.append("DESCRIBE",B.describe),g.value.length>0&&A.append("IMAGE",g.value[0].file),await _.patch("/users/edit",A),n({text:"編輯成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),C.emit("updateUser")}catch(A){const G=((h=(ae=A==null?void 0:A.response)==null?void 0:ae.data)==null?void 0:h.message)||"發生錯誤，請稍後再試";n({text:G,showCloseButton:!1,snackbarProps:{timeout:2e3,console:"red",location:"bottom"}})}});return C.on("updateUserOk",async()=>{p()}),(B,T)=>{const ae=Nt("VueFileAgent");return r(),y(et,{modelValue:x.value,"onUpdate:modelValue":T[7]||(T[7]=h=>x.value=h),onKeydown:Cl(p,["esc"])},{activator:t(({props:h})=>[e(Y,Ee({color:"#444",style:{"font-weight":"900",width:"100%"},dark:""},h),{default:t(()=>[u("編輯社團檔案")]),_:2},1040)]),default:t(()=>[e(je,{style:{"border-radius":"15px","max-width":"400px",margin:"auto",width:"100%"}},{default:t(()=>[e(Ft,{dark:"",color:"#333"},{default:t(()=>[e(Y,{icon:"",dark:"",onClick:p},{default:t(()=>[e(pe,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:1}),e(Dt,null,{default:t(()=>[u("編輯檔案")]),_:1}),e(Ze),e(zt)]),_:1}),e(Ne,null,{default:t(()=>[e(Lt,{disabled:a(le),onSubmit:_t(a(fe),["prevent"])},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(ae,{modelValue:g.value,"onUpdate:modelValue":T[0]||(T[0]=h=>g.value=h),rawModelValue:c.value,"onUpdate:rawModelValue":T[1]||(T[1]=h=>c.value=h),accept:"image/jpeg,image/png",deletable:"","error-text":{type:"檔案格式不支援",size:"檔案超過 1MB 大小限制"},"help-text":"選擇檔案或拖曳到這裡","max-files":1,"max-size":"1MB",ref_key:"fileAgent",ref:b,color:"#25ECE0"},null,8,["modelValue","rawModelValue"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"30px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(me).value.value,"onUpdate:modelValue":T[2]||(T[2]=h=>a(me).value.value=h),label:"社團名稱","error-messages":a(me).errorMessage.value,maxlength:"6",counter:"",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(s).ROLE===3?(r(),y(_e,{key:0,modelValue:a(oe).value.value,"onUpdate:modelValue":T[3]||(T[3]=h=>a(oe).value.value=h),"error-messages":a(oe).errorMessage.value,maxlength:"3",counter:"",color:"#25ECE0",label:"社團屆數",variant:"outlined"},null,8,["modelValue","error-messages"])):te("",!0)]),_:1}),e(o,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[a(s).ROLE===3?(r(),y(Je,{key:0,modelValue:a(Q).value.value,"onUpdate:modelValue":T[4]||(T[4]=h=>a(Q).value.value=h),":error-messages":a(Q).errorMessage.value,items:d.items,label:"社團類別",color:"#25ECE0",variant:"outlined"},null,8,["modelValue",":error-messages","items"])):te("",!0)]),_:1}),e(o,{cols:"12",style:{"padding-top":"0","padding-bottom":"0"}},{default:t(()=>[e(Nl,{style:{color:"#FF8484"}},{default:t(()=>[u(R(a(ue).clubCoreMember),1)]),_:1})]),_:1}),(r(!0),X(j,null,De(a(O).fields.value,(h,A)=>(r(),y(o,{cols:"12",style:{"padding-top":"0px","padding-bottom":"0"},key:h.key},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"5"},{default:t(()=>[a(s).ROLE===3?(r(),y(_e,{key:0,modelValue:h.value.ROLE,"onUpdate:modelValue":G=>h.value.ROLE=G,"error-messages":a(ue)[`clubCoreMember[${A}].ROLE`],label:"幹部職稱",variant:"outlined",color:"#25ECE0",density:"compact"},null,8,["modelValue","onUpdate:modelValue","error-messages"])):te("",!0)]),_:2},1024),e(o,{cols:"5"},{default:t(()=>[a(s).ROLE===3?(r(),y(_e,{key:0,modelValue:h.value.USER,"onUpdate:modelValue":G=>h.value.USER=G,"error-messages":a(ue)[`clubCoreMember[${A}].USER`],label:"用戶名稱",variant:"outlined",density:"compact",color:"#25ECE0",onInput:G=>P(A),id:"clubCoreMember_user"+A},null,8,["modelValue","onUpdate:modelValue","error-messages","onInput","id"])):te("",!0),e(Me,{activator:"#clubCoreMember_user"+A},{default:t(()=>[e(Ve,{style:{"max-height":"300px","overflow-y":"auto"}},{default:t(()=>[h.value.USER?(r(!0),X(j,{key:0},De(E.value,G=>(r(),y(re,{key:G.USER_NAME,onClick:Ce=>V(G.USER_NAME,A)},{default:t(()=>[e($,{style:{margin:"5px"}},{default:t(()=>[e(o,{cols:"5",class:"justify-center",style:{padding:"8px"}},{default:t(()=>[e(ke,{size:"35"},{default:t(()=>[e(Pe,{src:G.IMAGE,cover:""},null,8,["src"])]),_:2},1024)]),_:2},1024),e(o,{cols:"7",class:"justify-center align-center"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"1.1rem",color:"#25ECE0"}},{default:t(()=>[u(R(G.USER_NAME),1)]),_:2},1024),e(o,{cols:"12",style:{padding:"0",margin:"0","font-size":"0.8rem",color:"#cccccc"}},{default:t(()=>[u(R(G.NICK_NAME),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(ne)]),_:2},1032,["onClick"]))),128)):(r(),y(re,{key:1},{default:t(()=>[e(Bt,null,{default:t(()=>[u("無搜尋結果")]),_:1})]),_:1}))]),_:2},1024)]),_:2},1032,["activator"])]),_:2},1024),e(o,{cols:"1",style:{"justify-content":"start","align-items":"center"}},{default:t(()=>[A===0?(r(),y(Y,{key:0,icon:"mdi-plus",onClick:J,style:{"font-size":"1.2rem",width:"auto",height:"auto"}})):(r(),y(Y,{key:1,icon:"mdi-minus",onClick:G=>K(A),style:{"font-size":"1.2rem",width:"auto",height:"auto"}},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(o,{cols:"12",style:{"padding-top":"10px","padding-bottom":"0"}},{default:t(()=>[e(_e,{modelValue:a(ee).value.value,"onUpdate:modelValue":T[5]||(T[5]=h=>a(ee).value.value=h),"error-messages":a(ee).errorMessage.value,maxlength:"40",counter:"",label:"備用信箱",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12"},{default:t(()=>[e(Kt,{modelValue:a(k).value.value,"onUpdate:modelValue":T[6]||(T[6]=h=>a(k).value.value=h),"error-messages":a(k).errorMessage.value,maxlength:"50",counter:"",label:"社團簡介",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"4",style:{"padding-top":"0"}},{default:t(()=>[e(Y,{type:"button",block:"",class:"rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:p},{default:t(()=>[u(" 取消 ")]),_:1})]),_:1}),e(o,{cols:"8",style:{"padding-top":"0","padding-bottom":"30px"}},{default:t(()=>[e(Y,{type:"submit",block:"",class:"rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:t(()=>[u(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},at={__name:"StatusBtn",setup(l){const _=be(),n=I(()=>Ot.ROLE===Ae.CLUB?"分享社團檔案":"分享個人檔案"),s=Ke("routeUser");return Ke("routeEvent"),(S,C)=>(r(),y(o,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(_).USER_NAME===a(s).USER_NAME?(r(),X(j,{key:0},[a(s).ROLE===a(Ae).CLUB?(r(),y(ql,{key:0,routeUser:a(s)},null,8,["routeUser"])):(r(),y(Y,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u("編輯個人檔案")]),_:1}))],64)):(r(),y(Y,{key:1,color:"#1BBCA9",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u("追蹤")]),_:1}))]),_:1}),e(o,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[a(_).USER_NAME===a(s).USER_NAME?(r(),y(Y,{key:0,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u(R(n.value),1)]),_:1})):(r(),y(Y,{key:1,color:"#444",style:{"font-weight":"900",width:"100%"}},{default:t(()=>[u("發送訊息")]),_:1}))]),_:1}),e(o,{cols:"4",style:{"padding-left":"4px","padding-right":"4px"}},{default:t(()=>[e(Y,{color:"#FF9900",style:{color:"#fff","font-weight":"900",width:"100%"}},{default:t(()=>[u("榮譽分數 "+R(a(s).SCORES)+" 分",1)]),_:1})]),_:1})]),_:1})]),_:1}))}};const Wl={class:"d-flex justify-space-around"},Xl={__name:"EventMenu",props:{isMobile:{type:Boolean,default:!1,required:!1},itemId:{type:String,default:"",required:!0},joinEvent:{type:Boolean,default:!1,required:!1}},setup(l){it(),be();const{apiAuth:_}=Ye(),n=dt(),s=l,S=I(()=>s.isMobile?{dividerFirst:{marginTop:"5px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"5px"},listItem:{fontSize:"1.2rem"}}:{dividerFirst:{marginTop:"0px",marginBottom:"0px"},divider:{marginTop:"0px",marginBottom:"0px"},dividerLast:{marginTop:"0px",marginBottom:"0px"},listItem:{fontSize:"1rem"}}),C=D(!1),x=D(""),p=D(!1),V=D("刪除成功！"),F=()=>{C.value=!1,p.value=!1},g=async()=>{var c,b;try{await _.delete(`/events/${s.itemId}`),n.emit("updateUser"),p.value=!0}catch(d){const E=((b=(c=d==null?void 0:d.response)==null?void 0:c.data)==null?void 0:b.message)||"發生錯誤，請稍後再試";x.value=E,C.value=!0}};return(c,b)=>(r(),X(j,null,[Z("div",Wl,[e(Me,null,{activator:t(({props:d})=>[e(pe,Ee(d,{class:"textHover"}),{default:t(()=>[u("mdi-dots-vertical")]),_:2},1040)]),default:t(()=>[e(Ve,null,{default:t(()=>[e(ne,{style:L(S.value.dividerFirst)},null,8,["style"]),l.joinEvent?te("",!0):(r(),X(j,{key:0},[e(re,{style:L(S.value.listItem)},{default:t(()=>[u("編輯")]),_:1},8,["style"]),e(ne,{style:L(S.value.divider)},null,8,["style"])],64)),e(re,{style:L(S.value.listItem)},{default:t(()=>[u("分享")]),_:1},8,["style"]),l.joinEvent?te("",!0):(r(),X(j,{key:1},[e(ne,{style:L(S.value.divider)},null,8,["style"]),e(re,{style:L(S.value.listItem),onClick:g},{default:t(()=>[u("刪除")]),_:1},8,["style"])],64)),e(ne,{style:L(S.value.dividerLast)},null,8,["style"])]),_:1})]),_:1})]),e(Tt,{InfoSwitch:C.value,InfoText:x.value,closeInfo:F,"onUpdate:InfoSwitch":b[0]||(b[0]=d=>C.value=d)},null,8,["InfoSwitch","InfoText"]),e(Tt,{InfoSwitch:p.value,InfoText:V.value,closeInfo:F,"onUpdate:InfoSwitch":b[1]||(b[1]=d=>p.value=d)},null,8,["InfoSwitch","InfoText"])],64))}},Xe=ze(Xl,[["__scopeId","data-v-bd449fd4"]]);const $e=l=>(Sl("data-v-e80eb4ac"),l=l(),hl(),l),Ql={class:"me-1"},Jl=$e(()=>Z("span",{class:"me-1",style:{"font-size":"0.7rem"}},"月",-1)),Zl={class:"me-1"},ea=$e(()=>Z("span",{class:"me-1",style:{"font-size":"0.7rem"}},"日",-1)),ta={key:1,style:{"font-size":"1.3rem",color:"#ccc"}},la={class:"me-1"},aa=$e(()=>Z("span",{class:"me-1",style:{"font-size":"0.7rem"}},"月",-1)),oa={class:"me-1"},sa=$e(()=>Z("span",{class:"me-1",style:{"font-size":"0.7rem"}},"日",-1)),na=$e(()=>Z("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動",-1)),ua=$e(()=>Z("div",{style:{"font-size":"1.3rem",color:"#ccc"}},"目前無活動參加紀錄",-1)),ra={__name:"PostEvent",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const _=be(),n=D(""),{xs:s}=Oe(),S=I(()=>s.value),C=I(()=>c.routeEvent.slice().sort((b,d)=>{const E=b.DATE.split(" ")[0],P=d.DATE.split(" ")[0];return new Date(P)-new Date(E)})),x=I(()=>c.routeUser.TICKET_CART.slice().sort((b,d)=>{const E=b.EVENT.DATE.split(" ")[0],P=d.EVENT.DATE.split(" ")[0];return new Date(P)-new Date(E)})),p=I(()=>n.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),V=I(()=>n.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),F=I(()=>n.value==="three"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),g=b=>{const d=b.split(" "),E=d[0].split("/"),P=d[1].split(" "),m=d[2].split(" "),H=E[0],le=E[1].padStart(2,"0")+"."+E[2].padStart(2,"0"),ue=P[0].slice(0,2)+":"+P[0].slice(2),ye=m[0].slice(0,2)+":"+m[0].slice(2),me=E[1],M=E[2],ee=E[1].padStart(2,"0")+"/"+E[2].padStart(2,"0"),oe=J=>J.replace(/\//g,"-"),O=J=>{const K=new Date(J);return["日","一","二","三","四","五","六"][K.getDay()]},Q=oe(d[0]),k=O(Q);return{year:H,monthDay:le,monthDay2:ee,week:k,startTime:ue,endTime:ye,month:me,day:M}},c=l;return(b,d)=>l.routeUser.ROLE===a(Ae).CLUB?(r(),X(j,{key:0},[e(o,{cols:"12"},{default:t(()=>[e(Bl,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=E=>n.value=E),"align-tabs":"start"},{default:t(()=>[e(ct,{value:"one",class:"rounded-ts-xl me-2",style:L([{"min-width":"80px"},p.value])},{default:t(()=>[u("動態")]),_:1},8,["style"]),e(ct,{value:"two",class:"rounded-ts-xl me-2",style:L([{"min-width":"80px"},V.value])},{default:t(()=>[u("主辦活動")]),_:1},8,["style"]),e(ct,{value:"three",class:"rounded-ts-xl",style:L([{"min-width":"80px"},F.value])},{default:t(()=>[u("活動紀錄")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(ne,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(wl,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=E=>n.value=E),style:{width:"100%"}},{default:t(()=>[e(At,{value:"two"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[u(R(new Date().getFullYear()),1)]),_:1}),l.routeUser.MAKE_EVENTS_ID.length!==0?(r(!0),X(j,{key:0},De(C.value,E=>(r(),X(j,{key:E._id},[e(o,{cols:"3",style:{background:"rgba(6, 50, 107,0)","padding-right":"0"}},{default:t(()=>[Z("span",Ql,R(E.dateParts.month),1),Jl,Z("span",Zl,R(E.dateParts.day),1),ea]),_:2},1024),e(o,{cols:"7",onClick:P=>b.$router.push(`/event/${E._id}`),class:"textHover"},{default:t(()=>[u(R(E.TITLE),1)]),_:2},1032,["onClick"]),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[e(pe,null,{default:t(()=>[u("mdi-camera")]),_:1})]),_:1}),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[S.value?(r(),y(Xe,{key:0,isMobile:"",itemId:E._id},null,8,["itemId"])):(r(),y(Xe,{key:1,itemId:E._id},null,8,["itemId"]))]),_:2},1024)],64))),128)):(r(),y(o,{key:1,cols:"12"},{default:t(()=>[l.routeUser.USER_NAME===a(_).USER_NAME?(r(),y($t,{key:0})):(r(),X("div",ta,"目前無活動"))]),_:1}))]),_:1})]),_:1})]),_:1}),e(At,{value:"three"},{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[u(R(new Date().getFullYear()),1)]),_:1}),l.routeUser.TICKET_CART.length!==0?(r(!0),X(j,{key:0},De(x.value.filter(E=>E.USED===1),E=>(r(),X(j,{key:E._id},[e(o,{cols:"3",style:{background:"rgba(6, 50, 107,0)","padding-right":"0"}},{default:t(()=>[Z("span",la,R(g(E.EVENT.DATE).month),1),aa,Z("span",oa,R(g(E.EVENT.DATE).day),1),sa]),_:2},1024),e(o,{cols:"7",onClick:P=>b.$router.push(`/event/${E.EVENT._id}`),class:"textHover"},{default:t(()=>[u(R(E.EVENT.TITLE),1)]),_:2},1032,["onClick"]),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[e(pe,null,{default:t(()=>[u("mdi-camera")]),_:1})]),_:1}),e(o,{cols:"1",class:"d-flex justify-center textHover"},{default:t(()=>[S.value?(r(),y(Xe,{key:0,isMobile:"",itemId:E._id,joinEvent:!0},null,8,["itemId"])):(r(),y(Xe,{key:1,itemId:E._id,joinEvent:!0},null,8,["itemId"]))]),_:2},1024)],64))),128)):te("",!0),x.value.filter(E=>E.USED===1).length===0?(r(),y(o,{key:1,cols:"12"},{default:t(()=>[na]),_:1})):te("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):(r(),X(j,{key:1},[e(o,{cols:"12",style:{"font-size":"0.9rem",color:"#ccc","padding-top":"0px","padding-bottom":"0"}},{default:t(()=>[u(R(new Date().getFullYear()),1)]),_:1}),e(o,{cols:"12"},{default:t(()=>[ua]),_:1})],64))}},ot=ze(ra,[["__scopeId","data-v-e80eb4ac"]]),ia=Z("div",{class:"mt-3",style:{color:"#ccc"}},"新增",-1),st={__name:"TimePost",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){const _=be(),{xs:n}=Oe(),s=I(()=>n.value),S=I(()=>s.value?3:2);return(C,x)=>l.routeUser.USER_NAME===a(_).USER_NAME||l.routeUser.MAKE_EVENT.length!==0?(r(),y(o,{key:0,cols:"12"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:S.value,class:"text-center"},{default:t(()=>[e(Y,{icon:"",size:"large",text:"",color:"rgba(0,0,0,0)"},{default:t(()=>[e(pe,{style:{"font-size":"3.8rem",border:"1px solid #ccc","border-radius":"50%"},color:"#ccc "},{default:t(()=>[u("mdi-plus")]),_:1})]),_:1}),ia]),_:1},8,["cols"])]),_:1})]),_:1})):te("",!0)}},da={style:{border:"1px solid #25ECE0",padding:"3px 10px",color:"#FF6868"}},ca={style:{"margin-right":"10px","font-weight":"900",color:"#25ECE0"}},nt={__name:"SchoolName",props:{isNClubComputer:{type:Boolean,default:!1,required:!1},routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})}},setup(l){const _=l,n=I(()=>_.isNClubComputer?{"padding-top":"0rem"}:{"padding-top":"0.6rem"});return(s,S)=>(r(),y(o,{cols:"12",style:L([{"font-size":"0.9rem"},n.value])},{default:t(()=>[Z("span",da,[Z("span",ca,R(l.routeUser.SCHOOL_NAME),1),Z("span",null,R(l.routeUser.SCHOOL_CITY),1)])]),_:1},8,["style"]))}},ma={class:"me-3"},fa={class:"me-3",style:{"font-size":"1.05rem"}},va={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},_a={class:"me-3"},Ea={class:"me-3",style:{"font-size":"1.05rem"}},pa={__name:"PersonalClub",emits:["updateUser"],setup(l,{emit:_}){const n=be(),{xs:s,sm:S}=Oe(),C=I(()=>s.value),x=I(()=>S.value),p=_,V=()=>{p("updateUser")},F=I(()=>x.value?150:180),g=Ke("routeUser"),c=Ke("routeEvent");return(b,d)=>C.value?(r(),y(Ne,{key:0},{default:t(()=>[e($,{class:"box"},{default:t(()=>[e(o,{cols:"4",class:"d-flex justify-center"},{default:t(()=>[e(ke,{size:"115",style:{"margin-top":"15px"}},{default:t(()=>[e(Pe,{src:a(g).IMAGE,cover:""},null,8,["src"])]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[Z("span",ma,R(a(g).NICK_NAME),1),Z("span",fa,"第"+R(a(g).CLUB_TH)+"屆",1),Z("span",null,[e(Y,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[u("成員")]),_:1})])]),_:1}),e(nt,{routeUser:a(g)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(R(a(g).DESCRIBE),1)]),_:1}),e(lt,{routeUser:a(g)},null,8,["routeUser"])]),_:1})]),_:1}),e(at,{routeUser:a(g)},null,8,["routeUser"]),a(g).MAKE_EVENT.length!==0?(r(),y(tt,{key:0})):te("",!0),e(st,{routeUser:a(g)},null,8,["routeUser"]),e(ot,{routeUser:a(g),routeEvent:a(c)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",va,[e(Ne,{style:{"max-width":"800px"}},{default:t(()=>[e($,{class:"box",style:{"background-color":""}},{default:t(()=>[e(o,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-center align-center"},{default:t(()=>[e(ke,{size:F.value},{default:t(()=>[e(Pe,{src:a(g).IMAGE,cover:""},null,8,["src"])]),_:1},8,["size"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[u(R(a(g).USER_NAME),1)]),_:1}),e(o,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0","padding-top":"0.5rem"}},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"8"},{default:t(()=>[Z("span",_a,R(a(g).NICK_NAME),1),Z("span",Ea,"第"+R(a(g).CLUB_TH)+"屆",1),Z("span",null,[e(Y,{color:"#FF9900",style:{"min-width":"0",width:"42px",color:"#fff","font-weight":"900",height:"auto","padding-top":"2px","padding-bottom":"3px"},class:"align-center"},{default:t(()=>[u("成員")]),_:1})])]),_:1}),e(o,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(g).USER_NAME===a(n).USER_NAME?(r(),y(pe,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[u("mdi-plus-box-outline")]),_:1})):te("",!0),a(g).USER_NAME===a(n).USER_NAME?(r(),y(Me,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[e(bt)]),_:1})]),_:1})):te("",!0),e(pe,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[u("mdi-menu")]),_:1}),e(Me,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[a(g).USER_NAME===a(n).USER_NAME?(r(),y(yt,{key:0})):(r(),y(xt,{key:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(nt,{routeUser:a(g)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(R(a(g).DESCRIBE),1)]),_:1}),e(lt,{routeUser:a(g)},null,8,["routeUser"])]),_:1})]),_:1}),e(at,{onUpdateUser:V,routeUser:a(g)},null,8,["routeUser"]),a(g).MAKE_EVENT.length!==0?(r(),y(tt,{key:0})):te("",!0),e(st,{routeUser:a(g)},null,8,["routeUser"]),e(ot,{routeUser:a(g),routeEvent:a(c)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const ga={__name:"ClubMember",props:{routeUser:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[]})},routeEvent:{type:Array,default:()=>[]}},setup(l){const _=D(0),n=()=>{_.value++},s=l,S=I(()=>_.value%2===0?"幹部":s.routeUser.IS_CORE_MEMBER[0].NICK_NAME+"  "+s.routeUser.IS_CORE_MEMBER[0].CLUB_TH+"th "+s.routeUser.IS_CORE_MEMBER[0].ROLE);return(C,x)=>(r(),X(j,null,[l.routeUser.ROLE===a(Ae).STUDENT?(r(),y(o,{key:0,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[l.routeUser.IS_CORE_MEMBER?(r(),y(Y,{key:0,type:"button",style:{"background-color":"#FF9900",height:"auto","padding-top":"3px","padding-bottom":"3px"},onClick:n},{default:t(()=>[u(R(S.value),1)]),_:1})):(r(),y(Y,{key:1,type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[u("無社團")]),_:1}))]),_:1})):te("",!0),l.routeUser.ROLE===a(Ae).NOT_STUDENT?(r(),y(o,{key:1,cols:"12",style:{"padding-top":"1px"}},{default:t(()=>[e(Y,{type:"button",style:{"background-color":"#444",height:"auto","padding-top":"3px","padding-bottom":"3px"}},{default:t(()=>[u("畢業生")]),_:1})]),_:1})):te("",!0)],64))}},Vt=ze(ga,[["__scopeId","data-v-80d3ee6b"]]),ya={class:"me-3"},ba={key:1,style:{height:"auto",border:"#1BBCA9 0px solid",padding:"3rem"}},xa={class:"me-3"},Ca={__name:"NPersonalClub",setup(l){const _=be(),{xs:n,sm:s}=Oe(),S=I(()=>n.value),C=I(()=>s.value),x=I(()=>C.value?150:180),p=Ke("routeUser"),V=Ke("routeEvent");return(F,g)=>S.value?(r(),y(Ne,{key:0},{default:t(()=>[e($,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(o,{cols:"4",class:"d-flex justify-center",style:{"padding-top":"1.2rem"}},{default:t(()=>[e(ke,{size:"115",style:{"margin-top":"15px"}},{default:t(()=>[e(Pe,{src:a(p).IMAGE},null,8,["src"])]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[Z("span",ya,R(a(p).NICK_NAME),1)]),_:1}),e(nt,{routeUser:a(p)},null,8,["routeUser"]),e(Vt,{routeUser:a(p)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(R(a(p).DESCRIBE),1)]),_:1}),e(lt,{routeUser:a(p)},null,8,["routeUser"])]),_:1})]),_:1}),e(at,{routeUser:a(p)},null,8,["routeUser"]),e(st,{routeUser:a(p)},null,8,["routeUser"]),e(tt),e(ot,{routeUser:a(p),routeEvent:a(V)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})):(r(),X("div",ba,[e(Ne,{style:{"max-width":"800px"}},{default:t(()=>[e($,{class:"box",style:{"background-color":"","padding-top":"1rem"}},{default:t(()=>[e(o,{cols:"4",style:{border:"0px solid"}},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-center align-center"},{default:t(()=>[e(ke,{size:x.value},{default:t(()=>[e(Pe,{src:a(p).IMAGE},null,8,["src"])]),_:1},8,["size"])]),_:1})]),_:1})]),_:1}),e(o,{cols:"8"},{default:t(()=>[e($,null,{default:t(()=>[e(o,{cols:"12",style:{"font-size":"1.6rem","padding-bottom":"0",color:"#25ECE0"}},{default:t(()=>[u(R(a(p).USER_NAME),1)]),_:1}),e(o,{cols:"8",style:{"font-size":"1.1rem","padding-bottom":"0"}},{default:t(()=>[Z("span",xa,R(a(p).NICK_NAME),1)]),_:1}),e(o,{cols:"4",class:"d-flex justify-end"},{default:t(()=>[a(p).USER_NAME===a(_).USER_NAME?(r(),y(pe,{key:0,class:"me-3",style:{cursor:"pointer"},id:"post"},{default:t(()=>[u("mdi-plus-box-outline")]),_:1})):te("",!0),a(p).USER_NAME===a(_).USER_NAME?(r(),y(Me,{key:1,activator:"#post",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[e(bt)]),_:1})]),_:1})):te("",!0),e(pe,{class:"me-3",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[u("mdi-menu")]),_:1}),e(Me,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(Ve,null,{default:t(()=>[a(p).USER_NAME===a(_).USER_NAME?(r(),y(yt,{key:0})):(r(),y(xt,{key:1}))]),_:1})]),_:1})]),_:1}),e(nt,{isNClubComputer:"",routeUser:a(p)},null,8,["routeUser"]),e(Vt,{routeUser:a(p)},null,8,["routeUser"]),e(o,{cols:"12"},{default:t(()=>[u(R(a(p).DESCRIBE),1)]),_:1}),e(lt,{routeUser:a(p)},null,8,["routeUser"])]),_:1})]),_:1}),e(at,{routeUser:a(p)},null,8,["routeUser"]),e(st,{routeUser:a(p)},null,8,["routeUser"]),e(tt),e(ot,{routeUser:a(p),routeEvent:a(V)},null,8,["routeUser","routeEvent"])]),_:1})]),_:1})]))}};const Sa={__name:"PersonalView",setup(l){const{apiAuth:_}=Ye(),n=be(),s=it(),S=Ot(),C=rt(),x=dt(),{xs:p}=Oe(),V=I(()=>p.value),F=()=>{s.go(-1)};x.on("updateUser",async()=>{await n.getProfile(),await b(),x.emit("updateUserOk")});const g=D([]),c=D({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:"",MAKE_EVENT:[],MAKE_POST:[],MAKE_TIME_POST:[],GO_EVENT:[],BE_MARK:[],IS_CORE_MEMBER:[],MAKE_EVENTS_ID:[],CLUB_CORE_MEMBER:[]});Mt("routeUser",c),Mt("routeEvent",g);const b=async()=>{var E,P;try{const{data:m}=await _.get("/users/"+S.params.USER_NAME);c.value.EMAIL=m.result.EMAIL,c.value.ROLE=m.result.ROLE,c.value.SCHOOL_NAME=m.result.SCHOOL_NAME,c.value.SCHOOL_CITY=m.result.SCHOOL_CITY,c.value.USER_NAME=m.result.USER_NAME,c.value.NICK_NAME=m.result.NICK_NAME,c.value.CLUB_TH=m.result.CLUB_TH,c.value.CLUB_CATEGORY=m.result.CLUB_CATEGORY,c.value.IMAGE=m.result.IMAGE,c.value.TICKET_CART=m.result.TICKET_CART,c.value.SCORES=m.result.SCORES,c.value.NOTIFY=m.result.NOTIFY,c.value.KEEP_POST=m.result.KEEP_POST,c.value.KEEP_EVENT=m.result.KEEP_EVENT,c.value.FANS=m.result.FANS,c.value.FOLLOW=m.result.FOLLOW,c.value.IS_STUDENT=m.result.IS_STUDENT,c.value.IS_ABLE=m.result.IS_ABLE,c.value.IS_ADMIN=m.result.IS_ADMIN,c.value.DESCRIBE=m.result.DESCRIBE,c.value.MAKE_EVENT=m.result.MAKE_EVENT,c.value.MAKE_POST=m.result.MAKE_POST,c.value.MAKE_TIME_POST=m.result.MAKE_TIME_POST,c.value.GO_EVENT=m.result.GO_EVENT,c.value.BE_MARK=m.result.BE_MARK,c.value.IS_CORE_MEMBER=m.result.IS_CORE_MEMBER,c.value.MAKE_EVENTS_ID=m.result.MAKE_EVENTS_ID,document.title=`SClub | ${c.value.NICK_NAME}（${c.value.USER_NAME}）`,await d()}catch(m){console.log(m);const H=((P=(E=m==null?void 0:m.response)==null?void 0:E.data)==null?void 0:P.message)||"發生錯誤，請稍後再試";C({text:H,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}}),s.push("/")}},d=async()=>{var E,P;try{const m=c.value.MAKE_EVENTS_ID.map(le=>_.get("/events/"+le)),H=await Promise.all(m);g.value=H.map(le=>{const ue=le.data.result,[ye,me,M]=ue.DATE.split(" "),[ee,oe,O]=ye.split("/"),[Q,k]=[me.slice(0,2),me.slice(2)],[J,K]=[M.slice(0,2),M.slice(2)];return ue.dateParts={year:ee,month:oe.padStart(2,"0"),day:O.padStart(2,"0"),hourStart:Q.padStart(2,"0"),minuteStart:k.padStart(2,"0"),hourEnd:J.padStart(2,"0"),minuteEnd:K.padStart(2,"0")},ue})}catch(m){console.log(m);const H=((P=(E=m==null?void 0:m.response)==null?void 0:E.data)==null?void 0:P.message)||"發生錯誤，請稍後再試";C({text:H,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return kt(async()=>{await b()}),(E,P)=>(r(),X(j,null,[V.value?(r(),y(Il,{key:0},{default:t(()=>[e(Ne,{class:"d-flex align-center",style:{}},{default:t(()=>[c.value.USER_NAME!==a(n).USER_NAME?(r(),y(Y,{key:0,icon:"mdi-chevron-left",style:{"font-size":"1.4rem"},onClick:F})):te("",!0),e(Tl,{class:"text-h5 ms-5"},{default:t(()=>[u(R(c.value.USER_NAME),1)]),_:1}),c.value.USER_NAME===a(n).USER_NAME?(r(),y(et,{key:1,"max-width":"400px"},{activator:t(({props:m})=>[e(Y,Ee(m,{icon:"mdi-plus-box-outline",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:m})=>[e(je,{style:{"border-radius":"15px"}},{default:t(()=>[e(It,{class:"text-center"},{default:t(()=>[e(bt,{"is-mobile":""})]),_:1}),e(Ze),e(Y,{text:"Close Dialog",flat:!0,onClick:H=>m.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(pe,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})):te("",!0),e(et,{"max-width":"400px"},{activator:t(({props:m})=>[e(Y,Ee(m,{icon:"mdi-menu",style:{"font-size":"1.25rem"}}),null,16)]),default:t(({isActive:m})=>[e(je,{style:{"border-radius":"15px"},class:"text-center"},{default:t(()=>[e(It,null,{default:t(()=>[c.value.USER_NAME===a(n).USER_NAME?(r(),y(yt,{key:0,"is-mobile":""})):(r(),y(xt,{key:1,"is-mobile":""}))]),_:1}),e(Ze),e(Y,{text:"Close Dialog",flat:!0,onClick:H=>m.value=!1,style:{position:"absolute",right:"0",top:"0"}},{default:t(()=>[e(pe,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1})]),_:1})):te("",!0),c.value.ROLE!==a(Ae).CLUB?(r(),y(Ca,{key:1})):(r(),y(pa,{key:2}))],64))}},Ga=ze(Sa,[["__scopeId","data-v-10f3fa62"]]);export{Ga as default};
